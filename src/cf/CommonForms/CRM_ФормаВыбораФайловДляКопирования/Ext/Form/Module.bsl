
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Параметры.Свойство("СписокФайлов") Тогда
		ТаблицаФайлов.Очистить();
		Для Каждого Файл Из Параметры.СписокФайлов Цикл
			НоваяСтрока					= ТаблицаФайлов.Добавить();
			НоваяСтрока.Ссылка			= Файл.Значение;
			НоваяСтрока.Наименование	= Файл.Значение.Наименование + "." + Файл.Значение.Расширение;
			НоваяСтрока.ИндексКартинки	= РаботаСФайламиСлужебныйКлиентСервер.ПолучитьИндексПиктограммыФайла(Файл.Значение.Расширение);
			НоваяСтрока.Пометка			= Истина;
		КонецЦикла;			
	КонецЕсли;		
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура КомандаОК(Команда)
	СписокФайлов = Новый СписокЗначений;
	Для Каждого Строчка Из ТаблицаФайлов Цикл
		Если Строчка.Пометка Тогда
			СписокФайлов.Добавить(Строчка.Ссылка,,Истина);
		КонецЕсли;			
	КонецЦикла;		
	Закрыть(СписокФайлов);
КонецПроцедуры

&НаКлиенте
Процедура КомандаОтмена(Команда)
	Закрыть(Неопределено);
КонецПроцедуры

&НаКлиенте
Процедура КомандаСнятьВыделение(Команда)
	Для каждого Строка Из ТаблицаФайлов Цикл
		Строка.Пометка = Ложь;
	КонецЦикла; 
КонецПроцедуры

&НаКлиенте
Процедура КомандаВыбратьВсеСтроки(Команда)
	Для каждого Строка Из ТаблицаФайлов Цикл
		Строка.Пометка = Истина;
	КонецЦикла; 
КонецПроцедуры

#КонецОбласти
