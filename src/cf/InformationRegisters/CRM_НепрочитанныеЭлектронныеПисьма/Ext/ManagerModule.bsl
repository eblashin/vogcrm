
Процедура ОбработкаПереходаНаНовуюСтруктуру() Экспорт
	
	Запрос = Новый Запрос("ВЫБРАТЬ РАЗЛИЧНЫЕ
	                      |	CRM_НепрочитанныеЭлектронныеПисьма.Письмо КАК Письмо
	                      |ИЗ
	                      |	РегистрСведений.CRM_НепрочитанныеЭлектронныеПисьма КАК CRM_НепрочитанныеЭлектронныеПисьма");
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		НаборЗаписей = РегистрыСведений.CRM_НепрочитанныеЭлектронныеПисьма.СоздатьНаборЗаписей();
		НаборЗаписей.Отбор.Письмо.Установить(Выборка.Письмо);
		НаборЗаписей.Прочитать();
		Если ЗначениеЗаполнено(Выборка.Письмо) Тогда
			ТЗНабора = НаборЗаписей.Выгрузить(,);
			ТЗНабора.Свернуть("Письмо");
			НаборЗаписей.Загрузить(ТЗНабора);
		Иначе
			НаборЗаписей.Очистить();
		КонецЕсли;
		НаборЗаписей.Записать();
	КонецЦикла;
	
КонецПроцедуры