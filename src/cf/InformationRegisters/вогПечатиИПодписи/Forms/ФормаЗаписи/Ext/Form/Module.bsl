
&НаКлиенте
Процедура ПриложитьИзображение(Команда)
	Оповещение = Новый ОписаниеОповещения("ОбработатьВыборФайла", ЭтотОбъект);
	НачатьПомещениеФайла(Оповещение,,, Истина, УникальныйИдентификатор);
КонецПроцедуры

&НаКлиенте
Процедура ОбработатьВыборФайла(Результат, Адрес, ВыбранноеИмяФайла, ДополнительныеПараметры) экспорт
	
	Если НЕ Результат тогда
		Возврат;
	КонецЕсли;
	
	СсылкаНаКартинку = Адрес;
	
КонецПроцедуры	

&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	
	Если ЭтоАдресВременногоХранилища(СсылкаНаКартинку) тогда
		ТекущийОбъект.Картинка = Новый ХранилищеЗначения(ПолучитьИзВременногоХранилища(СсылкаНаКартинку));
	КонецЕсли;	
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Отбор = Новый Структура;	
	Отбор.Вставить("Владелец",      Запись.Владелец);	
	Отбор.Вставить("Период",      Запись.Период);	
	КлючЗаписи = РегистрыСведений.вогПечатиИПодписи.СоздатьКлючЗаписи(Отбор);
	
	СсылкаНаКартинку = ПолучитьНавигационнуюСсылку(КлючЗаписи, "Картинка");
	
КонецПроцедуры

