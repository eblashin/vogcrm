

&НаКлиенте
Процедура Выбрать(Команда)
	
	Если Элементы.ТаблицаКоллекцийДляСайта.ТекущиеДанные <> Неопределено Тогда
		ОповеститьОВыборе(Элементы.ТаблицаКоллекцийДляСайта.ТекущиеДанные);
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ЗакрытьФорму(Команда)
	
	Закрыть();
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Для Каждого Коллекция Из Параметры.СписокКоллекций Цикл
		НоваяСтрока = ТаблицаКоллекцийДляСайта.Добавить();
		ЗаполнитьЗначенияСвойств(НоваяСтрока,Коллекция);
	КонецЦикла;
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	КоллекцииДляСайта.Ссылка КАК Наименование,
		|	"""" КАК УИД
		|ИЗ
		|	Справочник.КоллекцииДляСайта КАК КоллекцииДляСайта
		|ГДЕ
		|	НЕ КоллекцииДляСайта.ПометкаУдаления
		|	И КоллекцииДляСайта.НаправлениеДеятельности = &НаправлениеДеятельности";
	
	Запрос.УстановитьПараметр("НаправлениеДеятельности", Параметры.НаправлениеДеятельности);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
	
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		НоваяСтрока = ТаблицаКоллекцийДляСайта.Добавить();
		НоваяСтрока.Наименование = ВыборкаДетальныеЗаписи.Наименование;
		НоваяСтрока.УИД = ВыборкаДетальныеЗаписи.Наименование.УникальныйИдентификатор();
	КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаДизайновВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	Если Элемент.ТекущиеДанные <> Неопределено Тогда
		ОповеститьОВыборе(Элемент.ТекущиеДанные);
	КонецЕсли;

КонецПроцедуры

&НаКлиенте
Процедура СтрокаПоискаАвтоПодбор(Элемент, Текст, ДанныеВыбора, ПараметрыПолученияДанных, Ожидание, СтандартнаяОбработка)
	
	Элементы.ТаблицаКоллекцийДляСайта.ОтборСтрок = Новый ФиксированнаяСтруктура("Наименование",Текст);
	
КонецПроцедуры

&НаКлиенте
Процедура СтрокаПоискаОчистка(Элемент, СтандартнаяОбработка)
	
	Элементы.ТаблицаКоллекцийДляСайта.ОтборСтрок = Неопределено;
	
КонецПроцедуры
