<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>3e970df9-c257-473d-895d-5a1e7fbb2830    </Ид>
	<Наименование>CRM --&gt; УПП NEW</Наименование>
	<ДатаВремяСоздания>2020-07-09T11:26:47</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="3.0.7.1" СинонимКонфигурации="1C:CRM, редакция 3.0">CRM</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="1.3.40.1" СинонимКонфигурации="Управление производственным предприятием, редакция 1.3">УправлениеПроизводственнымПредприятием</Приемник>
	<ПослеЗагрузкиПравилОбмена>
ТаблицаАлгоритмовВыгрузки = Новый ТаблицаЗначений;

Массив = Новый Массив;
Массив.Добавить(Тип("Строка"));

ОписаниеТиповСтрока = Новый ОписаниеТипов(Массив);

ТаблицаАлгоритмовВыгрузки.Колонки.Добавить("ПВД", 				ОписаниеТиповСтрока);
ТаблицаАлгоритмовВыгрузки.Колонки.Добавить("Обработчик", 		ОписаниеТиповСтрока);
ТаблицаАлгоритмовВыгрузки.Колонки.Добавить("ПараметрВыгрузки", 	ОписаниеТиповСтрока);

// Алгоритм выгрузки Менеджеры контрагентов
НоваяСтрока = ТаблицаАлгоритмовВыгрузки.Добавить();
НоваяСтрока.ПВД 				= "МенеджерыКонтрагентов";
НоваяСтрока.ПараметрВыгрузки 	= "ОбъектыВыгрузки";
НоваяСтрока.Обработчик 	= 
"ТаблицаОбъектовВыгрузки = Новый ТаблицаЗначений;
|ТаблицаОбъектовВыгрузки.Колонки.Добавить(""ОбъектВыгрузки"", Метаданные.ОпределяемыеТипы.вогОбъектВыгрузкиВУчетнуюСистему.Тип);
|	
|Для Каждого ОбъектВыгрузки Из ОписаниеОбъекта.СписокОбъектов Цикл
|	НоваяСтрокаВыгрузки = ТаблицаОбъектовВыгрузки.Добавить();
|	НоваяСтрокаВыгрузки.ОбъектВыгрузки = ОбъектВыгрузки.Значение;
|КонецЦикла;
|
|ПараметрыОтбора = Новый Структура;
|ПараметрыОтбора.Вставить(""Наименование"", ПараметрВыгрузки);
|
|НайденныеПараметры = Обработка.ТаблицаНастройкиПараметров.НайтиСтроки(ПараметрыОтбора);
|
|Для Каждого СтрокаТЧ Из НайденныеПараметры Цикл
|	СтрокаТЧ.Значение = ЗначениеВСтрокуВнутр(ТаблицаОбъектовВыгрузки);
|КонецЦикла;";
//

Параметры.АлгоритмыВыгрузки = ЗначениеВСтрокуВнутр(ТаблицаАлгоритмовВыгрузки);</ПослеЗагрузкиПравилОбмена>
	<ПередЗагрузкойДанных>
Параметры.Вставить("ОбъектыДляУстановкиКатегории", 	Новый Массив);
Параметры.Вставить("ОбъектыДляФормированияТипаЦен", Новый Массив);</ПередЗагрузкойДанных>
	<ПослеЗагрузкиДанных>
Категория = Справочники.КатегорииОбъектов.ПокупательТоваров;

Для Каждого ЭлементМассив Из Параметры.ОбъектыДляУстановкиКатегории Цикл
	
	Запись = РегистрыСведений.КатегорииОбъектов.СоздатьМенеджерЗаписи();
	Запись.Объект 		= ЭлементМассив;
	Запись.Категория 	= Категория;
	
	Попытка
		Запись.Записать();
	Исключение
		
	КонецПопытки;
	
КонецЦикла;

Выполнить(Алгоритмы.ФормированиеТиповЦен);</ПослеЗагрузкиДанных>
	<Параметры>
		<Параметр Имя="АлгоритмыВыгрузки                                 " Наименование="АлгоритмыВыгрузки                                 " ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="false" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ОбъектыВыгрузки                                   " Наименование="ОбъектыВыгрузки                                   " ИспользуетсяПриЗагрузке="true" УстанавливатьВДиалоге="true" ТипЗначения="Строка" ПередаватьПараметрПриВыгрузке="true"/>
		<Параметр Имя="ПартнерОтбор                                      " Наименование="Партнер                                           " ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="true" ТипЗначения="СправочникСсылка.Партнеры" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="РЦОтбор                                           " Наименование="РЦ                             " ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="true" ТипЗначения="СправочникСсылка.вогРаспределительныеЦентры" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ТТОтбор                                           " Наименование="ТТ                                     " ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="true" ТипЗначения="СправочникСсылка.вогТорговыеТочки" ПередаватьПараметрПриВыгрузке="false"/>
		<Параметр Имя="ЮрЛицоОтбор                                       " Наименование="Юрлицо" ИспользуетсяПриЗагрузке="false" УстанавливатьВДиалоге="true" ТипЗначения="СправочникСсылка.вогЮридическиеЛица" ПередаватьПараметрПриВыгрузке="false"/>
	</Параметры>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ЮрФизЛицо</Код>
				<Наименование>Перечисление: Юр/Физлицо</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.ЮрФизЛицо</Источник>
				<Приемник>ПеречислениеСсылка.ЮрФизЛицо</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>3</Код>
						<Наименование>ИндивидуальныйПредприниматель --&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<Источник>ИндивидуальныйПредприниматель</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>1</Код>
						<Наименование>ФизЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>100</Порядок>
						<Источник>ФизЛицо</Источник>
						<Приемник>ФизЛицо</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>ЮрЛицо --&gt; ЮрЛицо</Наименование>
						<Порядок>150</Порядок>
						<Источник>ЮрЛицо</Источник>
						<Приемник>ЮрЛицо</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ТипыКонтактнойИнформации</Код>
				<Наименование>Перечисление: Типы контактной информации</Наименование>
				<Порядок>100</Порядок>
				<Источник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Источник>
				<Приемник>ПеречислениеСсылка.ТипыКонтактнойИнформации</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>2</Код>
						<Наименование>Адрес --&gt; Адрес</Наименование>
						<Порядок>50</Порядок>
						<Источник>Адрес</Источник>
						<Приемник>Адрес</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>АдресЭлектроннойПочты --&gt; АдресЭлектроннойПочты</Наименование>
						<Порядок>100</Порядок>
						<Источник>АдресЭлектроннойПочты</Источник>
						<Приемник>АдресЭлектроннойПочты</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ВебСтраница --&gt; ВебСтраница</Наименование>
						<Порядок>150</Порядок>
						<Источник>ВебСтраница</Источник>
						<Приемник>ВебСтраница</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Другое --&gt; Другое</Наименование>
						<Порядок>200</Порядок>
						<Источник>Другое</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>250</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
					<Значение>
						<Код>1</Код>
						<Наименование>Skype --&gt;</Наименование>
						<Порядок>300</Порядок>
						<Источник>Skype</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>Факс --&gt;</Наименование>
						<Порядок>350</Порядок>
						<Источник>Факс</Источник>
						<Приемник>Другое</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыДоговоров</Код>
				<Наименование>Перечисление: Виды договоров</Наименование>
				<Порядок>150</Порядок>
				<Источник>ПеречислениеСсылка.ВидыДоговоров</Источник>
				<Приемник>ПеречислениеСсылка.ВидыДоговоровКонтрагентов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Прочее --&gt; Прочее</Наименование>
						<Порядок>50</Порядок>
						<Источник>Прочее</Источник>
						<Приемник>Прочее</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>СКомиссионером --&gt; СКомиссионером</Наименование>
						<Порядок>100</Порядок>
						<Источник>СКомиссионером</Источник>
						<Приемник>СКомиссионером</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>СКомитентом --&gt; СКомитентом</Наименование>
						<Порядок>150</Порядок>
						<Источник>СКомитентом</Источник>
						<Приемник>СКомитентом</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>СПокупателем --&gt; СПокупателем</Наименование>
						<Порядок>200</Порядок>
						<Источник>СПокупателем</Источник>
						<Приемник>СПокупателем</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>СПоставщиком --&gt; СПоставщиком</Наименование>
						<Порядок>250</Порядок>
						<Источник>СПоставщиком</Источник>
						<Приемник>СПоставщиком</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>СтатусыСогласования</Код>
				<Наименование>Перечисление: Статусы согласования</Наименование>
				<Порядок>200</Порядок>
				<Источник>ПеречислениеСсылка.вогСтатусыСогласования</Источник>
				<Приемник>ПеречислениеСсылка.ВГ_СтатусыКонтрагентов</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>НаСогласовании --&gt; НаСогласовании</Наименование>
						<Порядок>50</Порядок>
						<Источник>НаСогласовании</Источник>
						<Приемник>НаСогласовании</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НеСогласован --&gt; НеСогласован</Наименование>
						<Порядок>100</Порядок>
						<Источник>НеСогласован</Источник>
						<Приемник>НеСогласован</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Согласован --&gt; Согласован</Наименование>
						<Порядок>150</Порядок>
						<Источник>Согласован</Источник>
						<Приемник>Согласован</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Проект --&gt; Создан</Наименование>
						<Порядок>200</Порядок>
						<Источник>Зарегистрирован</Источник>
						<Приемник>Создан</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Заблокирован --&gt; Согласован</Наименование>
						<Порядок>250</Порядок>
						<Источник>Заблокирован</Источник>
						<Приемник>Согласован</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВГ_ТипыПолейКонтрагента</Код>
				<Наименование>Перечисление: Типы полей контрагента</Наименование>
				<Порядок>250</Порядок>
				<Источник>ПеречислениеСсылка.вогТипыПолейКонтрагента</Источник>
				<Приемник>ПеречислениеСсылка.ВГ_ТипыПолейКонтрагента</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
						<Порядок>50</Порядок>
						<Источник>ОсновнойБанковскийСчет</Источник>
						<Приемник>ОсновнойБанковскийСчет</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Телефон --&gt; Телефон</Наименование>
						<Порядок>100</Порядок>
						<Источник>Телефон</Источник>
						<Приемник>Телефон</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>ФактическийАдрес --&gt; ФактическийАдрес</Наименование>
						<Порядок>150</Порядок>
						<Источник>ФактическийАдрес</Источник>
						<Приемник>ФактическийАдрес</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>ЮридическийАдрес --&gt; ЮридическийАдрес</Наименование>
						<Порядок>200</Порядок>
						<Источник>ЮридическийАдрес</Источник>
						<Приемник>ЮридическийАдрес</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>CRM_ИНН --&gt; ИНН</Наименование>
						<Порядок>250</Порядок>
						<Источник>CRM_ИНН</Источник>
						<Приемник>ИНН</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>CRM_КПП --&gt; КПП</Наименование>
						<Порядок>300</Порядок>
						<Источник>CRM_КПП</Источник>
						<Приемник>КПП</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>НаименованиеПолное --&gt; ПолноеНаименование</Наименование>
						<Порядок>350</Порядок>
						<Источник>НаименованиеПолное</Источник>
						<Приемник>ПолноеНаименование</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Группа>
				<Код>Общие</Код>
				<Наименование>Общие</Наименование>
				<Порядок>50</Порядок>
				<Правило>
					<Код>Валюты</Код>
					<Наименование>Справочник: Валюты</Наименование>
					<Порядок>50</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.Валюты</Источник>
					<Приемник>СправочникСсылка.Валюты</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ПараметрыПрописи --&gt; ПараметрыПрописиНаРусском</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПараметрыПрописи" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ПараметрыПрописиНаРусском" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Банки</Код>
					<Наименование>Справочник: Классификатор банков</Наименование>
					<Порядок>100</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.КлассификаторБанков</Источник>
					<Приемник>СправочникСсылка.Банки</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>9</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.КлассификаторБанков"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Банки"/>
							<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Адрес --&gt; Адрес</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>КоррСчет --&gt; КоррСчет</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КоррСчет" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Телефоны --&gt; Телефоны</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Телефоны" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ОрганизационноПравовыеФормы</Код>
					<Наименование>Справочник: Организационно-правовые формы</Наименование>
					<Порядок>150</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.вогОрганизационноПравовыеФормы</Источник>
					<Приемник>СправочникСсылка.ВГ_ОрганизационноПравовыеФормы</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ВидыВзаиморасчетов_НаправленияДеятельности</Код>
					<Наименование>Справочник: Направления деятельности</Наименование>
					<Порядок>200</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.НаправленияДеятельности</Источник>
					<Приемник>СправочникСсылка.ВидыВзаиморасчетов</Приемник>
					<Свойства>
						<Свойство>
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения>
						<Значение>
							<Код>1</Код>
							<Наименование>ОсновноеНаправление --&gt; Обои</Наименование>
							<Порядок>50</Порядок>
							<Источник>Обои</Источник>
							<Приемник>Обои</Приемник>
						</Значение>
						<Значение>
							<Код>2</Код>
							<Наименование>Прочее --&gt; Плитка</Наименование>
							<Порядок>100</Порядок>
							<Источник>Плитка</Источник>
							<Приемник>Плитка</Приемник>
						</Значение>
					</Значения>
				</Правило>
				<Правило>
					<Код>Организации</Код>
					<Наименование>Справочник: Организации</Наименование>
					<Порядок>250</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.Организации</Источник>
					<Приемник>СправочникСсылка.Организации</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>ИНН --&gt; ИНН</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>КПП --&gt; КПП</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>НаименованиеСокращенное --&gt; НаименованиеСокращенное</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеСокращенное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>6</Код>
							<Наименование>Префикс --&gt; Префикс</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Префикс" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ЮрФизЛицо --&gt; ЮрФизЛицо</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>БанковскиеСчета</Код>
					<Наименование>Справочник: Банковские счета</Наименование>
					<Порядок>300</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.БанковскиеСчета</Источник>
					<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>12</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>11</Код>
							<Наименование>Владелец --&gt; Владелец</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Владелец" Вид="Свойство"/>
							<Приемник Имя="Владелец" Вид="Свойство"/>
							<ПередВыгрузкой>Если ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
	ИмяПКО = "ЮридическиеЛица_Контрагенты";
ИначеЕсли ТипЗнч(Источник.Владелец) = Тип("СправочникСсылка.Организации") Тогда
	ИмяПКО = "Организации";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Банк --&gt; Банк</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
							<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
							<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>БанкРасчетов --&gt; БанкДляРасчетов</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="БанкРасчетов" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторБанков"/>
							<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
							<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ВалютаДенежныхСредств --&gt; ВалютаДенежныхСредств</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ВидСчета --&gt; ВидСчета</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ДатаЗакрытия --&gt; ДатаЗакрытия</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ДатаОткрытия --&gt; ДатаОткрытия</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>НомерИДатаРазрешения --&gt; НомерИДатаРазрешения</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>НомерСчета --&gt; НомерСчета</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>СуммаБезКопеек --&gt; СуммаБезКопеек</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
							<Приемник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>ТекстКорреспондента --&gt; ТекстКорреспондента</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ТекстНазначения --&gt; ТекстНазначения</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; МесяцПрописью</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = (Источник.ВариантВыводаМесяца = Перечисления.ВариантыВыводаМесяцаВДатеДокумента.Прописью);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>БанковскиеСчета_ЮрЛица</Код>
					<Наименование>Справочник: Банковские счета</Наименование>
					<Порядок>350</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.БанковскиеСчета</Источник>
					<Приемник>СправочникСсылка.БанковскиеСчета</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>15</Код>
							<Наименование>--&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>16</Код>
							<Наименование>--&gt; Владелец</Наименование>
							<Порядок>100</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Владелец" Вид="Свойство"/>
							<КодПравилаКонвертации>ЮридическиеЛица_Контрагенты                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>--&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; Банк</Наименование>
							<Порядок>200</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Банк" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
							<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>--&gt; БанкДляРасчетов</Наименование>
							<Порядок>250</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="БанкДляРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Банки"/>
							<КодПравилаКонвертации>Банки                                             </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>--&gt; ВалютаДенежныхСредств</Наименование>
							<Порядок>300</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВалютаДенежныхСредств" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
							<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>--&gt; ВидСчета</Наименование>
							<Порядок>350</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ВидСчета" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>--&gt; ДатаЗакрытия</Наименование>
							<Порядок>400</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаЗакрытия" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>--&gt; ДатаОткрытия</Наименование>
							<Порядок>450</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДатаОткрытия" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>--&gt; НомерИДатаРазрешения</Наименование>
							<Порядок>500</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерИДатаРазрешения" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; НомерСчета</Наименование>
							<Порядок>550</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерСчета" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>--&gt; СуммаБезКопеек</Наименование>
							<Порядок>600</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаБезКопеек" Вид="Реквизит" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>--&gt; ТекстКорреспондента</Наименование>
							<Порядок>650</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТекстКорреспондента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; ТекстНазначения</Наименование>
							<Порядок>700</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТекстНазначения" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; МесяцПрописью</Наименование>
							<Порядок>750</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="МесяцПрописью" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = (ВходящиеДанные.ВариантВыводаМесяца = Перечисления.ВариантыВыводаМесяцаВДатеДокумента.Прописью);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; ПометкаУдаления</Наименование>
							<Порядок>800</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>17</Код>
							<Наименование>--&gt; Организация</Наименование>
							<Порядок>850</Порядок>
							<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Пользователи</Код>
					<Наименование>Справочник: Пользователи</Наименование>
					<Порядок>400</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.Пользователи</Источник>
					<Приемник>СправочникСсылка.Пользователи</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ДокументыУдостоверяющиеЛичность</Код>
					<Наименование>Справочник: Виды документов физических лиц</Наименование>
					<Порядок>400</Порядок>
					<НеЗамещать>true</НеЗамещать>
					<Источник>СправочникСсылка.ВидыДокументовФизическихЛиц</Источник>
					<Приемник>СправочникСсылка.ДокументыУдостоверяющиеЛичность</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения>
						<Значение>
							<Код>1</Код>
							<Наименование>ПаспортРФ --&gt;</Наименование>
							<Порядок>50</Порядок>
							<Источник>ПаспортРФ</Источник>
							<Приемник>ИМНС21</Приемник>
						</Значение>
						<Значение>
							<Код>2</Код>
							<Наименование>ЗагранпаспортРФ --&gt;</Наименование>
							<Порядок>100</Порядок>
							<Источник>ЗагранпаспортРФ</Источник>
							<Приемник>ИМНС22</Приемник>
						</Значение>
						<Значение>
							<Код>3</Код>
							<Наименование>ЗагранпаспортСССР --&gt;</Наименование>
							<Порядок>150</Порядок>
							<Источник>ЗагранпаспортСССР</Источник>
							<Приемник>ИМНС02</Приемник>
						</Значение>
						<Значение>
							<Код>4</Код>
							<Наименование>ПаспортСССР --&gt;</Наименование>
							<Порядок>200</Порядок>
							<Источник>ПаспортСССР</Источник>
							<Приемник>ИМНС01</Приемник>
						</Значение>
						<Значение>
							<Код>5</Код>
							<Наименование>ВоенныйБилет --&gt;</Наименование>
							<Порядок>250</Порядок>
							<Источник>ВоенныйБилет</Источник>
							<Приемник>ИМНС07</Приемник>
						</Значение>
						<Значение>
							<Код>6</Код>
							<Наименование>ВоенныйБилетОфицераЗапаса --&gt;</Наименование>
							<Порядок>300</Порядок>
							<Источник>ВоенныйБилетОфицераЗапаса</Источник>
							<Приемник>ИМНС27</Приемник>
						</Значение>
						<Значение>
							<Код>7</Код>
							<Наименование>ДипломатическийПаспорт --&gt;</Наименование>
							<Порядок>350</Порядок>
							<Источник>ДипломатическийПаспорт</Источник>
							<Приемник>ИМНС09</Приемник>
						</Значение>
						<Значение>
							<Код>8</Код>
							<Наименование>ПаспортМинморфлота --&gt;</Наименование>
							<Порядок>400</Порядок>
							<Источник>ПаспортМинморфлота</Источник>
							<Приемник>ИМНС06</Приемник>
						</Значение>
						<Значение>
							<Код>9</Код>
							<Наименование>ПаспортМоряка --&gt;</Наименование>
							<Порядок>450</Порядок>
							<Источник>ПаспортМоряка</Источник>
							<Приемник>ИМНС26</Приемник>
						</Значение>
						<Значение>
							<Код>10</Код>
							<Наименование>СвидетельствоОРождении --&gt;</Наименование>
							<Порядок>500</Порядок>
							<Источник>СвидетельствоОРождении</Источник>
							<Приемник>ИМНС03</Приемник>
						</Значение>
						<Значение>
							<Код>11</Код>
							<Наименование>УдостоверениеОфицера --&gt;</Наименование>
							<Порядок>550</Порядок>
							<Источник>УдостоверениеОфицера</Источник>
							<Приемник>ИМНС04</Приемник>
						</Значение>
						<Значение>
							<Код>12</Код>
							<Наименование>ВодительскоеУдостоверение --&gt;</Наименование>
							<Порядок>600</Порядок>
							<Источник>ВодительскоеУдостоверение</Источник>
							<Приемник>ИМНС99</Приемник>
						</Значение>
					</Значения>
				</Правило>
				<Правило>
					<Код>вогГорода</Код>
					<Наименование>Справочник: Города</Наименование>
					<Порядок>450</Порядок>
					<НеЗамещать>true</НеЗамещать>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.вогГорода</Источник>
					<Приемник>СправочникСсылка.ВГ_Города</Приемник>
					<Свойства>
						<Свойство>
							<Код>1</Код>
							<Наименование>ГородскаяЧисленность --&gt; ГородскаяЧисленность</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ГородскаяЧисленность" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="ГородскаяЧисленность" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>КодАдресногоЭлемента --&gt; КодАдресногоЭлемента</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="КодАдресногоЭлемента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КодАдресногоЭлемента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>СельскаяЧисленность --&gt; СельскаяЧисленность</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СельскаяЧисленность" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СельскаяЧисленность" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Численность --&gt; Численность</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Численность" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Численность" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>5</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>6</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>8</Код>
							<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.вогГорода"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВГ_Города"/>
							<КодПравилаКонвертации>вогГорода                                         </КодПравилаКонвертации>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>вогРегионы</Код>
					<Наименование>Справочник: Регионы</Наименование>
					<Порядок>500</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.вогРегионы</Источник>
					<Приемник>СправочникСсылка.Регионы</Приемник>
					<Свойства>
						<Свойство>
							<Код>1</Код>
							<Наименование>ЖДСтанцияНазначения --&gt; ЖДСтанцияНазначения</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ЖДСтанцияНазначения" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ЖДСтанцияНазначения" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>КодАдресногоЭлемента --&gt; КодАдресногоЭлемента</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="КодАдресногоЭлемента" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КодАдресногоЭлемента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>3</Код>
							<Наименование>КодРегиона --&gt; КодРегиона</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="КодРегиона" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодРегиона" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>вогРайоны</Код>
					<Наименование>Справочник: Районы</Наименование>
					<Порядок>550</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.вогРайоны</Источник>
					<Приемник>СправочникСсылка.ВГ_Районы</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство Поиск="true">
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>4</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>БизнесРегионы_Города</Код>
					<Наименование>Справочник: Бизнес-регионы</Наименование>
					<Порядок>600</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.БизнесРегионы</Источник>
					<Приемник>СправочникСсылка.ВГ_Города</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>CRM_КодКЛАДР --&gt; КодАдресногоЭлемента</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="CRM_КодКЛАДР" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КодАдресногоЭлемента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>CRM_ЧисленностьНаселения --&gt; Численность</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="CRM_ЧисленностьНаселения" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Численность" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>БизнесРегионы_Иерархия</Код>
					<Наименование>Справочник: Бизнес-регионы</Наименование>
					<Порядок>650</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.БизнесРегионы</Источник>
					<Приемник>СправочникСсылка.Регионы</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>4</Код>
							<Наименование>CRM_КодКЛАДР --&gt; КодАдресногоЭлемента</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="CRM_КодКЛАДР" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="КодАдресногоЭлемента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.БизнесРегионы"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Регионы"/>
							<КодПравилаКонвертации>БизнесРегионы_Иерархия                            </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>БизнесРегионы_РынкиОМИерархия</Код>
					<Наименование>:</Наименование>
					<Порядок>700</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
					<Источник>СправочникСсылка.БизнесРегионы</Источник>
					<Приемник>СправочникСсылка.ВГ_РынкиОтделочныхМатериалов</Приемник>
					<Свойства>
						<Свойство Поиск="true" Обязательное="true">
							<Код>2</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Родитель --&gt; Родитель</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.БизнесРегионы"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВГ_РынкиОтделочныхМатериалов"/>
							<КодПравилаКонвертации>БизнесРегионы_РынкиОМИерархия                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Группа>
					<Код>ВидыКонтактнойИнформации</Код>
					<Наименование>ВидыКонтактнойИнформации</Наименование>
					<Порядок>750</Порядок>
					<Правило>
						<Код>ВидыКонтактнойИнформации_ТорговыеТочки</Код>
						<Наименование>Справочник: Виды контактной информации</Наименование>
						<Порядок>50</Порядок>
						<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
						<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>Тип --&gt; Тип</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>--&gt; ВидОбъектаКонтактнойИнформации</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
								<ПередВыгрузкой>Значение = "Контрагенты";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения>
							<Значение>
								<Код>2</Код>
								<Наименование>ТелефонОрганизации --&gt; ТелефонОрганизации</Наименование>
								<Порядок>50</Порядок>
								<Источник>ТелефонТорговойТочки</Источник>
								<Приемник>ТелефонКонтрагента</Приемник>
							</Значение>
							<Значение>
								<Код>4</Код>
								<Наименование>ФактАдресОрганизации --&gt; ФактАдресОрганизации</Наименование>
								<Порядок>100</Порядок>
								<Источник>АдресТорговойТочки</Источник>
								<Приемник>ФактАдресКонтрагента</Приемник>
							</Значение>
							<Значение>
								<Код>1</Код>
								<Наименование>EmailОрганизации --&gt; EmailОрганизации</Наименование>
								<Порядок>150</Порядок>
								<Источник>EmailТорговойТочки</Источник>
								<Приемник>АдресЭлектроннойПочтыКонтрагентаДляОбменаДокументами</Приемник>
							</Значение>
						</Значения>
					</Правило>
					<Правило>
						<Код>ВидыКонтактнойИнформации_ЮрЛица</Код>
						<Наименование>Справочник: Виды контактной информации</Наименование>
						<Порядок>50</Порядок>
						<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
						<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Тип --&gt; Тип</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>--&gt; ВидОбъектаКонтактнойИнформации</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
								<ПередВыгрузкой>Значение = "Контрагенты";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения>
							<Значение>
								<Код>3</Код>
								<Наименование>ТелефонЮридическогоЛица --&gt; ТелефонКонтрагента</Наименование>
								<Порядок>50</Порядок>
								<Источник>ТелефонЮридическогоЛица</Источник>
								<Приемник>ТелефонКонтрагента</Приемник>
							</Значение>
							<Значение>
								<Код>4</Код>
								<Наименование>ЮрАдресЮридическогоЛица --&gt; ЮрАдресКонтрагента</Наименование>
								<Порядок>100</Порядок>
								<Источник>ЮрАдресЮридическогоЛица</Источник>
								<Приемник>ЮрАдресКонтрагента</Приемник>
							</Значение>
							<Значение>
								<Код>2</Код>
								<Наименование>АдресЮридическогоЛица --&gt; ФактАдресКонтрагента</Наименование>
								<Порядок>150</Порядок>
								<Источник>АдресЮридическогоЛица</Источник>
								<Приемник>ФактАдресКонтрагента</Приемник>
							</Значение>
							<Значение>
								<Код>1</Код>
								<Наименование>EmailЮридическогоЛица --&gt; АдресЭлектроннойПочтыКон</Наименование>
								<Порядок>200</Порядок>
								<Источник>EmailЮридическогоЛица</Источник>
								<Приемник>АдресЭлектроннойПочтыКонтрагентаДляОбменаДокументами</Приемник>
							</Значение>
						</Значения>
					</Правило>
					<Правило>
						<Код>ВидыКонтактнойИнформации_РаспределительныеЦентры</Код>
						<Наименование>Справочник: Виды контактной информации</Наименование>
						<Порядок>50</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>СправочникСсылка.ВидыКонтактнойИнформации</Источник>
						<Приемник>СправочникСсылка.ВидыКонтактнойИнформации</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>Тип --&gt; Тип</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<Приемник Имя="Тип" Вид="Реквизит" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
								<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>--&gt; ВидОбъектаКонтактнойИнформации</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидОбъектаКонтактнойИнформации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОбъектовКонтактнойИнформации"/>
								<ПередВыгрузкой>Значение = "Контрагенты";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения>
							<Значение>
								<Код>4</Код>
								<Наименование>ТелефонРаспределительногоЦентра --&gt; ТелефонКонтраг</Наименование>
								<Порядок>200</Порядок>
								<Источник>ТелефонРаспределительногоЦентра</Источник>
								<Приемник>ТелефонКонтрагента</Приемник>
							</Значение>
							<Значение>
								<Код>5</Код>
								<Наименование>АдресРаспределительногоЦентра --&gt; ФактАдресКонтраг</Наименование>
								<Порядок>250</Порядок>
								<Источник>АдресРаспределительногоЦентра</Источник>
								<Приемник>ФактАдресКонтрагента</Приемник>
							</Значение>
							<Значение>
								<Код>6</Код>
								<Наименование>EmailРаспределительногоЦентра --&gt; АдресЭлектронной</Наименование>
								<Порядок>300</Порядок>
								<Источник>EmailРаспределительногоЦентра</Источник>
								<Приемник>АдресЭлектроннойПочтыКонтрагентаДляОбменаДокументами</Приемник>
							</Значение>
							<Значение>
								<Код>7</Код>
								<Наименование>ЮрАдресЮридическогоЛица --&gt; ЮрАдресКонтрагента</Наименование>
								<Порядок>350</Порядок>
								<Источник>ЮрАдресРаспределительногоЦентра</Источник>
								<Приемник>ЮрАдресКонтрагента</Приемник>
							</Значение>
						</Значения>
					</Правило>
				</Группа>
			</Группа>
			<Группа>
				<Код>Контрагенты</Код>
				<Наименование>Контрагенты</Наименование>
				<Порядок>350</Порядок>
				<Правило>
					<Код>Партнеры_Контрагенты</Код>
					<Наименование>Справочник: Клиенты</Наименование>
					<Порядок>50</Порядок>
					<ПослеВыгрузки>//Выполнить(Алгоритмы.ВыгрузкаСвязейКонтактныхЛиц);
</ПослеВыгрузки>
					<ПослеЗагрузки>
ЕстьИзменения = Ложь;

Если Не ОбъектНайден
	Или (ОбъектНайден И Лев(Ссылка.Код, 3) = "CRM")Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ПараметрКод = ПараметрыОбъекта.Получить("КодCRM");
		
		Если ПараметрКод &lt;&gt; Неопределено Тогда
			Объект.Код = ПараметрКод;
		КонецЕсли;			
		
	КонецЕсли;
	
	Объект.Родитель = Справочники.Контрагенты.ПокупателиТоваров;
	ЕстьИзменения = Истина;	
		
КонецЕсли;

Объект.ГруппаДляХолдинга = Объект.Ссылка;

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	ПараметрРодитель = ПараметрыОбъекта.Получить("Родитель");
	
	Если ПараметрРодитель &lt;&gt; Неопределено Тогда
		
		Объект.Родитель = Справочники.Контрагенты.НайтиПоКоду(ПараметрРодитель, Истина, Справочники.Контрагенты.ПокупателиТоваров);
		ЕстьИзменения = Истина;
		
	КонецЕсли;
	
КонецЕсли;

Если ЕстьИзменения Тогда
	Объект.ОбменДанными.Загрузка = Истина;
	Объект.Записать();	
КонецЕсли;</ПослеЗагрузки>
					<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.Партнеры</Источник>
					<Приемник>СправочникСсылка.Контрагенты</Приемник>
					<Свойства>
						<Свойство>
							<Код>2</Код>
							<Наименование>Код --&gt; КодCRM</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодCRM</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Код = Источник.Код;

Если СтрНачинаетсяС(Код, "CRM")
	И СтрДлина(Код) = 11 Тогда
	
	Префикс = Сред(Код, 1, 4);
	
	Номер = Прав(Сред(Код, 5), 5);
	
	Код = Префикс + Номер;
	
КонецЕсли;

Значение = Код;</ПередВыгрузкой>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>5</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>6</Код>
							<Наименование>--&gt; ЭтоГруппаХолдинга</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ЭтоГруппаХолдинга</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>--&gt; Родитель</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>Родитель</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ВЫРАЗИТЬ(вогЮридическиеЛицаПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация,
|	вогЮридическиеЛицаПодразделения.Подразделение	
|ПОМЕСТИТЬ ВТ_Организации
|ИЗ
|	Справочник.вогЮридическиеЛица.Подразделения КАК вогЮридическиеЛицаПодразделения
|ГДЕ
|	ВЫРАЗИТЬ(вогЮридическиеЛицаПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).ОбособленноеПодразделение = ИСТИНА
|	И вогЮридическиеЛицаПодразделения.Ссылка.Партнер = &amp;Ссылка
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	ВЫРАЗИТЬ(вогТорговыеТочкиПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).Организация,
|	вогТорговыеТочкиПодразделения.Подразделение
|ИЗ
|	Справочник.вогТорговыеТочки.Подразделения КАК вогТорговыеТочкиПодразделения
|ГДЕ
|	ВЫРАЗИТЬ(вогТорговыеТочкиПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).ОбособленноеПодразделение = ИСТИНА
|	И вогТорговыеТочкиПодразделения.Ссылка.Партнер = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	МАКСИМУМ(ВТ_Организации.Организация) КАК Организация,
|	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВТ_Организации.Организация) КАК КоличествоВсего
|ПОМЕСТИТЬ ВТ_КоличествоОрганизаций
|ИЗ
|	ВТ_Организации КАК ВТ_Организации
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ РАЗЛИЧНЫЕ
|	ВЫБОР
|		КОГДА ВТ_КоличествоОрганизаций.КоличествоВсего &gt; 1
			//""Федеральные покупатели""
|			ТОГДА ""000000014"" 
|		КОГДА ВТ_КоличествоОрганизаций.КоличествоВсего = 1
|			ТОГДА ВЫБОР
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ТК ВОГ""
						//""ВГ_Покупатели товаров""
|						ТОГДА ""000000011"" 
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""Декор-К""
						//""ДК_Покупатели товаров""
|						ТОГДА ""ЮЛ002560""   
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Кубань""
						//""КБ_Покупатели товаров""
|						ТОГДА ""000000007"" 
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Керамика""
						//""КР_Покупатели товаров""
|						ТОГДА ""000000006"" 
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Сибирь""
						//""СБ_Покупатели товаров""
|						ТОГДА ""000000005"" 
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Самара""
						//""СМ_Покупатели товаров""
|						ТОГДА ""000000010"" 
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Урал""
						//""УР_Покупатели товаров""
|						ТОГДА ""000000012"" 
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Юг""
|                       И ВЫРАЗИТЬ(ВТ_Организации.Подразделение КАК Справочник.СтруктураПредприятия).Код = ""000000004""
						//""КМВ_Покупатели товаров""
|						ТОГДА ""ЮЛ014424""
|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Юг""
|                   	И ВЫРАЗИТЬ(ВТ_Организации.Подразделение КАК Справочник.СтруктураПредприятия).Код = ""CR-000015""
						//""ЮГ_Покупатели товаров""
|						ТОГДА ""000000013""
|				КОНЕЦ
|	КОНЕЦ КАК Код
|ИЗ
|	ВТ_КоличествоОрганизаций КАК ВТ_КоличествоОрганизаций
|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Организации КАК ВТ_Организации
|		ПО ВТ_КоличествоОрганизаций.Организация = ВТ_Организации.Организация";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

Выборка = РезультатЗапроса.Выбрать();

Пока Выборка.Следующий() Цикл
	Значение = Выборка.Код;
КонецЦикла;
</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>Партнеры_РынкиОМ</Код>
					<Наименование>Справочник: Клиенты</Наименование>
					<Порядок>100</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.Партнеры</Источник>
					<Приемник>СправочникСсылка.ВГ_РынкиОтделочныхМатериалов</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<ПриводитьКДлине>9</ПриводитьКДлине>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>4</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>--&gt; Наименование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство Отключить="true">
							<Код>7</Код>
							<Наименование>БизнесРегион --&gt; Родитель</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="БизнесРегион" Вид="Реквизит" Тип="СправочникСсылка.БизнесРегионы"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ВГ_РынкиОтделочныхМатериалов"/>
							<КодПравилаКонвертации>БизнесРегионы_РынкиОМИерархия                     </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>--&gt; Адрес</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = УправлениеКонтактнойИнформацией.КонтактнаяИнформацияОбъекта(Источник.Ссылка, Справочники.ВидыКонтактнойИнформации.АдресПартнера);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>--&gt; Сайт</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сайт" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = УправлениеКонтактнойИнформацией.КонтактнаяИнформацияОбъекта(Источник.Ссылка, Справочники.ВидыКонтактнойИнформации.CRM_СайтПартнера);</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ТорговыеТочки_Контрагенты</Код>
					<Наименование>Справочник: Торговые точки</Наименование>
					<Порядок>150</Порядок>
					<ПослеВыгрузки>Выполнить(Алгоритмы.ВыгрузкаКонтактнойИнформации);
Выполнить(Алгоритмы.ВыгрузкаЮрРеквизитов);
//Выполнить(Алгоритмы.ПереносУсловийДоставки);
Выполнить(Алгоритмы.ФормированиеЗначенийСвойств);
Выполнить(Алгоритмы.ВыгрузкаСвязейКонтактныхЛиц);
</ПослеВыгрузки>
					<ПослеЗагрузки>
ЕстьИзменения = Ложь;

// ++ Обязательно до записи объекта
Выполнить(Алгоритмы.ЗаполнитьМенеджеров);
Выполнить(Алгоритмы.ЗаполнитьСтатусыСогласования);
// -- Обязательно до записи объекта

Если Не ОбъектНайден Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ПараметрКод = ПараметрыОбъекта.Получить("КодCRM");
		
		Если ПараметрКод &lt;&gt; Неопределено Тогда
			Объект.Код = ПараметрКод;
		КонецЕсли;			
		
	КонецЕсли;
	
	ЕстьИзменения = Истина;	
	
КонецЕсли;

//Статусы согласования
//Для каждого СтрокаТЧ Из Объект.Согласование Цикл
//	СтрокаТЧ.Пользователь = глЗначениеПеременной("глТекущийПользователь");
//КонецЦикла;

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	// ++ Определение группы размещения контрагента
	ПараметрПокупатель = ПараметрыОбъекта.Получить("Дистрибьютор");
	
	Если ПараметрПокупатель &lt;&gt; Неопределено
		И ПараметрПокупатель = Истина Тогда
		
		ЕстьИзменения 	= Истина;
		Объект.Родитель = Справочники.Контрагенты.НайтиПоКоду("ЮЛ017033");
		
	Иначе
		
		ПараметрКодГруппы = ПараметрыОбъекта.Получить("КодГруппы");
		
		Если ПараметрКодГруппы &lt;&gt; Неопределено Тогда
			
			ЕстьИзменения 	= Истина;
			Объект.Родитель = Справочники.Контрагенты.НайтиПоКоду(ПараметрКодГруппы);
			
		КонецЕсли;
		
	КонецЕсли;
	// -- Определение группы размещения контрагента
	
	ПараметрФорматТТ = ПараметрыОбъекта.Получить("ФорматТТ");
	
	Если ЗначениеЗаполнено(ПараметрФорматТТ) Тогда
		
		ЕстьИзменения = Истина;
		Объект.ФорматТТ = Справочники.ВГ_ФорматыТТ.НайтиПоКоду(ПараметрФорматТТ);
		
	КонецЕсли;
	
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьОрганизации);
//Выполнить(Алгоритмы.ДобавитьОрганизациюТранзит);

// + Тищенко В.В. 
// Алгоритм Солодова В.В. Условия доставки

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда	
	Если ПараметрыОбъекта.Получить("ДоступныЛогистическиеПараметры") = Истина Тогда
		//Выполнить(Алгоритмы.ЗаполнениеУсловийДоставки);			
	КонецЕсли;	
КонецЕсли;

// - Тищенко В.В.

Если ЕстьИзменения Тогда
	Объект.ОбменДанными.Загрузка = Истина;
	Объект.Записать();	
КонецЕсли;

//Категория = Справочники.КатегорииОбъектов.ПокупательТоваров;
//Выполнить(Алгоритмы.УстановитьКатегориюОбъекта);

Параметры.ОбъектыДляУстановкиКатегории.Добавить(Объект.Ссылка);
</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.вогТорговыеТочки</Источник>
					<Приемник>СправочникСсылка.Контрагенты</Приемник>
					<Свойства>
						<Свойство>
							<Код>5</Код>
							<Наименование>Код --&gt; КодCRM</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодCRM</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Код = Источник.Код;

Если СтрНачинаетсяС(Код, "CRM")
	И СтрДлина(Код) = 11 Тогда
	
	Префикс = Сред(Код, 1, 4);
	
	Номер = Прав(Сред(Код, 5), 5);
	
	Код = Префикс + Номер;
	
КонецЕсли;

Значение = Код;</ПередВыгрузкой>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>9</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Вывеска --&gt; Вывеска</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Вывеска" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Вывеска" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>Партнер --&gt; Родитель</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Партнеры_Контрагенты                              </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Рынок --&gt; Рынок</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="Рынок" Вид="Реквизит" Тип="СправочникСсылка.вогРынки"/>
							<Приемник Имя="Рынок" Вид="Реквизит" Тип="СправочникСсылка.ВГ_РынкиОтделочныхМатериалов"/>
							<КодПравилаКонвертации>Партнеры_РынкиОМ                                  </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>МестоположениеНаРынке --&gt; ДополнительнаяИнформацияОРынке</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="МестоположениеНаРынке" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ДополнительнаяИнформацияОРынке" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; Покупатель</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Покупатель" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>15</Код>
							<Наименование>--&gt; РольРЦ</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РольРЦ" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = (Источник.Вид = Справочники.вогВидыТорговыхТочек.РаспределительныйЦентр);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; РольТТ</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РольТТ" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>// Оригинал
//+ Тищенко В.В.
//Значение = (Источник.Вид = Справочники.вогВидыТорговыхТочек.ТорговаяТочка) И Не Источник.Грузополучатель;
// - Тищенко В.В.
Значение = Не Источник.Грузополучатель;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; РольТТГ</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РольТТГ" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>// + Тищенко В.В.
// Оригинал
//Значение = (Источник.Вид = Справочники.вогВидыТорговыхТочек.ТорговаяТочка) И Источник.Грузополучатель;
Значение = Источник.Грузополучатель;
// - Тищенко В.В.</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="СправочникСсылка.вогГорода"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="СправочникСсылка.ВГ_Города"/>
							<КодПравилаКонвертации>вогГорода                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Регион --&gt; Регион</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="Регион" Вид="Реквизит" Тип="СправочникСсылка.вогРегионы"/>
							<Приемник Имя="Регион" Вид="Реквизит" Тип="СправочникСсылка.Регионы"/>
							<КодПравилаКонвертации>вогРегионы                                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>Район --&gt; Район</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="Район" Вид="Реквизит" Тип="СправочникСсылка.вогРайоны"/>
							<Приемник Имя="Район" Вид="Реквизит" Тип="СправочникСсылка.ВГ_Районы"/>
							<КодПравилаКонвертации>вогРайоны                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; ОсновнаяОрганизация</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ОсновнаяОрганизация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
							<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							<ПередВыгрузкой>Если Источник.Организации.Количество() = 1 Тогда
	Значение = Источник.Организации[0].Организация;	
	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Партнер --&gt; ГруппаДляХолдинга</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
							<Приемник Имя="ГруппаДляХолдинга" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Партнеры_Контрагенты                              </КодПравилаКонвертации>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	вогСвязиТТСТТДистрибутором.ТорговаяТочка КАК ТорговаяТочка
|ИЗ
|	РегистрСведений.вогСвязиТТСТТДистрибутором КАК вогСвязиТТСТТДистрибутором
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.вогТорговыеТочки КАК вогТорговыеТочки
|		ПО вогСвязиТТСТТДистрибутором.ТорговаяТочка = вогТорговыеТочки.Ссылка
|			И (вогСвязиТТСТТДистрибутором.ТорговаяТочка = &amp;Ссылка)
|			И (вогТорговыеТочки.Вид = &amp;Вид)";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Вид", 	Справочники.вогВидыТорговыхТочек.ТРТД);

РезультатЗапроса = Запрос.Выполнить();

Если Не РезультатЗапроса.Пустой() Тогда
	Пусто = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; Направление</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Направление" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_Направления"/>
							<ПередВыгрузкой>Значение = "Внешнее";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Статус</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_СтатусыКонтрагентов"/>
							<ПередВыгрузкой>ОписаниеСтатуса = вогОбщегоНазначения.ПолучитьОписаниеСтатусаСогласованияОбъекта(Источник.Ссылка);
Если ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Согласован Тогда
	Значение = "Согласован";
КонецЕсли;
Если ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Заблокирован Тогда
	Значение = "Согласован";
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>КПП --&gt; КПП</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Группа Отключить="true">
							<Код>10</Код>
							<Наименование>--&gt; Организации</Наименование>
							<Порядок>1150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Организации" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ВЫРАЗИТЬ(вогТорговыеТочкиПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация
|ИЗ
|	Справочник.вогТорговыеТочки.Подразделения КАК вогТорговыеТочкиПодразделения
|ГДЕ
|	вогТорговыеТочкиПодразделения.Ссылка = &amp;Ссылка
|	И ВЫРАЗИТЬ(вогТорговыеТочкиПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).ОбособленноеПодразделение = ИСТИНА";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

КоллекцияОбъектов = РезультатЗапроса.Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>11</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Организация;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа>
							<Код>16</Код>
							<Наименование>--&gt; РолиКонтрагента</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РолиКонтрагента" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Роль");

//Если Источник.Вид = Справочники.вогВидыТорговыхТочек.РаспределительныйЦентр Тогда
//	КоллекцияОбъектов.Добавить().Роль = "РЦ";
	
Если Не Источник.Грузополучатель Тогда	
	КоллекцияОбъектов.Добавить().Роль = "ТТ";
	
ИначеЕсли Источник.Грузополучатель Тогда	
	КоллекцияОбъектов.Добавить().Роль = "ТТГ";
	
КонецЕсли;</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>17</Код>
								<Наименование>--&gt; Роль</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Роль" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_РолиКонтрагентов"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Роль;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа>
							<Код>29</Код>
							<Наименование>--&gt; МенеджерыПокупателя</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="МенеджерыПокупателя" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Выполнить(Алгоритмы.ПереносМенеджеровОбъектов);</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>32</Код>
								<Наименование>--&gt; МенеджерПокупателя</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="МенеджерПокупателя" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>30</Код>
								<Наименование>--&gt; ДатаНачала</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаНачала" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>--&gt; ДатаОкончания</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаОкончания" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>33</Код>
								<Наименование>--&gt; ВидВзаиморасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ВидыВзаиморасчетов"/>
								<КодПравилаКонвертации>ВидыВзаиморасчетов_НаправленияДеятельности        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>34</Код>
								<Наименование>--&gt; Роль</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Роль" Вид="Реквизит" Тип="СправочникСсылка.РолиКонтактныхЛиц"/>
								<КодПравилаКонвертации>РолиКонтактныхЛиц                                 </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>35</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Справочники.СтруктураПредприятия.ПолучитьОрганизациюПоПодразделению(ОбъектКоллекции.Подразделение);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>36</Код>
								<Наименование>--&gt; Основной</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основной" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа>
							<Код>23</Код>
							<Наименование>--&gt; Согласование</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Согласование" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Выполнить(Алгоритмы.ПереносИсторииСогласования);</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; Авто</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Авто" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>--&gt; Статус</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_СтатусыКонтрагентов"/>
								<КодПравилаКонвертации>СтатусыСогласования                               </КодПравилаКонвертации>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>38</Код>
							<Наименование>--&gt; УникальныйНомерКонтрагента</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="УникальныйНомерКонтрагента" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	вогIDCards.Код КАК Код
|ИЗ
|	РегистрСведений.вогIDCards КАК вогIDCards
|ГДЕ
|	вогIDCards.ОбъектСвязи = &amp;ТорговаяТочкаСсылка    
|	И (вогIDCards.Партнер = ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка)
|		ИЛИ вогIDCards.Партнер = &amp;ПартнерСсылка)";

Запрос.УстановитьПараметр("ТорговаяТочкаСсылка", 	Источник.Ссылка);
Запрос.УстановитьПараметр("ПартнерСсылка", 			Источник.Партнер);

Выборка = Запрос.Выполнить().Выбрать();

Если Выборка.Следующий() Тогда
	Значение = Строка(Выборка.Код);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>--&gt; ДоступныЛогистическиеПараметры</Наименование>
							<Порядок>1400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ДоступныЛогистическиеПараметры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
|	CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора
|ИЗ
|	РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
|		ПО CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора = CRM_ЗначенияКлассификаторов.Ссылка
|ГДЕ
|	CRM_ОбъектыЗначенийКлассификаторов.Объект = &amp;Объект
|	И (CRM_ЗначенияКлассификаторов.Владелец.Наименование = ""Логистические параметры""
|		ИЛИ CRM_ЗначенияКлассификаторов.Владелец.Наименование = ""Тип тарификации"")";

Запрос.УстановитьПараметр("Объект", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

Значение = Не РезультатЗапроса.Пустой();</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; КодГруппы</Наименование>
							<Порядок>1450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодГруппы</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>
Если Не ЗначениеЗаполнено(Источник.Партнер) Тогда
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ВЫРАЗИТЬ(вогТорговыеТочкиПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация
	|ПОМЕСТИТЬ ВТ_Организации
	|ИЗ
	|	Справочник.вогТорговыеТочки.Подразделения КАК вогТорговыеТочкиПодразделения
	|ГДЕ
	|	ВЫРАЗИТЬ(вогТорговыеТочкиПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).ОбособленноеПодразделение = ИСТИНА
	|	И вогТорговыеТочкиПодразделения.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	МАКСИМУМ(ВТ_Организации.Организация) КАК Организация,
	|	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВТ_Организации.Организация) КАК КоличествоВсего
	|ПОМЕСТИТЬ ВТ_КоличествоОрганизаций
	|ИЗ
	|	ВТ_Организации КАК ВТ_Организации
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВЫБОР
	|		КОГДА ВТ_КоличествоОрганизаций.КоличествоВсего &gt; 1
	//""Федеральные покупатели""
	|			ТОГДА ""000000014"" 
	|		КОГДА ВТ_КоличествоОрганизаций.КоличествоВсего = 1
	|			ТОГДА ВЫБОР
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ТК ВОГ""
	//""ВГ_Покупатели товаров""
	|						ТОГДА ""000000011"" 
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""Декор-К""
	//""ДК_Покупатели товаров""
	|						ТОГДА ""ЮЛ002560""   
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Кубань""
	//""КБ_Покупатели товаров""
	|						ТОГДА ""000000007"" 
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Керамика""
	//""КР_Покупатели товаров""
	|						ТОГДА ""000000006"" 
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Сибирь""
	//""СБ_Покупатели товаров""
	|						ТОГДА ""000000005"" 
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Самара""
	//""СМ_Покупатели товаров""
	|						ТОГДА ""000000010"" 
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Урал""
	//""УР_Покупатели товаров""
	|						ТОГДА ""000000012"" 
	|					КОГДА ВЫРАЗИТЬ(ВТ_КоличествоОрганизаций.Организация КАК Справочник.Организации).Наименование = ""ВОГ Юг""
	//""ЮГ_Покупатели товаров""
	|						ТОГДА ""000000013"" 
	|				КОНЕЦ
	|	КОНЕЦ КАК Код
	|ИЗ
	|	ВТ_КоличествоОрганизаций КАК ВТ_КоличествоОрганизаций";
	
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Выборка = РезультатЗапроса.Выбрать();
	
	Пока Выборка.Следующий() Цикл
		Значение = Выборка.Код;
	КонецЦикла;
	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; Организации</Наименование>
							<Порядок>1500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>Организации</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ВЫРАЗИТЬ(СтруктураПредприятия.Организация КАК Справочник.Организации).Наименование КАК Организация
|ИЗ
|	Справочник.вогТорговыеТочки.Подразделения КАК вогТорговыеТочкиПодразделения
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.СтруктураПредприятия КАК СтруктураПредприятия
|		ПО вогТорговыеТочкиПодразделения.Подразделение = СтруктураПредприятия.Ссылка
|			И (СтруктураПредприятия.ОбособленноеПодразделение = ИСТИНА)
|			И (вогТорговыеТочкиПодразделения.Ссылка = &amp;Ссылка)";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

Значение = ЗначениеВСтрокуВнутр(РезультатЗапроса.Выгрузить());</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>--&gt; ОрганизационноПравоваяФорма</Наименование>
							<Порядок>1550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ОрганизационноПравоваяФорма" Вид="Реквизит" Тип="СправочникСсылка.ВГ_ОрганизационноПравовыеФормы"/>
							<КодПравилаКонвертации>ОрганизационноПравовыеФормы                       </КодПравилаКонвертации>
							<ПередВыгрузкой>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ОрганизационноПравоваяФорма КАК ЮридическоеЛицоОрганизационноПравоваяФорма
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.ЮридическоеЛицоОрганизационноПравоваяФорма;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>--&gt; ЮрФизЛицо</Наименование>
							<Порядок>1600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<ПередВыгрузкой>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	вогОрганизационноПравовыеФормы.ЮрФизЛицо КАК ЮрФизЛицо
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.вогОрганизационноПравовыеФормы КАК вогОрганизационноПравовыеФормы
|		ПО (ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ОрганизационноПравоваяФорма = вогОрганизационноПравовыеФормы.Ссылка)
|			И (вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи)";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.ЮрФизЛицо;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>44</Код>
							<Наименование>Вид --&gt; ФорматТТ</Наименование>
							<Порядок>1650</Порядок>
							<Источник Имя="Вид" Вид="Реквизит" Тип="СправочникСсылка.вогВидыТорговыхТочек"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ФорматТТ</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = "";

Если Источник.Вид = Справочники.вогВидыТорговыхТочек.Дизайнер Тогда
	Значение = "000000009";
ИначеЕсли Источник.Вид = Справочники.вогВидыТорговыхТочек.ИнтернетМагазин Тогда
	Значение = "000000008";
ИначеЕсли Источник.Вид = Справочники.вогВидыТорговыхТочек.РазовыйПокупатель Тогда
	Значение = "000000010";
ИначеЕсли Источник.Вид = Справочники.вогВидыТорговыхТочек.Строитель Тогда
	Значение = "000000004";
ИначеЕсли Источник.Вид = Справочники.вогВидыТорговыхТочек.Дистрибьютор Тогда
	Значение = "000000006";
Иначе
	Отказ = Истина;
КонецЕсли;
</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>45</Код>
							<Наименование>--&gt; ИП</Наименование>
							<Порядок>1700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИП" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;

Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	вогОрганизационноПравовыеФормы.ЮрФизЛицо КАК ЮрФизЛицо
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.вогОрганизационноПравовыеФормы КАК вогОрганизационноПравовыеФормы
|		ПО (ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ОрганизационноПравоваяФорма = вогОрганизационноПравовыеФормы.Ссылка)
|			И (вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи)";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	
	Если ВыборкаДетальныеЗаписи.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ИндивидуальныйПредприниматель Тогда
		Значение = Истина;
	КонецЕсли;
	
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>48</Код>
							<Наименование>--&gt; Дистрибьютор</Наименование>
							<Порядок>1800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>Дистрибьютор</ИмяПараметраДляПередачи>
							<ПриВыгрузке>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	вогСвязиТТСТТДистрибутором.ТорговаяТочка КАК ТорговаяТочка
|ИЗ
|	РегистрСведений.вогСвязиТТСТТДистрибутором КАК вогСвязиТТСТТДистрибутором
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.вогТорговыеТочки КАК вогТорговыеТочки
|		ПО вогСвязиТТСТТДистрибутором.ТорговаяТочка = вогТорговыеТочки.Ссылка
|			И (вогСвязиТТСТТДистрибутором.ТорговаяТочка = &amp;Ссылка)
|			И (вогТорговыеТочки.Вид = &amp;Вид)";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
Запрос.УстановитьПараметр("Вид", 	Справочники.вогВидыТорговыхТочек.ТРТД);

РезультатЗапроса = Запрос.Выполнить();

Значение = Не РезультатЗапроса.Пустой();</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>49</Код>
							<Наименование>--&gt; ИспользованиеЗапрещено</Наименование>
							<Порядок>1850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИспользованиеЗапрещено" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>ОписаниеСтатуса = вогОбщегоНазначения.ПолучитьОписаниеСтатусаСогласованияОбъекта(Источник.Ссылка);
Если ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Заблокирован Тогда
	Значение = Истина;
Иначе
	НеЗамещать = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>ЮридическиеЛица_Контрагенты</Код>
					<Наименование>Справочник: Юридические лица</Наименование>
					<Порядок>200</Порядок>
					<ПослеВыгрузки>Выполнить(Алгоритмы.ВыгрузкаГоловныхКонтрагентов);
Выполнить(Алгоритмы.ВыгрузкаКонтактнойИнформации);
Выполнить(Алгоритмы.ВыгрузкаЮрРеквизитов);
Выполнить(Алгоритмы.ВыгрузкаСвязейКонтактныхЛиц);
Выполнить(Алгоритмы.ПереносДоговоровЮрЛиц22012020);
Выполнить(Алгоритмы.ПереносБанкСчетовЮрЛиц);

</ПослеВыгрузки>
					<ПослеЗагрузки>
ЕстьИзменения = Ложь;

// ++ Обязательно до записи объекта
Выполнить(Алгоритмы.ЗаполнитьМенеджеров);
Выполнить(Алгоритмы.ЗаполнитьСтатусыСогласования);
// -- Обязательно до записи объекта

Если Не ОбъектНайден Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ПараметрКод = ПараметрыОбъекта.Получить("КодCRM");
		
		Если ПараметрКод &lt;&gt; Неопределено Тогда
			Объект.Код = ПараметрКод;
		КонецЕсли;			
		
	КонецЕсли;
	
	ЕстьИзменения = Истина;	
	
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьОрганизации);
//Выполнить(Алгоритмы.ДобавитьОрганизациюТранзит);

Если ЕстьИзменения Тогда
	Объект.ОбменДанными.Загрузка = Истина;
	Объект.Записать();	
КонецЕсли;

Выполнить(Алгоритмы.ИзменитьМенеджераВДоговорах);

//Категория = Справочники.КатегорииОбъектов.ПокупательТоваров;
//Выполнить(Алгоритмы.УстановитьКатегориюОбъекта);
Параметры.ОбъектыДляУстановкиКатегории.Добавить(Объект.Ссылка);
Параметры.ОбъектыДляФормированияТипаЦен.Добавить(Объект.Ссылка);

//Выполнить(Алгоритмы.ЗаполнитьКредитныеУсловия);</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.вогЮридическиеЛица</Источник>
					<Приемник>СправочникСсылка.Контрагенты</Приемник>
					<Свойства>
						<Свойство>
							<Код>1</Код>
							<Наименование>Код --&gt; КодCRM</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодCRM</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Код = Источник.Код;

Если СтрНачинаетсяС(Код, "CRM")
	И СтрДлина(Код) = 11 Тогда
	
	Префикс = Сред(Код, 1, 4);
	
	Номер = Прав(Сред(Код, 5), 5);
	
	Код = Префикс + Номер;
	
КонецЕсли;

Значение = Код;</ПередВыгрузкой>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>4</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ОрганизационноПравоваяФорма --&gt; ОрганизационноПравоваяФорма</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="ОрганизационноПравоваяФорма" Вид="Реквизит" Тип="СправочникСсылка.вогОрганизационноПравовыеФормы"/>
							<Приемник Имя="ОрганизационноПравоваяФорма" Вид="Реквизит" Тип="СправочникСсылка.ВГ_ОрганизационноПравовыеФормы"/>
							<КодПравилаКонвертации>ОрганизационноПравовыеФормы                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>7</Код>
							<Наименование>CRM_ИНН --&gt; ИНН</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="CRM_ИНН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>8</Код>
							<Наименование>CRM_КПП --&gt; КПП</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="CRM_КПП" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>CRM_ОГРН --&gt; ОГРНИП</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="CRM_ОГРН" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ОГРНИП" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
							<Порядок>455</Порядок>
							<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>ГоловноеЮрЛицо --&gt; ГоловнойКонтрагент</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="ГоловноеЮрЛицо" Вид="Реквизит" Тип="СправочникСсылка.вогЮридическиеЛица"/>
							<Приемник Имя="ГоловнойКонтрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>ЮридическиеЛица_Контрагенты                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Комментарий --&gt; Комментарий</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>Партнер --&gt; Родитель</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Партнеры_Контрагенты                              </КодПравилаКонвертации>
							<ПередВыгрузкой>//Запрос = Новый Запрос;
//Запрос.Текст = 
//"ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
//|	вогСвязиЮридическихЛиц.ОбъектСвязи КАК ОбъектСвязи
//|ИЗ
//|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
//|ГДЕ
//|	вогСвязиЮридическихЛиц.ЮридическоеЛицо = &amp;Ссылка
//|	И вогСвязиЮридическихЛиц.ОбъектСвязи ССЫЛКА Справочник.вогРаспределительныеЦентры";
//
//Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
//
//РезультатЗапроса = Запрос.Выполнить();
//
//Если Не РезультатЗапроса.Пустой() Тогда
//	
//	Значение = "";
//	ИмяПКО = "";
//	
//КонецЕсли;
</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Партнер --&gt; ГруппаДляХолдинга</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
							<Приемник Имя="ГруппаДляХолдинга" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Партнеры_Контрагенты                              </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; Направление</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Направление" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_Направления"/>
							<ПередВыгрузкой>Значение = "Внешнее";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; Статус</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_СтатусыКонтрагентов"/>
							<ПередВыгрузкой>ОписаниеСтатуса = вогОбщегоНазначения.ПолучитьОписаниеСтатусаСогласованияОбъекта(Источник.Ссылка);
Если ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Согласован Тогда
	Значение = "Согласован";	
КонецЕсли;

Если ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Заблокирован Тогда
	Значение = "Согласован";	
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; Покупатель</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Покупатель" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; РольПлательщик</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РольПлательщик" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>СвидетельствоНомер --&gt; НомерСвидетельства</Наименование>
							<Порядок>855</Порядок>
							<Источник Имя="СвидетельствоНомер" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерСвидетельства" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>СвидетельствоСерия --&gt; СерияСвидетельства</Наименование>
							<Порядок>860</Порядок>
							<Источник Имя="СвидетельствоСерия" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="СерияСвидетельства" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Группа Отключить="true">
							<Код>12</Код>
							<Наименование>--&gt; Организации</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Организации" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ВЫРАЗИТЬ(вогЮридическиеЛицаПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация
|ИЗ
|	Справочник.вогЮридическиеЛица.Подразделения КАК вогЮридическиеЛицаПодразделения
|ГДЕ
|	вогЮридическиеЛицаПодразделения.Ссылка = &amp;Ссылка
|	И ВЫРАЗИТЬ(вогЮридическиеЛицаПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).ОбособленноеПодразделение = ИСТИНА";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

КоллекцияОбъектов = РезультатЗапроса.Выгрузить();</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>13</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Организация;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа>
							<Код>14</Код>
							<Наименование>--&gt; РолиКонтрагента</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РолиКонтрагента" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Роль");

КоллекцияОбъектов.Добавить().Роль = "Плательщик";</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; Роль</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Роль" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_РолиКонтрагентов"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Роль;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа>
							<Код>26</Код>
							<Наименование>--&gt; МенеджерыПокупателя</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="МенеджерыПокупателя" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Выполнить(Алгоритмы.ПереносМенеджеровОбъектов);</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>30</Код>
								<Наименование>--&gt; МенеджерПокупателя</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="МенеджерПокупателя" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; ДатаНачала</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаНачала" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>--&gt; ДатаОкончания</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаОкончания" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>27</Код>
								<Наименование>--&gt; ВидВзаиморасчетов</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ВидыВзаиморасчетов"/>
								<КодПравилаКонвертации>ВидыВзаиморасчетов_НаправленияДеятельности        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>32</Код>
								<Наименование>--&gt; Роль</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Роль" Вид="Реквизит" Тип="СправочникСсылка.РолиКонтактныхЛиц"/>
								<КодПравилаКонвертации>РолиКонтактныхЛиц                                 </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>31</Код>
								<Наименование>--&gt; Основной</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основной" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>39</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
						</Группа>
						<Группа>
							<Код>21</Код>
							<Наименование>--&gt; Согласование</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Согласование" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Выполнить(Алгоритмы.ПереносИсторииСогласования);</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>22</Код>
								<Наименование>--&gt; Авто</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Авто" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; Статус</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_СтатусыКонтрагентов"/>
								<КодПравилаКонвертации>СтатусыСогласования                               </КодПравилаКонвертации>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>36</Код>
							<Наименование>--&gt; ЮрФизЛицо</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ОрганизационноПравоваяФорма) Тогда
	Значение = Источник.ОрганизационноПравоваяФорма.ЮрФизЛицо
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>--&gt; ИП</Наименование>
							<Порядок>1150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИП" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>
Значение = Ложь;

Если ЗначениеЗаполнено(Источник.ОрганизационноПравоваяФорма) Тогда
	Если Источник.ОрганизационноПравоваяФорма.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ИндивидуальныйПредприниматель Тогда
		Значение = Истина;
	КонецЕсли;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>38</Код>
							<Наименование>ОсновнойБанковскийСчет --&gt; ОсновнойБанковскийСчет</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
							<Приемник Имя="ОсновнойБанковскийСчет" Вид="Реквизит" Тип="СправочникСсылка.БанковскиеСчета"/>
							<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>--&gt; Организации</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>Организации</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ВЫРАЗИТЬ(вогЮридическиеЛицаПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).Организация.Наименование КАК Организация
|ИЗ
|	Справочник.вогЮридическиеЛица.Подразделения КАК вогЮридическиеЛицаПодразделения
|ГДЕ
|	вогЮридическиеЛицаПодразделения.Ссылка = &amp;Ссылка
|	И ВЫРАЗИТЬ(вогЮридическиеЛицаПодразделения.Подразделение КАК Справочник.СтруктураПредприятия).ОбособленноеПодразделение = ИСТИНА";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

Значение = ЗначениеВСтрокуВнутр(РезультатЗапроса.Выгрузить());</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; ВыгружатьКредитныеУсловия</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ВыгружатьКредитныеУсловия</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>
// Тищенко В.В.
// Запись в РС - Ограничение вне сегмента по умолчанию
Запрос = Новый Запрос("ВЫБРАТЬ
|	вогСвязиЮридическихЛиц.ОбъектСвязи КАК ОбъектСвязи,
|	вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК ЮридическоеЛицо
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи.Вид = ЗНАЧЕНИЕ(Справочник.вогВидыТорговыхТочек.РазовыйПокупатель)
|	И вогСвязиЮридическихЛиц.ЮридическоеЛицо = &amp;ЮридическоеЛицо");
Запрос.УстановитьПараметр("ЮридическоеЛицо",Источник);
РезультатЗапроса 	= Запрос.Выполнить();
Значение  			= НЕ РезультатЗапроса.Пустой();

</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>42</Код>
							<Наименование>--&gt; ОсновноеКонтактноеЛицо</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ОсновноеКонтактноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.КонтактныеЛицаКонтрагентов"/>
							<КодПравилаКонвертации>КонтактныеЛицаКонтрагентов                        </КодПравилаКонвертации>
							<ПередВыгрузкой>Запрос = Новый Запрос("ВЫБРАТЬ
                      |	вогСвязиКонтактныхЛицСрезПоследних.КонтактноеЛицо КАК КонтактноеЛицо,
                      |	вогСвязиКонтактныхЛицСрезПоследних.ОбъектСвязи КАК Владелец,
                      |	вогСвязиКонтактныхЛицСрезПоследних.CRM_Должность КАК Должность,
                      |	вогСвязиКонтактныхЛицСрезПоследних.CRM_РольКонтактногоЛица КАК РольКонтактногоЛица,
                      |	вогСвязиКонтактныхЛицСрезПоследних.CRM_Состояние КАК Состояние,
                      |	вогСвязиКонтактныхЛицСрезПоследних.Период КАК ДатаИзмененияСостояния
                      |ИЗ
                      |	РегистрСведений.вогСвязиКонтактныхЛиц.СрезПоследних КАК вогСвязиКонтактныхЛицСрезПоследних
                      |ГДЕ
                      |	вогСвязиКонтактныхЛицСрезПоследних.ОбъектСвязи = &amp;ЮридическоеЛицо
                      |	И вогСвязиКонтактныхЛицСрезПоследних.ОсновноеКонтактноеЛицо = ИСТИНА");
Запрос.УстановитьПараметр("ЮридическоеЛицо",Источник);
Выборка = Запрос.Выполнить().Выбрать();
Если Выборка.Следующий() тогда
	ИсходящиеДанные = Новый Структура("Владелец,КонтактноеЛицо,Должность,РольКонтактногоЛица,Состояние,ДатаИзмененияСостояния");
	ЗаполнитьЗначенияСвойств(ИсходящиеДанные,Выборка);
	Значение = ИсходящиеДанные;
Иначе
	НеЗамещать = Истина;
КонецЕсли;
</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>43</Код>
							<Наименование>--&gt; ИспользованиеЗапрещено</Наименование>
							<Порядок>1400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИспользованиеЗапрещено" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>ОписаниеСтатуса = вогОбщегоНазначения.ПолучитьОписаниеСтатусаСогласованияОбъекта(Источник.Ссылка);
Если ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Заблокирован Тогда
	Значение = Истина;
Иначе
	НеЗамещать = Истина;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>РынкиТЦ_РынкиОМ</Код>
					<Наименование>Справочник: Рынки (ТЦ)</Наименование>
					<Порядок>250</Порядок>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.вогРынки</Источник>
					<Приемник>СправочникСсылка.ВГ_РынкиОтделочныхМатериалов</Приемник>
					<Свойства>
						<Свойство Поиск="true">
							<Код>1</Код>
							<Наименование>Код --&gt; Код</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<ПриводитьКДлине>9</ПриводитьКДлине>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>2</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>--&gt; Адрес</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Адрес" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = УправлениеКонтактнойИнформацией.КонтактнаяИнформацияОбъекта(Источник.Ссылка, Справочники.ВидыКонтактнойИнформации.АдресРынка);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>--&gt; Сайт</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сайт" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Значение = УправлениеКонтактнойИнформацией.КонтактнаяИнформацияОбъекта(Источник.Ссылка, Справочники.ВидыКонтактнойИнформации.ВебСтраницаРынка);</ПередВыгрузкой>
						</Свойство>
					</Свойства>
					<Значения/>
				</Правило>
				<Правило>
					<Код>РаспределительныеЦентры_Контрагенты</Код>
					<Наименование>Справочник: Распределительные центры</Наименование>
					<Порядок>300</Порядок>
					<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
|	СтатусыСогласованияОбъектовСрезПоследних.Статус КАК Статус
|ИЗ
|	РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних(
|			,
|			Объект = &amp;Ссылка
|				И Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыСогласования.Согласован)) КАК СтатусыСогласованияОбъектовСрезПоследних
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСвязиРаспределительныхЦентров КАК вогСвязиРаспределительныхЦентров
|		ПО СтатусыСогласованияОбъектовСрезПоследних.Объект = вогСвязиРаспределительныхЦентров.РаспределительныйЦентр
|			И (вогСвязиРаспределительныхЦентров.ОбъектСвязи ССЫЛКА Справочник.вогТорговыеТочки)";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

Отказ = РезультатЗапроса.Пустой();</ПередВыгрузкой>
					<ПослеВыгрузки>Выполнить(Алгоритмы.ВыгрузкаКонтактнойИнформации);
Выполнить(Алгоритмы.ФормированиеЗначенийСвойств);
//Выполнить(Алгоритмы.ВыгрузкаСвязейКонтактныхЛиц);
</ПослеВыгрузки>
					<ПослеЗагрузки>
ЕстьИзменения = Ложь;

// ++ Обязательно до записи объекта
//Выполнить(Алгоритмы.ЗаполнитьМенеджеров);
Выполнить(Алгоритмы.ЗаполнитьСтатусыСогласования);
// -- Обязательно до записи объекта

//Родитель = Справочники.Контрагенты.НайтиПоНаименованию("Распределительные центры");
//
//Если Родитель &lt;&gt; Справочники.Контрагенты.ПустаяСсылка() Тогда
//	Объект.Родитель = Родитель;
//	ЕстьИзменения = Истина;
//КонецЕсли;

Если Не ОбъектНайден Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ПараметрКод = ПараметрыОбъекта.Получить("КодCRM");
		
		Если ПараметрКод &lt;&gt; Неопределено Тогда
			Объект.Код = ПараметрКод;
		КонецЕсли;			
		
	КонецЕсли;
	
	НоваяРоль = Объект.РолиКонтрагента.Добавить();
	НоваяРоль.Роль = Перечисления.ВГ_РолиКонтрагентов.РЦ;
	
	ЕстьИзменения = Истина;
	
Иначе
	
	Объект.ГруппаДляХолдинга = Объект.Ссылка.ГруппаДляХолдинга;
	Объект.Родитель = Объект.Ссылка.Родитель;
	
КонецЕсли;

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	Если ПараметрыОбъекта.Получить("ДоступныЛогистическиеПараметры") = Истина Тогда
		//Выполнить(Алгоритмы.ЗаполнениеУсловийДоставки);			
	КонецЕсли;
КонецЕсли;

Выполнить(Алгоритмы.ЗаполнитьОрганизации);
//Выполнить(Алгоритмы.ДобавитьОрганизациюТранзит);

Если ЕстьИзменения Тогда
	Объект.ОбменДанными.Загрузка = Истина;
	Объект.Записать();	
КонецЕсли;

//МенеджерРС 	= РегистрыСведений.КатегорииОбъектов.СоздатьМенеджерЗаписи();
//МенеджерРС.Объект 		= Объект.Ссылка;
//МенеджерРС.Категория 	= Справочники.КатегорииОбъектов.ПокупательТоваров;

//МенеджерРС.Записать(Ложь);
Параметры.ОбъектыДляУстановкиКатегории.Добавить(Объект.Ссылка);
</ПослеЗагрузки>
					<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
					<Источник>СправочникСсылка.вогРаспределительныеЦентры</Источник>
					<Приемник>СправочникСсылка.Контрагенты</Приемник>
					<Свойства>
						<Свойство>
							<Код>2</Код>
							<Наименование>Код --&gt; КодCRM</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>КодCRM</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Код = Источник.Код;

Если СтрНачинаетсяС(Код, "CRM")
	И СтрДлина(Код) = 11 Тогда
	
	Префикс = Сред(Код, 1, 4);
	
	Номер = Прав(Сред(Код, 5), 5);
	
	Код = Префикс + Номер;
	
КонецЕсли;

Значение = Код;</ПередВыгрузкой>
						</Свойство>
						<Свойство Поиск="true" Обязательное="true">
							<Код>3</Код>
							<Наименование>--&gt; ЭтоГруппа</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						</Свойство>
						<Свойство>
							<Код>1</Код>
							<Наименование>Наименование --&gt; Наименование</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>Город --&gt; Город</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Город" Вид="Реквизит" Тип="СправочникСсылка.вогГорода"/>
							<Приемник Имя="Город" Вид="Реквизит" Тип="СправочникСсылка.ВГ_Города"/>
							<КодПравилаКонвертации>вогГорода                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>6</Код>
							<Наименование>Регион --&gt; Регион</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="Регион" Вид="Реквизит" Тип="СправочникСсылка.вогРегионы"/>
							<Приемник Имя="Регион" Вид="Реквизит" Тип="СправочникСсылка.Регионы"/>
							<КодПравилаКонвертации>вогРегионы                                        </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>46</Код>
							<Наименование>Район --&gt; Район</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="Район" Вид="Реквизит" Тип="СправочникСсылка.вогРайоны"/>
							<Приемник Имя="Район" Вид="Реквизит" Тип="СправочникСсылка.ВГ_Районы"/>
							<КодПравилаКонвертации>вогРайоны                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; Родитель</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Партнеры_Контрагенты                              </КодПравилаКонвертации>
							<ПриВыгрузке>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиРаспределительныхЦентров.ОбъектСвязи КАК Справочник.вогТорговыеТочки).Партнер КАК Партнер
|ИЗ
|	РегистрСведений.вогСвязиРаспределительныхЦентров КАК вогСвязиРаспределительныхЦентров
|ГДЕ
|	вогСвязиРаспределительныхЦентров.РаспределительныйЦентр = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиРаспределительныхЦентров.ОбъектСвязи КАК Справочник.вогТорговыеТочки).Партнер &lt;&gt; ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка)";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.Партнер;
КонецЦикла;</ПриВыгрузке>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>--&gt; РольРЦ</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РольРЦ" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; Покупатель</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Покупатель" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; ТипКонтрагента</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ТипКонтрагента" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_ТипыКонтрагентов"/>
							<ПередВыгрузкой>Значение = "РЦ";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; ДоступныЛогистическиеПараметры</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ДоступныЛогистическиеПараметры</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
|	CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора
|ИЗ
|	РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
|		ПО CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора = CRM_ЗначенияКлассификаторов.Ссылка
|ГДЕ
|	CRM_ОбъектыЗначенийКлассификаторов.Объект = &amp;Объект
|	И (CRM_ЗначенияКлассификаторов.Владелец.Наименование = ""Логистические параметры""
|		ИЛИ CRM_ЗначенияКлассификаторов.Владелец.Наименование = ""Тип тарификации"")";

Запрос.УстановитьПараметр("Объект", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

Значение = Не РезультатЗапроса.Пустой();</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Направление</Наименование>
							<Порядок>700</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Направление" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_Направления"/>
							<ПередВыгрузкой>Значение = "Внешнее";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; ГруппаДляХолдинга</Наименование>
							<Порядок>750</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ГруппаДляХолдинга" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Партнеры_Контрагенты                              </КодПравилаКонвертации>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).Партнер КАК Партнер,
|	1 КАК Приоритет
|ПОМЕСТИТЬ ВТ_Партнеры
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).Партнер &lt;&gt; ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиРаспределительныхЦентров.ОбъектСвязи КАК Справочник.вогТорговыеТочки).Партнер,
|	2
|ИЗ
|	РегистрСведений.вогСвязиРаспределительныхЦентров КАК вогСвязиРаспределительныхЦентров
|ГДЕ
|	вогСвязиРаспределительныхЦентров.РаспределительныйЦентр = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиРаспределительныхЦентров.ОбъектСвязи КАК Справочник.вогТорговыеТочки).Партнер &lt;&gt; ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ ПЕРВЫЕ 1
|	ВТ_Партнеры.Партнер КАК Партнер
|ИЗ
|	ВТ_Партнеры КАК ВТ_Партнеры
|
|УПОРЯДОЧИТЬ ПО
|	ВТ_Партнеры.Приоритет";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.Партнер;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; УникальныйНомерКонтрагента</Наименование>
							<Порядок>800</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="УникальныйНомерКонтрагента" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	вогIDCards.Код КАК Код
|ИЗ
|	РегистрСведений.вогIDCards КАК вогIDCards
|ГДЕ
|	вогIDCards.ОбъектСвязи = &amp;ОбъектСсылка    
|	И вогIDCards.Партнер = ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка)";

Запрос.УстановитьПараметр("ОбъектСсылка", Источник.Ссылка);

Выборка = Запрос.Выполнить().Выбрать();

Если Выборка.Следующий() Тогда
	Значение = Строка(Выборка.Код);
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; Статус</Наименование>
							<Порядок>850</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_СтатусыКонтрагентов"/>
							<КодПравилаКонвертации>СтатусыСогласования                               </КодПравилаКонвертации>
							<ПередВыгрузкой>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ РАЗРЕШЕННЫЕ
|	СтатусыСогласованияОбъектовСрезПоследних.Статус
|ИЗ
|	РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних(, Объект = &amp;Объект) КАК СтатусыСогласованияОбъектовСрезПоследних";

Запрос.УстановитьПараметр("Объект", Источник.Ссылка);

Выборка = Запрос.Выполнить().Выбрать();

Если Выборка.Следующий() 
	И Выборка.Статус = Перечисления.вогСтатусыСогласования.Согласован Тогда
	Значение = Выборка.Статус;
КонецЕсли</ПередВыгрузкой>
						</Свойство>
						<Группа Отключить="true">
							<Код>7</Код>
							<Наименование>--&gt; Организации</Наименование>
							<Порядок>900</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Организации" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>
Выполнить(Алгоритмы.ПереносОрганизацийРЦ);

</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>8</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>10</Код>
							<Наименование>--&gt; РолиКонтрагента</Наименование>
							<Порядок>950</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="РолиКонтрагента" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>КоллекцияОбъектов = Новый ТаблицаЗначений;
КоллекцияОбъектов.Колонки.Добавить("Роль");

Если ТипЗнч(Источник) = Тип("СправочникСсылка.вогРаспределительныеЦентры") Или
	ТипЗнч(Источник) = Тип("СправочникОбъект.вогРаспределительныеЦентры") Тогда
	
	КоллекцияОбъектов.Добавить().Роль = "РЦ";
	
КонецЕсли;</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>11</Код>
								<Наименование>--&gt; Роль</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Роль" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_РолиКонтрагентов"/>
								<ПередВыгрузкой>Значение = ОбъектКоллекции.Роль;</ПередВыгрузкой>
							</Свойство>
						</Группа>
						<Группа Отключить="true">
							<Код>12</Код>
							<Наименование>--&gt; МенеджерыПокупателя</Наименование>
							<Порядок>1000</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="МенеджерыПокупателя" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Выполнить(Алгоритмы.ПереносМенеджеровОбъектов);</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>13</Код>
								<Наименование>--&gt; ВидВзаиморасчетов</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ВидыВзаиморасчетов"/>
								<КодПравилаКонвертации>ВидыВзаиморасчетов_НаправленияДеятельности        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; ДатаНачала</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаНачала" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; ДатаОкончания</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаОкончания" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>--&gt; МенеджерПокупателя</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="МенеджерПокупателя" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
								<ПередВыгрузкой>Значение = Справочники.СтруктураПредприятия.ПолучитьОрганизациюПоПодразделению(ОбъектКоллекции.Подразделение);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>18</Код>
								<Наименование>--&gt; Основной</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Основной" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>19</Код>
								<Наименование>--&gt; Роль</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Роль" Вид="Реквизит" Тип="СправочникСсылка.РолиКонтактныхЛиц"/>
								<КодПравилаКонвертации>РолиКонтактныхЛиц                                 </КодПравилаКонвертации>
							</Свойство>
						</Группа>
						<Свойство>
							<Код>33</Код>
							<Наименование>--&gt; Организации</Наименование>
							<Порядок>1050</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>Организации</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ВЫРАЗИТЬ(СтруктураПредприятия.Организация КАК Справочник.Организации).Наименование КАК Организация
|ИЗ
|	Справочник.вогРаспределительныеЦентры.Подразделения КАК вогРаспределительныеЦентрыПодразделения
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.СтруктураПредприятия КАК СтруктураПредприятия
|		ПО вогРаспределительныеЦентрыПодразделения.Подразделение = СтруктураПредприятия.Ссылка
|			И (СтруктураПредприятия.ОбособленноеПодразделение = ИСТИНА)
|			И (вогРаспределительныеЦентрыПодразделения.Ссылка = &amp;Ссылка)";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

Значение = ЗначениеВСтрокуВнутр(РезультатЗапроса.Выгрузить());</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>--&gt; ЮрФизЛицо</Наименование>
							<Порядок>1100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЮрФизЛицо" Вид="Реквизит" Тип="ПеречислениеСсылка.ЮрФизЛицо"/>
							<КодПравилаКонвертации>ЮрФизЛицо                                         </КодПравилаКонвертации>
							<ПередВыгрузкой>
//Запрос = Новый Запрос;
//Запрос.Текст = 
//"ВЫБРАТЬ ПЕРВЫЕ 1
//|	вогОрганизационноПравовыеФормы.ЮрФизЛицо КАК ЮрФизЛицо
//|ИЗ
//|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
//|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.вогОрганизационноПравовыеФормы КАК вогОрганизационноПравовыеФормы
//|		ПО (ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ОрганизационноПравоваяФорма = вогОрганизационноПравовыеФормы.Ссылка)
//|			И (вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи)
//|			И (вогОрганизационноПравовыеФормы.ЮрФизЛицо &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ЮрФизЛицо.ПустаяСсылка))";
//
//Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);
//
//РезультатЗапроса = Запрос.Выполнить();
//
//ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
//
//Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
//	Значение = ВыборкаДетальныеЗаписи.ЮрФизЛицо;
//КонецЦикла;

// ++ VOG Солодов В.В. 20.06.2019 task 377
Значение = Перечисления.ЮрФизЛицо.ЮрЛицо;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>--&gt; ОрганизационноПравоваяФорма</Наименование>
							<Порядок>1150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ОрганизационноПравоваяФорма" Вид="Реквизит" Тип="СправочникСсылка.ВГ_ОрганизационноПравовыеФормы"/>
							<КодПравилаКонвертации>ОрганизационноПравовыеФормы                       </КодПравилаКонвертации>
							<ПередВыгрузкой>

//Запрос = Новый Запрос;
//Запрос.Текст = 
//"ВЫБРАТЬ ПЕРВЫЕ 1
//|	вогОрганизационноПравовыеФормы.Ссылка КАК ОрганизационноПравоваяФорма
//|ИЗ
//|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
//|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.вогОрганизационноПравовыеФормы КАК вогОрганизационноПравовыеФормы
//|		ПО (ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ОрганизационноПравоваяФорма = вогОрганизационноПравовыеФормы.Ссылка)
//|			И (ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ОрганизационноПравоваяФорма &lt;&gt; ЗНАЧЕНИЕ(Справочник.вогОрганизационноПравовыеФормы.ПустаяСсылка))
//|			И (вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи)";

//Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

//РезультатЗапроса = Запрос.Выполнить();

//ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

//Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
//	Значение = ВыборкаДетальныеЗаписи.ОрганизационноПравоваяФорма;
//КонецЦикла;

// ++ VOG Солодов В.В. 20.06.2019 task 377
ОргПравоваяФорма = Справочники.вогОрганизационноПравовыеФормы.НайтиПоНаименованию("ООО", Истина);

Если ОргПравоваяФорма &lt;&gt; Неопределено Тогда
	Значение = ОргПравоваяФорма;
Иначе
	Пусто = Истина;
КонецЕсли;
</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>36</Код>
							<Наименование>--&gt; ИНН</Наименование>
							<Порядок>1200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).CRM_ИНН КАК ИНН
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).CRM_ИНН &lt;&gt; """"";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.ИНН;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>37</Код>
							<Наименование>--&gt; КПП</Наименование>
							<Порядок>1250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).CRM_КПП КАК КПП
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).CRM_КПП &lt;&gt; """"";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.КПП;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>38</Код>
							<Наименование>--&gt; ОГРНИП</Наименование>
							<Порядок>1300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ОГРНИП" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).CRM_ОГРН КАК ОГРНИП
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).CRM_ОГРН &lt;&gt; """"";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.ОГРНИП;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>39</Код>
							<Наименование>--&gt; НомерСвидетельства</Наименование>
							<Порядок>1350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="НомерСвидетельства" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).СвидетельствоНомер КАК НомерСвидетельства
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).СвидетельствоНомер &lt;&gt; """"";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.НомерСвидетельства;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>40</Код>
							<Наименование>--&gt; СерияСвидетельства</Наименование>
							<Порядок>1400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СерияСвидетельства" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).СвидетельствоСерия КАК СерияСвидетельства
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).СвидетельствоСерия &lt;&gt; """"";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.СерияСвидетельства;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>41</Код>
							<Наименование>--&gt; КодПоОКПО</Наименование>
							<Порядок>1450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
							<ПередВыгрузкой>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).КодПоОКПО КАК КодПоОКПО
|ИЗ
|	РегистрСведений.вогСвязиЮридическихЛиц КАК вогСвязиЮридическихЛиц
|ГДЕ
|	вогСвязиЮридическихЛиц.ОбъектСвязи = &amp;ОбъектСвязи
|	И ВЫРАЗИТЬ(вогСвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).КодПоОКПО &lt;&gt; """"";

Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.КодПоОКПО;
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
						<Группа>
							<Код>42</Код>
							<Наименование>--&gt; Согласование</Наименование>
							<Порядок>1500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Согласование" Вид="ТабличнаяЧасть"/>
							<ПередОбработкойВыгрузки>Выполнить(Алгоритмы.ПереносИсторииСогласования);</ПередОбработкойВыгрузки>
							<Свойство>
								<Код>43</Код>
								<Наименование>--&gt; Авто</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Авто" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>44</Код>
								<Наименование>--&gt; Дата</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>45</Код>
								<Наименование>--&gt; Статус</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Статус" Вид="Реквизит" Тип="ПеречислениеСсылка.ВГ_СтатусыКонтрагентов"/>
								<КодПравилаКонвертации>СтатусыСогласования                               </КодПравилаКонвертации>
							</Свойство>
						</Группа>
					</Свойства>
					<Значения/>
				</Правило>
				<Группа>
					<Код>СвязанныеСКонтрагентами</Код>
					<Наименование>СвязанныеСКонтрагентами</Наименование>
					<Порядок>350</Порядок>
					<Правило>
						<Код>ТипыДоговоров</Код>
						<Наименование>Справочник: Типы договоров контрагентов</Наименование>
						<Порядок>50</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<Источник>СправочникСсылка.вогТипыДоговоровКонтрагентов</Источник>
						<Приемник>СправочникСсылка.ВГ_ТипыДоговоров</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Код --&gt; Код</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Если Источник = "000000040" тогда
	Значение = "000000001";
иначе
	Значение = Источник;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения>
							<Значение>
								<Код>1</Код>
								<Наименование>ДоговорПоставкиТовара --&gt; ДоговорПоставкиТовара</Наименование>
								<Порядок>50</Порядок>
								<Источник>ДоговорПоставкиТовара</Источник>
								<Приемник>ДоговорПоставкиТовара</Приемник>
							</Значение>
							<Значение>
								<Код>2</Код>
								<Наименование>ДоговорПоставкиТовараРазовый --&gt; ДоговорПоставкиТо</Наименование>
								<Порядок>100</Порядок>
								<Источник>ДоговорПоставкиТовараРазовый</Источник>
								<Приемник>ДоговорПоставкиТовара</Приемник>
							</Значение>
						</Значения>
					</Правило>
					<Правило>
						<Код>ДоговорыКонтрагентов_ЮрЛица</Код>
						<Наименование>Справочник: Договоры</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>//Объект.ОбменДанными.Загрузка = Истина;
//Объект.Записать();	

Если Не ОбъектНайден Тогда
	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
		ПараметрПользователь = ПараметрыОбъекта.Получить("Пользователь");
		
		Если ПараметрПользователь &lt;&gt; Неопределено Тогда
			
			Объект.ПользовательОригиналПолучен = Справочники.Пользователи.НайтиПоНаименованию(ПараметрПользователь);
			
		КонецЕсли;			
		
	КонецЕсли;
	
	//Объект.Активный 					= Истина;
	//Объект.РаботаСДоговоромРазрешена 	= Истина;
	//Объект.СканПриложен 				= Истина;
	//Объект.ОригиналПолучен 				= Истина;
	
	//Объект.ОбменДанными.Загрузка = Истина;
	//Объект.Записать();
	
ИначеЕсли ПараметрыОбъекта &lt;&gt; Неопределено Тогда
		
	//ПараметрДатаОкончанияДоговора = ПараметрыОбъекта.Получить("вогДатаОкончанияДоговора");
	
	//Если ПараметрДатаОкончанияДоговора &lt;&gt; Неопределено
	//	И ПараметрДатаОкончанияДоговора &lt;&gt; '00010101'
	//	И ТекущаяДата() &gt; ПараметрДатаОкончанияДоговора Тогда
			
	//	Объект.Активный = Ложь;
			
	//КонецЕсли;
	
КонецЕсли;

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	ПараметрИзменятьУсловияДоставки = ПараметрыОбъекта.Получить("ИзменятьУсловияДоставки");
	
	Если ПараметрИзменятьУсловияДоставки &lt;&gt; Неопределено Тогда
		
		Если ПараметрИзменятьУсловияДоставки = Истина Тогда
			
			ПараметрДатаНачалаДействия = ПараметрыОбъекта.Получить("ДатаНачалаДействияУсловийДоставки");
			
			Если ПараметрДатаНачалаДействия &lt;&gt; Неопределено Тогда
				
				Запрос = Новый Запрос;
				Запрос.Текст = 
					"ВЫБРАТЬ
					|	УсловияДоставкиТовараСрезПоследних.Контрагент
					|ИЗ
					|	РегистрСведений.УсловияДоставкиТовара.СрезПоследних(
					|			&amp;Период,
					|			ВидВзаиморасчетов = &amp;ВидВзаиморасчетов
					|				И Организация = &amp;Организация
//					|				И ВозможнаДоставка = Истина
					|				И Контрагент В
					|					(ВЫБРАТЬ РАЗЛИЧНЫЕ
					|						ВЫБОР
					|							КОГДА ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент1 = &amp;Контрагент
					|								ТОГДА ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент2
					|							ИНАЧЕ ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент1
					|						КОНЕЦ КАК Контрагент
					|					ИЗ
					|						РегистрСведений.ВГ_ВзаимосвязьРолейКонтрагентов КАК ВГ_ВзаимосвязьРолейКонтрагентов
					|					ГДЕ
					|						(ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент1 = &amp;Контрагент
					|								И (ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент2.РольТТ = ИСТИНА
					|									ИЛИ ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент2.РольТТГ = ИСТИНА)
					|							ИЛИ ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент2 = &amp;Контрагент
					|								И (ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент1.РольТТ = ИСТИНА
					|									ИЛИ ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент1.РольТТГ = ИСТИНА))
					|						И ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент1 &lt;&gt; ВГ_ВзаимосвязьРолейКонтрагентов.Контрагент2)) КАК УсловияДоставкиТовараСрезПоследних";
					
				Запрос.УстановитьПараметр("ВидВзаиморасчетов", Объект.ВидВзаиморасчетов);
				Запрос.УстановитьПараметр("Организация", Объект.Организация);
				Запрос.УстановитьПараметр("Контрагент", Объект.Владелец);
				Запрос.УстановитьПараметр("Период", ПараметрДатаНачалаДействия);
					
				РезультатЗапроса = Запрос.Выполнить();

				Выборка = РезультатЗапроса.Выбрать();
					
				Пока Выборка.Следующий() Цикл
					
					НаборЗаписей = РегистрыСведений.УсловияДоставкиТовара.СоздатьНаборЗаписей();
					НаборЗаписей.Отбор.Период.Установить(ПараметрДатаНачалаДействия);
					НаборЗаписей.Отбор.Контрагент.Установить(Выборка.Контрагент);
					НаборЗаписей.Отбор.Организация.Установить(Объект.Организация);
					НаборЗаписей.Отбор.ВидВзаиморасчетов.Установить(Объект.ВидВзаиморасчетов);
					
					ЗаписьНабора = НаборЗаписей.Добавить();
					
					ЗаписьНабора.Период = ПараметрДатаНачалаДействия;
					ЗаписьНабора.Контрагент = Выборка.Контрагент;
					ЗаписьНабора.Организация = Объект.Организация;
					ЗаписьНабора.ВидВзаиморасчетов = Объект.ВидВзаиморасчетов;
					ЗаписьНабора.ВозможнаДоставка = Ложь;	
					
					Попытка
						НаборЗаписей.Записать();
					Исключение
						Сообщить(ОписаниеОшибки());
					КонецПопытки;
				КонецЦикла;
				
			КонецЕсли;	
			
		КонецЕсли;			
		
	КонецЕсли;
	
КонецЕсли;

Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ ПЕРВЫЕ 1
|	ТипыЦенНоменклатурыКонтрагентов.Ссылка
|ИЗ
|	Справочник.ТипыЦенНоменклатурыКонтрагентов КАК ТипыЦенНоменклатурыКонтрагентов
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ТипыЦенНоменклатуры КАК ТипыЦенНоменклатуры
|		ПО ТипыЦенНоменклатурыКонтрагентов.ТипЦеныНоменклатуры = ТипыЦенНоменклатуры.Ссылка
|			И (ТипыЦенНоменклатурыКонтрагентов.Владелец = &amp;Владелец)
|			И (ТипыЦенНоменклатуры.Организация = &amp;Организация)";

Запрос.УстановитьПараметр("Владелец", 		Объект.Владелец);
Запрос.УстановитьПараметр("Организация", 	Объект.Организация);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Объект.ТипЦенКонтрагента = ВыборкаДетальныеЗаписи.Ссылка;
КонецЦикла;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<ГенерироватьНовыйНомерИлиКодЕслиНеУказан>true</ГенерироватьНовыйНомерИлиКодЕслиНеУказан>
						<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
						<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
						<Свойства>
							<Свойство Отключить="true">
								<Код>1</Код>
								<Наименование>--&gt; Код</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>11</Код>
								<Наименование>--&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>12</Код>
								<Наименование>--&gt; Дата</Наименование>
								<Порядок>150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>13</Код>
								<Наименование>--&gt; Владелец</Наименование>
								<Порядок>200</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>ЮридическиеЛица_Контрагенты_ИзКонтрагентов        </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>14</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>15</Код>
								<Наименование>--&gt; ВидВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ВидыВзаиморасчетов"/>
								<КодПравилаКонвертации>ВидыВзаиморасчетов_НаправленияДеятельности        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>--&gt; Наименование</Наименование>
								<Порядок>350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>--&gt; ВидДоговора</Наименование>
								<Порядок>400</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
								<КодПравилаКонвертации>ВидыДоговоров                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>--&gt; РасчетыВУсловныхЕдиницах</Наименование>
								<Порядок>450</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РасчетыВУсловныхЕдиницах" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>--&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>--&gt; ВалютаВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>--&gt; ТипДоговора</Наименование>
								<Порядок>600</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ТипДоговора" Вид="Реквизит" Тип="СправочникСсылка.ВГ_ТипыДоговоров"/>
								<КодПравилаКонвертации>ТипыДоговоров                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>--&gt; ДоговорПоНашейФорме</Наименование>
								<Порядок>650</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорПоНашейФорме" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>//Значение = Ложь;//(ВходящиеДанные.вогФормаДоговора = Перечисления.вогТипыФормДоговоров.НашаФорма);
//Значение = (Источник.вогФормаДоговора = Перечисления.вогТипыФормДоговоров.НашаФорма);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>--&gt; ВедениеВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВедениеВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВедениеВзаиморасчетовПоДоговорам"/>
								<ПередВыгрузкой>Значение = "ПоДоговоруВЦелом";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>16</Код>
								<Наименование>--&gt; ОтветственныйКоординатор</Наименование>
								<Порядок>750</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтветственныйКоординатор" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>17</Код>
								<Наименование>--&gt; ОтветственныйМенеджер</Наименование>
								<Порядок>800</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОтветственныйМенеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
								<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
							</Свойство>
							<Свойство Отключить="true">
								<Код>18</Код>
								<Наименование>--&gt; ДоговорПоНашейФорме</Наименование>
								<Порядок>850</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорПоНашейФорме" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>19</Код>
								<Наименование>--&gt; вогДатаОкончанияДоговора</Наименование>
								<Порядок>900</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>вогДатаОкончанияДоговора</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство>
								<Код>20</Код>
								<Наименование>--&gt; Пользователь</Наименование>
								<Порядок>950</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>Пользователь</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = Пользователи.ТекущийПользователь().Наименование;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>21</Код>
								<Наименование>--&gt; ВестиПоДокументамРасчетовСКонтрагентом</Наименование>
								<Порядок>1000</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВестиПоДокументамРасчетовСКонтрагентом" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>--&gt; РаботаСДоговоромРазрешена</Наименование>
								<Порядок>1050</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РаботаСДоговоромРазрешена" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>//ОписаниеСтатуса = вогОбщегоНазначения.ПолучитьОписаниеСтатусаСогласованияОбъекта(ВходящиеДанные.Ссылка);
//Значение = (ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Согласован);

// +++ Кулаков П.Л. CRM-469
//Если ВходящиеДанные.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом
//	Или ВходящиеДанные.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Действует Тогда
//	Значение = Истина;
//Иначе
//	НеЗамещать = Истина;
//КонецЕсли;
Значение = ВходящиеДанные.Активный;
// --- Кулаков П.Л.

</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>22</Код>
								<Наименование>--&gt; Активный</Наименование>
								<Порядок>1100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Активный" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>
//Если ВходящиеДанные.вогСтатус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом
//	Или ВходящиеДанные.вогСтатус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Действует Тогда
//	Значение = Истина;
//Иначе
//	Значение = Ложь;
//КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>23</Код>
								<Наименование>--&gt; СканПриложен</Наименование>
								<Порядок>1150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СканПриложен" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Если ВходящиеДанные.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом
	Или ВходящиеДанные.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Действует Тогда
	Значение = Истина;
Иначе
	НеЗамещать = Истина;
КонецЕсли;
</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>24</Код>
								<Наименование>--&gt; ОригиналПолучен</Наименование>
								<Порядок>1200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ОригиналПолучен" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Если ВходящиеДанные.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Действует Тогда
	Значение = Истина;
Иначе
	НеЗамещать = Истина;
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>25</Код>
								<Наименование>--&gt; ДатаСозданияДоговора</Наименование>
								<Порядок>1250</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДатаСозданияДоговора" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>26</Код>
								<Наименование>--&gt; СрокДействия</Наименование>
								<Порядок>1300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СрокДействия" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Группа>
								<Код>27</Код>
								<Наименование>--&gt;</Наименование>
								<Порядок>1350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
							</Группа>
							<Свойство>
								<Код>28</Код>
								<Наименование>--&gt; ДатаНачалаДействияУсловийДоставки</Наименование>
								<Порядок>1400</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ДатаНачалаДействияУсловийДоставки</ИмяПараметраДляПередачи>
							</Свойство>
							<Свойство>
								<Код>29</Код>
								<Наименование>--&gt; ИзменятьУсловияДоставки</Наименование>
								<Порядок>1450</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ИзменятьУсловияДоставки</ИмяПараметраДляПередачи>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ДоговорыКонтрагентов</Код>
						<Наименование>Справочник: Договоры</Наименование>
						<Порядок>100</Порядок>
						<ПослеЗагрузки>Объект.ОбменДанными.Загрузка = Истина;
Объект.Записать();	
</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
						<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
						<Свойства>
							<Свойство>
								<Код>1</Код>
								<Наименование>Код --&gt; Код</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>НомерДоговора --&gt; Номер</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="НомерДоговора" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>3</Код>
								<Наименование>ДатаДоговора --&gt; Дата</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="ДатаДоговора" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>4</Код>
								<Наименование>вогЮридическоеЛицо --&gt; Владелец</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="вогЮридическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.вогЮридическиеЛица"/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>ЮридическиеЛица_Контрагенты                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>5</Код>
								<Наименование>Организация --&gt; Организация</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>вогНаправлениеДеятельности --&gt; ВидВзаиморасчетов</Наименование>
								<Порядок>300</Порядок>
								<Источник Имя="вогНаправлениеДеятельности" Вид="Реквизит" Тип="СправочникСсылка.НаправленияДеятельности"/>
								<Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ВидыВзаиморасчетов"/>
								<КодПравилаКонвертации>ВидыВзаиморасчетов_НаправленияДеятельности        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>9</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>350</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>ВидДоговора --&gt; ВидДоговора</Наименование>
								<Порядок>400</Порядок>
								<Источник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоров"/>
								<Приемник Имя="ВидДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыДоговоровКонтрагентов"/>
								<КодПравилаКонвертации>ВидыДоговоров                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>8</Код>
								<Наименование>РасчетыВУсловныхЕдиницах --&gt; РасчетыВУсловныхЕдиницах</Наименование>
								<Порядок>450</Порядок>
								<Источник Имя="РасчетыВУсловныхЕдиницах" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="РасчетыВУсловныхЕдиницах" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>10</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>500</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>11</Код>
								<Наименование>ВалютаРасчетов --&gt; ВалютаВзаиморасчетов</Наименование>
								<Порядок>550</Порядок>
								<Источник Имя="ВалютаРасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
								<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>13</Код>
								<Наименование>вогТипДоговора --&gt; ТипДоговора</Наименование>
								<Порядок>600</Порядок>
								<Источник Имя="вогТипДоговора" Вид="Реквизит" Тип="СправочникСсылка.вогТипыДоговоровКонтрагентов"/>
								<Приемник Имя="ТипДоговора" Вид="Реквизит" Тип="СправочникСсылка.ВГ_ТипыДоговоров"/>
								<КодПравилаКонвертации>ТипыДоговоров                                     </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>12</Код>
								<Наименование>--&gt; ДоговорПоНашейФорме</Наименование>
								<Порядок>650</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ДоговорПоНашейФорме" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>Значение = (Источник.вогФормаДоговора = Перечисления.вогТипыФормДоговоров.НашаФорма);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>14</Код>
								<Наименование>--&gt; ВедениеВзаиморасчетов</Наименование>
								<Порядок>700</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВедениеВзаиморасчетов" Вид="Реквизит" Тип="ПеречислениеСсылка.ВедениеВзаиморасчетовПоДоговорам"/>
								<ПередВыгрузкой>Значение = "ПоДоговоруВЦелом";</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>15</Код>
								<Наименование>--&gt; РаботаСДоговоромРазрешена</Наименование>
								<Порядок>750</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РаботаСДоговоромРазрешена" Вид="Реквизит" Тип="Булево"/>
								<ПередВыгрузкой>ОписаниеСтатуса = вогОбщегоНазначения.ПолучитьОписаниеСтатусаСогласованияОбъекта(Источник.Ссылка);
Значение = (ОписаниеСтатуса.Статус = Перечисления.вогСтатусыСогласования.Согласован);
</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>РолиКонтактныхЛиц</Код>
						<Наименование>Справочник: Роли контактных лиц клиентов</Наименование>
						<Порядок>150</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<Источник>СправочникСсылка.РолиКонтактныхЛицПартнеров</Источник>
						<Приемник>СправочникСсылка.РолиКонтактныхЛиц</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения>
							<Значение>
								<Код>1</Код>
								<Наименование>ГенеральныйДиректор --&gt; ГенеральныйДиректор</Наименование>
								<Порядок>50</Порядок>
								<Источник>ГенеральныйДиректор</Источник>
								<Приемник>ГенеральныйДиректор</Приемник>
							</Значение>
							<Значение>
								<Код>2</Код>
								<Наименование>Координатор --&gt; Координатор</Наименование>
								<Порядок>100</Порядок>
								<Источник>Координатор</Источник>
								<Приемник>Координатор</Приемник>
							</Значение>
							<Значение>
								<Код>3</Код>
								<Наименование>Менеджер --&gt; Менеджер</Наименование>
								<Порядок>150</Порядок>
								<Источник>Менеджер</Источник>
								<Приемник>Менеджер</Приемник>
							</Значение>
							<Значение>
								<Код>4</Код>
								<Наименование>ПодписантДоговора --&gt; ПодписантДоговора</Наименование>
								<Порядок>200</Порядок>
								<Источник>ПодписантДоговора</Источник>
								<Приемник>ПодписантДоговора</Приемник>
							</Значение>
						</Значения>
					</Правило>
					<Правило>
						<Код>ВзаимосвязьРолейКонтрагентов</Код>
						<Наименование>:</Наименование>
						<Порядок>200</Порядок>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<Приемник>РегистрСведенийЗапись.ВГ_ВзаимосвязьРолейКонтрагентов</Приемник>
						<Свойства>
							<Свойство>
								<Код>3</Код>
								<Наименование>--&gt; Активность</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>--&gt; Контрагент1</Наименование>
								<Порядок>100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент1" Вид="Измерение" Тип="СправочникСсылка.Контрагенты"/>
								<ПередВыгрузкой>//ИмяПКО = ВходящиеДанные.Контрагент1_ИмяПКО;

ТипОбъекта = ТипЗнч(ВходящиеДанные.Контрагент1);
Если ТипОбъекта = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
	ИмяПКО = "ТорговыеТочки_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
	ИмяПКО = "РаспределительныеЦентры_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
	ИмяПКО = "ЮридическиеЛица_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРынки") Тогда
	ИмяПКО = "Партнеры_РынкиОМ";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРынки") Тогда
	ИмяПКО = "Партнеры_Контрагенты";
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>--&gt; Контрагент2</Наименование>
								<Порядок>150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент2" Вид="Измерение" Тип="СправочникСсылка.Контрагенты"/>
								<ПередВыгрузкой>//ИмяПКО = ВходящиеДанные.Контрагент2_ИмяПКО;

ТипОбъекта = ТипЗнч(ВходящиеДанные.Контрагент2);
Если ТипОбъекта = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
	ИмяПКО = ВходящиеДанные.Контрагент2_ИмяПКО;
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
	ИмяПКО = "ЮридическиеЛица_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
	ИмяПКО = "РаспределительныеЦентры_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРынки") Тогда
	ИмяПКО = "Партнеры_РынкиОМ";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРынки") Тогда
	ИмяПКО = "Партнеры_Контрагенты";
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>--&gt; СвязьЧерезДистрибьютора</Наименование>
								<Порядок>200</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="СвязьЧерезДистрибьютора" Вид="Ресурс" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ГоловныеКонтрагентыПоОрганизациям</Код>
						<Наименование>:</Наименование>
						<Порядок>250</Порядок>
						<ПослеЗагрузки>Для Каждого ЗаписьРС Из НаборЗаписей Цикл
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ГоловныеКонтрагентыПоОрганизациям.Организация
		|ИЗ
		|	РегистрСведений.ГоловныеКонтрагентыПоОрганизациям КАК ГоловныеКонтрагентыПоОрганизациям
		|ГДЕ
		|	ГоловныеКонтрагентыПоОрганизациям.Организация = &amp;Организация
		|	И ГоловныеКонтрагентыПоОрганизациям.Контрагент = &amp;Контрагент
		|	И ГоловныеКонтрагентыПоОрганизациям.ГоловнойКонтрагент = &amp;ГоловнойКонтрагент";
	
	Запрос.УстановитьПараметр("ГоловнойКонтрагент", ЗаписьРС.ГоловнойКонтрагент);
	Запрос.УстановитьПараметр("Контрагент", 		ЗаписьРС.Контрагент);
	Запрос.УстановитьПараметр("Организация", 		ЗаписьРС.Организация);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если Не РезультатЗапроса.Пустой() Тогда
		Отказ = Истина;
	КонецЕсли;
	
КонецЦикла;</ПослеЗагрузки>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<Приемник>РегистрСведенийЗапись.ГоловныеКонтрагентыПоОрганизациям</Приемник>
						<Свойства>
							<Свойство>
								<Код>2</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>--&gt; Контрагент</Наименование>
								<Порядок>100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент" Вид="Измерение" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>ЮридическиеЛица_Контрагенты                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>--&gt; ГоловнойКонтрагент</Наименование>
								<Порядок>150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ГоловнойКонтрагент" Вид="Ресурс" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>ЮридическиеЛица_Контрагенты                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>--&gt; ИспользоватьТПГоловногоКонтрагента</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ИспользоватьТПГоловногоКонтрагента" Вид="Ресурс" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>--&gt; Активность</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>УсловияДоставки</Код>
						<Наименование>Регистр сведений: Условия доставки</Наименование>
						<Порядок>300</Порядок>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<Источник>РегистрСведенийЗапись.вогУсловияДоставки</Источник>
						<Приемник>РегистрСведенийЗапись.УсловияДоставкиТовара</Приемник>
						<Свойства>
							<Свойство>
								<Код>4</Код>
								<Наименование>--&gt; Период</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>--&gt; Активность</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Активность" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>1</Код>
								<Наименование>--&gt; Организация</Наименование>
								<Порядок>150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Организация" Вид="Измерение" Тип="СправочникСсылка.Организации"/>
								<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>--&gt; ВидВзаиморасчетов</Наименование>
								<Порядок>200</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВидВзаиморасчетов" Вид="Измерение" Тип="СправочникСсылка.ВидыВзаиморасчетов"/>
								<КодПравилаКонвертации>ВидыВзаиморасчетов_НаправленияДеятельности        </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>--&gt; Контрагент</Наименование>
								<Порядок>250</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Контрагент" Вид="Измерение" Тип="СправочникСсылка.Контрагенты"/>
								<КодПравилаКонвертации>ТорговыеТочки_Контрагенты                         </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>--&gt; ВозможнаДоставка</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ВозможнаДоставка" Вид="Ресурс" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>КонтактныеЛица</Код>
						<Наименование>Справочник: Контакты</Наименование>
						<Порядок>350</Порядок>
						<ПослеВыгрузки>Выполнить(Алгоритмы.ВыгрузкаСвязейКонтактныхЛиц);</ПослеВыгрузки>
						<ПослеЗагрузки>Если Не ЗначениеЗаполнено(Объект.Код) Тогда
	Объект.УстановитьНовыйКод();
КонецЕсли;</ПослеЗагрузки>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<Источник>СправочникСсылка.КонтактныеЛицаПартнеров</Источник>
						<Приемник>СправочникСсылка.КонтактныеЛица</Приемник>
						<Свойства>
							<Свойство>
								<Код>3</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>5</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>8</Код>
								<Наименование>CRM_Фамилия --&gt; Фамилия</Наименование>
								<Порядок>10</Порядок>
								<Источник Имя="CRM_Фамилия" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Фамилия" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>CRM_Имя --&gt; Имя</Наименование>
								<Порядок>15</Порядок>
								<Источник Имя="CRM_Имя" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Имя" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство Поиск="true">
								<Код>6</Код>
								<Наименование>CRM_Отчество --&gt; Отчество</Наименование>
								<Порядок>20</Порядок>
								<Источник Имя="CRM_Отчество" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Отчество" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>Пол --&gt; Пол</Наименование>
								<Порядок>25</Порядок>
								<Источник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическогоЛица"/>
								<Приемник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическихЛиц"/>
								<КодПравилаКонвертации>ПолФизическихЛиц                                  </КодПравилаКонвертации>
							</Свойство>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>ДатаРождения --&gt; ДатаРождения</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
								<Приемник Имя="ДатаРождения" Вид="Реквизит" Тип="Дата"/>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>CRM_НапоминатьОДнеРождения --&gt; НапоминатьОДнеРождения</Наименование>
								<Порядок>200</Порядок>
								<Источник Имя="CRM_НапоминатьОДнеРождения" Вид="Реквизит" Тип="Булево"/>
								<Приемник Имя="НапоминатьОДнеРождения" Вид="Реквизит" Тип="Булево"/>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>Комментарий --&gt; Описание</Наименование>
								<Порядок>250</Порядок>
								<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
								<Приемник Имя="Описание" Вид="Реквизит" Тип="Строка"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ВГ_ФорматыТТ</Код>
						<Наименование>Справочник: Виды торговых точек</Наименование>
						<Порядок>400</Порядок>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
						<Источник>СправочникСсылка.вогВидыТорговыхТочек</Источник>
						<Приемник>СправочникСсылка.ВГ_ФорматыТТ</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>Наименование --&gt; Наименование</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
							</Свойство>
							<Свойство>
								<Код>2</Код>
								<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
								<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ПолФизическихЛиц</Код>
						<Наименование>Перечисление: Пол физического лица</Наименование>
						<Порядок>400</Порядок>
						<Источник>ПеречислениеСсылка.ПолФизическогоЛица</Источник>
						<Приемник>ПеречислениеСсылка.ПолФизическихЛиц</Приемник>
						<Свойства/>
						<Значения>
							<Значение>
								<Код>1</Код>
								<Наименование>Мужской --&gt; Мужской</Наименование>
								<Порядок>50</Порядок>
								<Источник>Мужской</Источник>
								<Приемник>Мужской</Приемник>
							</Значение>
							<Значение>
								<Код>2</Код>
								<Наименование>Женский --&gt; Женский</Наименование>
								<Порядок>100</Порядок>
								<Источник>Женский</Источник>
								<Приемник>Женский</Приемник>
							</Значение>
						</Значения>
					</Правило>
					<Правило>
						<Код>КонтактныеЛицаКонтрагентов</Код>
						<Наименование>:</Наименование>
						<Порядок>450</Порядок>
						<ПослеВыгрузки>
Выполнить(Алгоритмы.ВыгрузкаДокументовКонтактныхЛиц);</ПослеВыгрузки>
						<ПослеЗагрузки>Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	//+ Параметры объекта
	Состояние = ПараметрыОбъекта["Состояние"];
	ДатаИзмененияСостояния = ПараметрыОбъекта["ДатаИзмененияСостояния"];
	//- Параметры объекта
	
	//+ Подготовка запроса
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("КонтактноеЛицоКонтрагента", Объект.Ссылка);
	Запрос.УстановитьПараметр("КонтактноеЛицо", Объект.КонтактноеЛицо);
	Запрос.Текст = 
	"ВЫБРАТЬ
	|   ИсторияКонтактныхЛицКонтрагентовСрезПоследних.Период,
	|	ИсторияКонтактныхЛицКонтрагентовСрезПоследних.ДатаУвольнения,
	|	ИсторияКонтактныхЛицКонтрагентовСрезПоследних.Контрагент
	|ИЗ
	|	РегистрСведений.ИсторияКонтактныхЛицКонтрагентов.СрезПоследних(
	|			,
	|			КонтактноеЛицо = &amp;КонтактноеЛицо
	|				И КонтактноеЛицоКонтрагента = &amp;КонтактноеЛицоКонтрагента) КАК ИсторияКонтактныхЛицКонтрагентовСрезПоследних
	|";
	//- Подготовка запроса
	
	//+ Подготовка набора записей
	НаборЗаписей = РегистрыСведений.ИсторияКонтактныхЛицКонтрагентов.СоздатьНаборЗаписей();
	
	НаборЗаписей.Отбор.КонтактноеЛицоКонтрагента.Установить(Объект.Ссылка);
	НаборЗаписей.Отбор.КонтактноеЛицо.Установить(Объект.КонтактноеЛицо);
	
	Запись = НаборЗаписей.Добавить();
	Запись.Период 						= ТекущаяДата(); // Солодов // ДатаИзмененияСостояния;
	Запись.КонтактноеЛицоКонтрагента 	= Объект.Ссылка;
	Запись.КонтактноеЛицо 				= Объект.КонтактноеЛицо;
	Запись.ДатаУвольнения 				= Неопределено;
	Запись.Контрагент 					= Объект.Владелец;
	//- Подготовка набора записей
	
	//+ Исключительная блокировка
	Если ТранзакцияАктивна() Тогда
		Блокировка = Новый БлокировкаДанных;
		ЭлементБлокировки = Блокировка.Добавить("РегистрСведений.ИсторияКонтактныхЛицКонтрагентов");
		ЭлементБлокировки.ИсточникДанных = НаборЗаписей.Выгрузить(,"КонтактноеЛицоКонтрагента,КонтактноеЛицо"); 
		ЭлементБлокировки.Режим = РежимБлокировкиДанных.Исключительный;
		Блокировка.Заблокировать(); 
	КонецЕсли; 
	//- Исключительная блокировка
	
	//+ Чтение
	РезультатЗапроса = Запрос.Выполнить();
	Выборка = РезультатЗапроса.Выбрать();
	//- Чтение
	
	ФлагЗаписи = Ложь;
	//+ Запись
	Если Выборка.Следующий() Тогда
		
		Если НЕ ЗначениеЗаполнено(Выборка.ДатаУвольнения)
			И Состояние = "Уволен" Тогда
			// Был уволен
			Запись.ДатаУвольнения = ДатаИзмененияСостояния;
			//НаборЗаписей.Записать();
			ФлагЗаписи = Истина;
			
		ИначеЕсли ЗначениеЗаполнено(Выборка.ДатаУвольнения)
			И Состояние = "Работает" Тогда 
			
			//НаборЗаписей.Записать();
			ФлагЗаписи = Истина;
			
		КонецЕсли; 
		
	Иначе
		// Нет ни одной записи в истории. Добавим одну.
		//НаборЗаписей.Записать();
		ФлагЗаписи = Истина;
	КонецЕсли;
	
	Если ФлагЗаписи Тогда
		Попытка
			НаборЗаписей.Записать();
		Исключение
			
		КонецПопытки;
	КонецЕсли;
	//- Запись
	
КонецЕсли;

Если Не ЗначениеЗаполнено(Объект.Код) Тогда
	Объект.УстановитьНовыйКод();
КонецЕсли;</ПослеЗагрузки>
						<Приемник>СправочникСсылка.КонтактныеЛицаКонтрагентов</Приемник>
						<Свойства>
							<Свойство Поиск="true">
								<Код>1</Код>
								<Наименование>--&gt; Владелец</Наименование>
								<Порядок>50</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Контрагенты"/>
								<ПередВыгрузкой>ТипОбъекта = ТипЗнч(ВходящиеДанные.Владелец);
//Если ТипОбъекта = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
//	ИмяПКО = "ТорговыеТочки_Контрагенты";
//	
//ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
//	ИмяПКО = "ЮридическиеЛица_Контрагенты";
//	
//ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.Партнеры") Тогда
//	ИмяПКО = "Партнеры_Контрагенты";
//	
//КонецЕсли;

Значение = ВходящиеДанные.Владелец;</ПередВыгрузкой>
							</Свойство>
							<Свойство Поиск="true">
								<Код>2</Код>
								<Наименование>--&gt; КонтактноеЛицо</Наименование>
								<Порядок>100</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="КонтактноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.КонтактныеЛица"/>
								<КодПравилаКонвертации>КонтактныеЛица                                    </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>3</Код>
								<Наименование>--&gt; Должность</Наименование>
								<Порядок>150</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Должность" Вид="Реквизит" Тип="Строка"/>
								<ПередВыгрузкой>Значение = СокрЛП(ВходящиеДанные.Должность.Наименование);</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>4</Код>
								<Наименование>--&gt; РольКонтактногоЛица</Наименование>
								<Порядок>200</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="РольКонтактногоЛица" Вид="Реквизит" Тип="СправочникСсылка.РолиКонтактныхЛиц"/>
								<КодПравилаКонвертации>РолиКонтактныхЛиц                                 </КодПравилаКонвертации>
							</Свойство>
							<Свойство>
								<Код>5</Код>
								<Наименование>--&gt; Состояние</Наименование>
								<Порядок>250</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>Состояние</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Если ВходящиеДанные.Состояние = Перечисления.CRM_Состояние.Уволен Тогда
	Значение = "Уволен";
	
ИначеЕсли ВходящиеДанные.Состояние = Перечисления.CRM_Состояние.Работает Тогда 	
	Значение = "Работает";
	
ИначеЕсли ВходящиеДанные.Состояние = Перечисления.CRM_Состояние.ВременноНеРаботает Тогда 	
	Значение = "ВременноНеРаботает";
	
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>6</Код>
								<Наименование>--&gt; ДатаИзмененияСостояния</Наименование>
								<Порядок>300</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
								<ИмяПараметраДляПередачи>ДатаИзмененияСостояния</ИмяПараметраДляПередачи>
								<ПередВыгрузкой>Значение = ВходящиеДанные.ДатаИзмененияСостояния;</ПередВыгрузкой>
							</Свойство>
							<Свойство>
								<Код>7</Код>
								<Наименование>--&gt; Наименование</Наименование>
								<Порядок>350</Порядок>
								<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
								<ПередВыгрузкой>Если ЗначениеЗаполнено(ВходящиеДанные.КонтактноеЛицо.CRM_Отчество) Тогда
	Значение = СокрЛП(ВходящиеДанные.КонтактноеЛицо.CRM_Фамилия) + " " + СокрЛП(ВходящиеДанные.КонтактноеЛицо.CRM_Имя) + " " + СокрЛП(ВходящиеДанные.КонтактноеЛицо.CRM_Отчество);
Иначе
	Значение = СокрЛП(ВходящиеДанные.КонтактноеЛицо.CRM_Фамилия) + " " + СокрЛП(ВходящиеДанные.КонтактноеЛицо.CRM_Имя);
КонецЕсли;</ПередВыгрузкой>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>МенеджерыКонтрагентов</Код>
						<Наименование>: </Наименование>
						<Порядок>500</Порядок>
						<ПослеЗагрузки>
Если ОбъектНайден Тогда
	
	Выполнить(Алгоритмы.ЗаполнитьМенеджеров);
	
	Объект.ОбменДанными.Загрузка = Истина;
	Объект.Записать();
	
	Выполнить(Алгоритмы.ИзменитьМенеджераВДоговорах);
	
КонецЕсли;</ПослеЗагрузки>
						<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
						<Приемник>СправочникСсылка.Контрагенты</Приемник>
						<Свойства>
							<Свойство Поиск="true" Обязательное="true">
								<Код>9</Код>
								<Наименование>--&gt; ЭтоГруппа</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Группа>
								<Код>1</Код>
								<Наименование>--&gt; МенеджерыПокупателя</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="МенеджерыПокупателя" Вид="ТабличнаяЧасть"/>
								<ПередОбработкойВыгрузки>Выполнить(Алгоритмы.ПереносМенеджеровОбъектов);</ПередОбработкойВыгрузки>
								<Свойство>
									<Код>2</Код>
									<Наименование>--&gt; ВидВзаиморасчетов</Наименование>
									<Порядок>50</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ВидВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.ВидыВзаиморасчетов"/>
									<КодПравилаКонвертации>ВидыВзаиморасчетов_НаправленияДеятельности        </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>3</Код>
									<Наименование>--&gt; ДатаНачала</Наименование>
									<Порядок>100</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДатаНачала" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>4</Код>
									<Наименование>--&gt; ДатаОкончания</Наименование>
									<Порядок>150</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="ДатаОкончания" Вид="Реквизит" Тип="Дата"/>
								</Свойство>
								<Свойство>
									<Код>5</Код>
									<Наименование>--&gt; МенеджерПокупателя</Наименование>
									<Порядок>200</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="МенеджерПокупателя" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
									<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
								</Свойство>
								<Свойство>
									<Код>6</Код>
									<Наименование>--&gt; Организация</Наименование>
									<Порядок>250</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
									<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
									<ПередВыгрузкой>Значение = Справочники.СтруктураПредприятия.ПолучитьОрганизациюПоПодразделению(ОбъектКоллекции.Подразделение);</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>7</Код>
									<Наименование>--&gt; Основной</Наименование>
									<Порядок>300</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Основной" Вид="Реквизит" Тип="Булево"/>
									<ПередВыгрузкой>Значение = Истина;</ПередВыгрузкой>
								</Свойство>
								<Свойство>
									<Код>8</Код>
									<Наименование>--&gt; Роль</Наименование>
									<Порядок>350</Порядок>
									<Источник Имя="" Вид=""/>
									<Приемник Имя="Роль" Вид="Реквизит" Тип="СправочникСсылка.РолиКонтактныхЛиц"/>
									<КодПравилаКонвертации>РолиКонтактныхЛиц                                 </КодПравилаКонвертации>
								</Свойство>
							</Группа>
						</Свойства>
						<Значения/>
					</Правило>
					<Правило>
						<Код>ЮридическиеЛица_Контрагенты_ИзКонтрагентов</Код>
						<Наименование>Справочник: Юридические лица</Наименование>
						<Порядок>550</Порядок>
						<НеЗамещать>true</НеЗамещать>
						<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
						<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
						<Источник>СправочникСсылка.вогЮридическиеЛица</Источник>
						<Приемник>СправочникСсылка.Контрагенты</Приемник>
						<Свойства>
							<Свойство Поиск="true" Обязательное="true">
								<Код>1</Код>
								<Наименование>--&gt; ЭтоГруппа</Наименование>
								<Порядок>50</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
								<ПередВыгрузкой>Значение = Ложь;</ПередВыгрузкой>
							</Свойство>
							<Свойство Отключить="true">
								<Код>2</Код>
								<Наименование>--&gt;</Наименование>
								<Порядок>100</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
							<Свойство Отключить="true">
								<Код>3</Код>
								<Наименование>--&gt;</Наименование>
								<Порядок>150</Порядок>
								<Источник Имя="" Вид=""/>
								<Приемник Имя="" Вид=""/>
							</Свойство>
						</Свойства>
						<Значения/>
					</Правило>
				</Группа>
			</Группа>
		</Группа>
		<Группа>
			<Код>Регистры сведений</Код>
			<Наименование>Регистры сведений</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>КонтактнаяИнформация</Код>
				<Наименование>:</Наименование>
				<Порядок>50</Порядок>
				<ПослеЗагрузки>ЗаписьРегистра = Объект;
Если ЗаписьРегистра.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес Тогда
	ПредставлениеАдреса = УправлениеКонтактнойИнформацией.ПолучитьПредставлениеАдреса(ЗаписьРегистра);
	Если ЗначениеЗаполнено(ПредставлениеАдреса) Тогда
		ЗаписьРегистра.Представление = ПредставлениеАдреса;
	КонецЕсли;
КонецЕсли;</ПослеЗагрузки>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Приемник>РегистрСведенийЗапись.КонтактнаяИнформация</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; Объект</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Объект" Вид="Измерение"/>
						<ПередВыгрузкой>ТипОбъекта = ТипЗнч(ВходящиеДанные.Объект);
Если ТипОбъекта = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
	ИмяПКО = "ТорговыеТочки_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
	ИмяПКО = "ЮридическиеЛица_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
	ИмяПКО = "РаспределительныеЦентры_Контрагенты";
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; Вид</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Вид" Вид="Измерение"/>
						<ПередВыгрузкой>Если ТипЗнч(ВходящиеДанные.Вид) &lt;&gt; Тип("СправочникСсылка.ВидыКонтактнойИнформации") Тогда
	ИмяПКО = "";
	
Иначе
	
	ТипОбъекта = ТипЗнч(ВходящиеДанные.Объект);
	Если ТипОбъекта = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
		ИмяПКО = "ВидыКонтактнойИнформации_ТорговыеТочки";
		
	ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
		ИмяПКО = "ВидыКонтактнойИнформации_ЮрЛица";
		
	ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
		ИмяПКО = "ВидыКонтактнойИнформации_РаспределительныеЦентры";
		
	Иначе
		ИмяПКО = "";
		
	КонецЕсли;	 
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; Тип</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Тип" Вид="Измерение" Тип="ПеречислениеСсылка.ТипыКонтактнойИнформации"/>
						<КодПравилаКонвертации>ТипыКонтактнойИнформации                          </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; Поле1</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле1" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; Поле10</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле10" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; Поле2</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле2" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; Поле3</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле3" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>--&gt; Поле4</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле4" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>--&gt; Поле5</Наименование>
						<Порядок>450</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле5" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>--&gt; Поле6</Наименование>
						<Порядок>500</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле6" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>--&gt; Поле7</Наименование>
						<Порядок>550</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле7" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>--&gt; Поле8</Наименование>
						<Порядок>600</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле8" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>--&gt; Поле9</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Поле9" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; ТипДома</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипДома" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыДомов"/>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>--&gt; ТипКвартиры</Наименование>
						<Порядок>750</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипКвартиры" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКвартир"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>--&gt; ТипКорпуса</Наименование>
						<Порядок>800</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипКорпуса" Вид="Ресурс" Тип="ПеречислениеСсылка.ТипыКорпусов"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>--&gt; Представление</Наименование>
						<Порядок>850</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Представление" Вид="Ресурс" Тип="Строка"/>
						<ПередВыгрузкой> // Для адреса представление формируется при загрузке
Если ВходящиеДанные.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес И НЕ ВходящиеДанные.ЭтоПроизвольнаяСтрока Тогда
	Значение = ""
	//Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>900</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
						<ПередВыгрузкой> // Для адреса представление формируется при загрузке
//Если ВходящиеДанные.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес И НЕ ВходящиеДанные.ЭтоПроизвольнаяСтрока Тогда
//	Отказ = Истина;
//КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ИнформацияОКонтрагенте</Код>
				<Наименование>:</Наименование>
				<Порядок>100</Порядок>
				<ПриЗагрузке>//Если Объект.ТипПоля = Неопределено Тогда
//	Отказ = Истина;
//КонецЕсли;
	
</ПриЗагрузке>
				<ПослеЗагрузки>Для Каждого ЗаписьРС Из НаборЗаписей Цикл
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ВГ_ИнформацияОКонтрагенте.Контрагент КАК Контрагент
		|ИЗ
		|	РегистрСведений.ВГ_ИнформацияОКонтрагенте КАК ВГ_ИнформацияОКонтрагенте
		|ГДЕ
		|	ВГ_ИнформацияОКонтрагенте.Период = &amp;Период
		|	И ВГ_ИнформацияОКонтрагенте.Контрагент = &amp;Контрагент
		|	И ВГ_ИнформацияОКонтрагенте.ТипПоля = &amp;ТипПоля";
	
	Запрос.УстановитьПараметр("Период", 	ЗаписьРС.Период);
	Запрос.УстановитьПараметр("Контрагент", ЗаписьРС.Контрагент);
	Запрос.УстановитьПараметр("ТипПоля", 	ЗаписьРС.ТипПоля);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Если Не РезультатЗапроса.Пустой() Тогда
		Отказ = Истина;
	КонецЕсли;
	
КонецЦикла;</ПослеЗагрузки>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Приемник>РегистрСведенийЗапись.ВГ_ИнформацияОКонтрагенте</Приемник>
				<Свойства>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; Период</Наименование>
						<Порядок>10</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Измерение" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>ТипОбъекта = ТипЗнч(ВходящиеДанные.Контрагент);
Если ТипОбъекта = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
	ИмяПКО = "ТорговыеТочки_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
	ИмяПКО = "ЮридическиеЛица_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
	ИмяПКО = "РаспределительныеЦентры_Контрагенты";
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; ТипПоля</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипПоля" Вид="Измерение" Тип="ПеречислениеСсылка.ВГ_ТипыПолейКонтрагента"/>
						<КодПравилаКонвертации>ВГ_ТипыПолейКонтрагента                           </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; Значение</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Значение" Вид="Ресурс"/>
						<ПередВыгрузкой>ТипОбъекта = ТипЗнч(ВходящиеДанные.Значение);
Если ТипОбъекта = Тип("СправочникСсылка.БанковскиеСчета") Тогда
	ИмяПКО = "БанковскиеСчета";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>4</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВГ_ИнформацияОКонтрагенте</Код>
				<Наименование>:</Наименование>
				<Порядок>100</Порядок>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Приемник>РегистрСведенийЗапись.ВГ_ИнформацияОКонтрагенте</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; Период</Наименование>
						<Порядок>10</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; Контрагент</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Контрагент" Вид="Измерение" Тип="СправочникСсылка.Контрагенты"/>
						<ПередВыгрузкой>ТипОбъекта = ТипЗнч(ВходящиеДанные.Контрагент);
Если ТипОбъекта = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
	ИмяПКО = "ТорговыеТочки_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
	ИмяПКО = "ЮридическиеЛица_Контрагенты";
	
ИначеЕсли ТипОбъекта = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
	ИмяПКО = "РаспределительныеЦентры_Контрагенты";
	
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; ТипПоля</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ТипПоля" Вид="Измерение" Тип="ПеречислениеСсылка.ВГ_ТипыПолейКонтрагента"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; Значение</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Значение" Вид="Ресурс"/>
						<ПередВыгрузкой>ТипОбъекта = ТипЗнч(ВходящиеДанные.Значение);
Если ТипОбъекта = Тип("СправочникСсылка.БанковскиеСчета") Тогда
	ИмяПКО = "БанковскиеСчета";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Отключить="true">
						<Код>5</Код>
						<Наименование>--&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Комментарий" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ЗначенияСвойствОбъектов</Код>
				<Наименование>: </Наименование>
				<Порядок>1000</Порядок>
				<ПослеЗагрузки>Отказ = Истина;

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	ТЗ_СвойстваОбъектов = ЗначениеИзСтрокиВнутр(ПараметрыОбъекта.Получить("ТЗ_СвойстваОбъектов"));
	ПараметрОбъект 		= ПараметрыОбъекта.Получить("Объект");	
	
	Если ТЗ_СвойстваОбъектов &lt;&gt; Неопределено 
		И ПараметрОбъект &lt;&gt; Неопределено Тогда
		
		Для Каждого СтрокаТЗ Из ТЗ_СвойстваОбъектов Цикл
			
			Свойство = ПланыВидовХарактеристик.СвойстваОбъектов.НайтиПоНаименованию(СтрокаТЗ.ИмяСвойства);
			
			Если Свойство &lt;&gt; Неопределено Тогда
				
				Набор = РегистрыСведений.ЗначенияСвойствОбъектов.СоздатьНаборЗаписей();
				Набор.Отбор.Объект.Установить(ПараметрОбъект);
				Набор.Отбор.Свойство.Установить(Свойство);
				
				ЗаписьНабора = Набор.Добавить();
				ЗаписьНабора.Объект 	= ПараметрОбъект;
				ЗаписьНабора.Свойство 	= Свойство;
				ЗаписьНабора.Значение 	= СтрокаТЗ.Значение;
				
				Если Набор.Количество() &gt; 0 Тогда
					Набор.Записать();
				Иначе
					Отказ = Истина;
				КонецЕсли;
				
			КонецЕсли;
			
		КонецЦикла;
		
	Иначе
		
		Отказ = Истина;
		
	КонецЕсли;
	
Иначе
	
	Отказ = Истина;
	
КонецЕсли;</ПослеЗагрузки>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Приемник>РегистрСведенийЗапись.ЗначенияСвойствОбъектов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; Объект</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>Объект</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; ТЗ_СвойстваОбъектов</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ТЗ_СвойстваОбъектов</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПаспортныеДанныеФизЛиц</Код>
				<Наименование>Регистр сведений: Документы физических лиц</Наименование>
				<Порядок>1050</Порядок>
				<НеЗапоминатьВыгруженные>true</НеЗапоминатьВыгруженные>
				<Источник>РегистрСведенийЗапись.ДокументыФизическихЛиц</Источник>
				<Приемник>РегистрСведенийЗапись.ПаспортныеДанныеФизЛиц</Приемник>
				<Свойства>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; ФизЛицо</Наименование>
						<Порядок>50</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ФизЛицо" Вид="Измерение"/>
						<ПередВыгрузкой>ТипОбъекта = ТипЗнч(ВходящиеДанные.Физлицо);
Если ТипОбъекта = Тип("СправочникСсылка.КонтактныеЛицаПартнеров") Тогда
	ИмяПКО = "КонтактныеЛица";
Иначе
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>--&gt; ДокументВид</Наименование>
						<Порядок>100</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументВид" Вид="Ресурс" Тип="СправочникСсылка.ДокументыУдостоверяющиеЛичность"/>
						<КодПравилаКонвертации>ДокументыУдостоверяющиеЛичность                   </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>--&gt; ДокументДатаВыдачи</Наименование>
						<Порядок>150</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументДатаВыдачи" Вид="Ресурс" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>--&gt; ДокументКемВыдан</Наименование>
						<Порядок>200</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументКемВыдан" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>--&gt; ДокументКодПодразделения</Наименование>
						<Порядок>250</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументКодПодразделения" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>--&gt; ДокументНомер</Наименование>
						<Порядок>300</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументНомер" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>--&gt; ДокументСерия</Наименование>
						<Порядок>350</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ДокументСерия" Вид="Ресурс" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; Период</Наименование>
						<Порядок>400</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Период" Вид="Свойство" Тип="Дата"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Правило Отключить="true">
			<Код>Партнеры</Код>
			<Наименование>Клиенты</Наименование>
			<Порядок>50</Порядок>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.Партнеры</ОбъектВыборки>
			<ПередОбработкойПравила>
////ВыборкаДанных = Параметры.ПартнерОтбор;
//Сообщить(Параметры.ПартнерОтбор);
//ВыгрузитьПоПравилу(Параметры.ПартнерОтбор,,,, "Партнеры_Контрагенты");
</ПередОбработкойПравила>
			<ПередВыгрузкойОбъекта>Если Объект.ЭтоГруппа Или Объект.ПометкаУдаления Тогда
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
	//Если Объект.вогТипыОтношений.Найти(Справочники.CRM_ТипыОтношений.Клиент) &lt;&gt; Неопределено Тогда
		ВыгрузитьПоПравилу(Объект,,,, "Партнеры_Контрагенты");
		
	//КонецЕсли;
		
	//Если Объект.вогТипыОтношений.Найти(Справочники.CRM_ТипыОтношений.вогРынок) &lt;&gt; Неопределено Тогда
	//	Отказ = Истина
		//ВыгрузитьПоПравилу(Объект,,,, "Партнеры_РынкиОМ");
		
	//КонецЕсли;
					
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
		</Правило>
		<Правило Отключить="true">
			<Код>КонтактныеЛицаПартнеров</Код>
			<Наименование>Контакты</Наименование>
			<Порядок>50</Порядок>
			<КодПравилаКонвертации>КонтактныеЛица                                    </КодПравилаКонвертации>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.КонтактныеЛицаПартнеров</ОбъектВыборки>
			<ПередВыгрузкойОбъекта>Если Объект.ПометкаУдаления Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
		</Правило>
		<Правило Отключить="true">
			<Код>вогРаспределительныеЦентры</Код>
			<Наименование>РаспределительныеЦентры_Контрагенты               </Наименование>
			<Порядок>50</Порядок>
			<КодПравилаКонвертации>РаспределительныеЦентры_Контрагенты               </КодПравилаКонвертации>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.вогРаспределительныеЦентры</ОбъектВыборки>
			<ПередВыгрузкойОбъекта>Если Объект.ПометкаУдаления Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			<ПослеВыгрузкиОбъекта>Выполнить(Алгоритмы.ПереносВзаимосвязейРолейКонтрагентов);</ПослеВыгрузкиОбъекта>
		</Правило>
		<Правило Отключить="true">
			<Код>вогРынки</Код>
			<Наименование>Рынки (ТЦ)</Наименование>
			<Порядок>50</Порядок>
			<КодПравилаКонвертации>РынкиТЦ_РынкиОМ                                   </КодПравилаКонвертации>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.вогРынки</ОбъектВыборки>
		</Правило>
		<Правило Отключить="true">
			<Код>вогТорговыеТочки</Код>
			<Наименование>Торговые точки</Наименование>
			<Порядок>100</Порядок>
			<КодПравилаКонвертации>ТорговыеТочки_Контрагенты                         </КодПравилаКонвертации>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.вогТорговыеТочки</ОбъектВыборки>
			<ПередВыгрузкойОбъекта>//Если Не (Объект.Вид = Справочники.вогВидыТорговыхТочек.ТорговаяТочка)  Тогда
//	Отказ = Истина;	
//КонецЕсли;
Если Объект.ПометкаУдаления Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			<ПослеВыгрузкиОбъекта>Выполнить(Алгоритмы.ПереносВзаимосвязейРолейКонтрагентов);</ПослеВыгрузкиОбъекта>
		</Правило>
		<Правило Отключить="true">
			<Код>вогЮридическиеЛица</Код>
			<Наименование>вогЮридическиеЛица</Наименование>
			<Порядок>150</Порядок>
			<КодПравилаКонвертации>ЮридическиеЛица_Контрагенты                       </КодПравилаКонвертации>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.вогЮридическиеЛица</ОбъектВыборки>
			<ПередВыгрузкойОбъекта>Если Объект.ПометкаУдаления Тогда
	Отказ = Истина;
КонецЕсли;</ПередВыгрузкойОбъекта>
			<ПослеВыгрузкиОбъекта>Выполнить(Алгоритмы.ПереносВзаимосвязейРолейКонтрагентов);</ПослеВыгрузкиОбъекта>
		</Правило>
		<Правило Отключить="true">
			<Код>ДоговорыКонтрагентов</Код>
			<Наименование>Договоры</Наименование>
			<Порядок>200</Порядок>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.ДоговорыКонтрагентов</ОбъектВыборки>
			<ПередВыгрузкойОбъекта>Если Объект.ЭтоГруппа Или Объект.ПометкаУдаления Тогда
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
	
	Договор = Объект.Ссылка;
	
	Запрос = Новый Запрос;
	//"ВЫБРАТЬ РАЗЛИЧНЫЕ
	//|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
	//|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер
	//|ПОМЕСТИТЬ ВТ_Менеджеры
	//|ИЗ
	//|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
	//|ГДЕ
	//|	РегистрМенеджерыОбъектов.Владелец = &amp;ВладелецДоговора
	//|	И РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
	//|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер)
	//|	И РегистрМенеджерыОбъектов.ДатаНачала &lt;= &amp;ДатаНачалаДоговора
	//|	И ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация = &amp;ОрганизацияДоговора
	//|;
	//|
	//|////////////////////////////////////////////////////////////////////////////////
	//|ВЫБРАТЬ РАЗЛИЧНЫЕ
	//|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
	//|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер
	//|ПОМЕСТИТЬ ВТ_Координаторы
	//|ИЗ
	//|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
	//|ГДЕ
	//|	РегистрМенеджерыОбъектов.Владелец = &amp;ВладелецДоговора
	//|	И РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
	//|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор)
	//|	И РегистрМенеджерыОбъектов.ДатаНачала &lt;= &amp;ДатаНачалаДоговора
	//|	И ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация = &amp;ОрганизацияДоговора
	//|;
	//|
	//|////////////////////////////////////////////////////////////////////////////////
	//|ВЫБРАТЬ РАЗЛИЧНЫЕ
	//|	ДоговорыКонтрагентов.Ссылка КАК Ссылка,
	//|	ВТ_Координаторы.Менеджер КАК ОтветственныйКоординатор,
	//|	ВТ_Менеджеры.Менеджер КАК ОтветственныйМенеджер,
	//|	вогКоммерческиеСоглашения.НаправлениеДеятельности КАК ВидВзаиморасчетов,
	//|	ВЫБОР
	//|		КОГДА вогКоммерческиеСоглашения.НаправлениеДеятельности = ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.Обои)
	//|			ТОГДА ДоговорыКонтрагентов.вогИдентификаторОбои
	//|		ИНАЧЕ ДоговорыКонтрагентов.вогИдентификаторПлитка
	//|	КОНЕЦ КАК ИдентификаторДоговора,
	//|	ДоговорыКонтрагентов.Код КАК Код,
	//|	ДоговорыКонтрагентов.НомерДоговора КАК Номер,
	//|	ДоговорыКонтрагентов.Наименование КАК Наименование,
	//|	ДоговорыКонтрагентов.ВидДоговора КАК ВидДоговора,
	//|	ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах КАК РасчетыВУсловныхЕдиницах,
	//|	ДоговорыКонтрагентов.ПометкаУдаления КАК ПометкаУдаления,
	//|	ДоговорыКонтрагентов.ВалютаРасчетов КАК ВалютаВзаиморасчетов,
	//|	ДоговорыКонтрагентов.вогТипДоговора КАК ТипДоговора,
	//|	ДоговорыКонтрагентов.вогФормаДоговора = ЗНАЧЕНИЕ(Перечисление.вогТипыФормДоговоров.НашаФорма) КАК ДоговорПоНашейФорме,
	//|	ДоговорыКонтрагентов.вогСтатус КАК вогСтатус,
	//|	ДоговорыКонтрагентов.ДатаДоговора КАК ДатаСозданияДоговора,
	//|	ДоговорыКонтрагентов.вогДатаОкончанияДоговора КАК СрокДействия,
	//|	ДоговорыКонтрагентов.Владелец КАК Владелец,
	//|	ДоговорыКонтрагентов.вогДатаНачалаДействия КАК Дата,
	//|	ДоговорыКонтрагентов.Организация КАК Организация,
	//|	вогКоммерческиеСоглашения.Активный КАК Активный,
	//|	вогКоммерческиеСоглашения.Ссылка КАК КС,
	//|	вогКоммерческиеСоглашения.НаправлениеДеятельности КАК НаправлениеДеятельности,
	//|	вогКоммерческиеСоглашения.Статус КАК Статус,
	//|	вогКоммерческиеСоглашения.ДатаНачалаДействия КАК ДатаНачалаДействия,
	//|	ВЫБОР
	//|		КОГДА вогКоммерческиеСоглашения.Активный = ИСТИНА
	//|			ТОГДА 200
	//|		ИНАЧЕ 100
	//|	КОНЕЦ + ВЫБОР
	//|		КОГДА ДоговорыКонтрагентов.Владелец = вогКоммерческиеСоглашения.ЮридическоеЛицо
	//|			ТОГДА 20
	//|		ИНАЧЕ 10
	//|	КОНЕЦ + ВЫБОР
	//|		КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Действует)
	//|			ТОГДА 5
	//|		ИНАЧЕ ВЫБОР
	//|				КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом)
	//|					ТОГДА 4
	//|				ИНАЧЕ ВЫБОР
	//|						КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Согласован)
	//|							ТОГДА 3
	//|						ИНАЧЕ ВЫБОР
	//|								КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.НеСогласованКлиентом)
	//|									ТОГДА 2
	//|								ИНАЧЕ 1
	//|							КОНЕЦ
	//|					КОНЕЦ
	//|			КОНЕЦ
	//|	КОНЕЦ КАК Приоритет,
	//|	вогКоммерческиеСоглашенияАдресаДоставки.ВладелецАдреса КАК ВладелецАдреса,
	//|	вогКоммерческиеСоглашения.ДатаОкончанияДействия КАК ДатаОкончанияДействия
	//|ИЗ
	//|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
	//|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.вогКоммерческиеСоглашения КАК вогКоммерческиеСоглашения
	//|			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Менеджеры КАК ВТ_Менеджеры
	//|			ПО вогКоммерческиеСоглашения.НаправлениеДеятельности = ВТ_Менеджеры.НаправлениеДеятельности
	//|			ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Координаторы КАК ВТ_Координаторы
	//|			ПО вогКоммерческиеСоглашения.НаправлениеДеятельности = ВТ_Координаторы.НаправлениеДеятельности
	//|			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.вогКоммерческиеСоглашения.АдресаДоставки КАК вогКоммерческиеСоглашенияАдресаДоставки
	//|			ПО вогКоммерческиеСоглашения.Ссылка = вогКоммерческиеСоглашенияАдресаДоставки.Ссылка
	//|		ПО ДоговорыКонтрагентов.Организация = вогКоммерческиеСоглашения.Организация
	//|			И (ДоговорыКонтрагентов.Владелец = вогКоммерческиеСоглашения.ЮридическоеЛицо
	//|				ИЛИ ДоговорыКонтрагентов.Владелец.Партнер = вогКоммерческиеСоглашения.Владелец)
	//|			И (вогКоммерческиеСоглашения.ПометкаУдаления = ЛОЖЬ)
	//|ГДЕ
	//|	вогКоммерческиеСоглашения.Ссылка ЕСТЬ НЕ NULL 
	//|	И ДоговорыКонтрагентов.Ссылка = &amp;Договор
	//|
	//|УПОРЯДОЧИТЬ ПО
	//|	Приоритет УБЫВ,
	//|	ДатаНачалаДействия УБЫВ
	//|ИТОГИ
	//|	МАКСИМУМ(Ссылка),
	//|	МАКСИМУМ(ОтветственныйКоординатор),
	//|	МАКСИМУМ(ОтветственныйМенеджер),
	//|	МАКСИМУМ(ВидВзаиморасчетов),
	//|	МАКСИМУМ(ИдентификаторДоговора),
	//|	МАКСИМУМ(Код),
	//|	МАКСИМУМ(Номер),
	//|	МАКСИМУМ(Наименование),
	//|	МАКСИМУМ(ВидДоговора),
	//|	МАКСИМУМ(РасчетыВУсловныхЕдиницах),
	//|	МАКСИМУМ(ПометкаУдаления),
	//|	МАКСИМУМ(ВалютаВзаиморасчетов),
	//|	МАКСИМУМ(ТипДоговора),
	//|	МАКСИМУМ(ДоговорПоНашейФорме),
	//|	МАКСИМУМ(вогСтатус),
	//|	МАКСИМУМ(ДатаСозданияДоговора),
	//|	МАКСИМУМ(СрокДействия),
	//|	МАКСИМУМ(Владелец),
	//|	МАКСИМУМ(Дата),
	//|	МАКСИМУМ(Организация),
	//|	МАКСИМУМ(Активный),
	//|	МАКСИМУМ(Статус),
	//|	МАКСИМУМ(ДатаНачалаДействия),
	//|	МАКСИМУМ(Приоритет)
	//|ПО
	//|	НаправлениеДеятельности,
	//|	КС";
	
	Запрос.Текст = 
		"ВЫБРАТЬ РАЗЛИЧНЫЕ
		|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
		|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер
		|ПОМЕСТИТЬ ВТ_Менеджеры
		|ИЗ
		|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
		|ГДЕ
		|	РегистрМенеджерыОбъектов.Владелец = &amp;ВладелецДоговора
		|	И РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
		|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер)
		|	И РегистрМенеджерыОбъектов.ДатаНачала &lt;= &amp;ДатаНачалаДоговора
		|	И ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация = &amp;ОрганизацияДоговора
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ РАЗЛИЧНЫЕ
		|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
		|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер
		|ПОМЕСТИТЬ ВТ_Координаторы
		|ИЗ
		|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
		|ГДЕ
		|	РегистрМенеджерыОбъектов.Владелец = &amp;ВладелецДоговора
		|	И РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
		|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор)
		|	И РегистрМенеджерыОбъектов.ДатаНачала &lt;= &amp;ДатаНачалаДоговора
		|	И ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация = &amp;ОрганизацияДоговора
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ РАЗЛИЧНЫЕ
		|	Договоры.Ссылка КАК Ссылка,
		|	ВТ_Координаторы.Менеджер КАК ОтветственныйКоординатор,
		|	ВТ_Менеджеры.Менеджер КАК ОтветственныйМенеджер,
		|	Договоры.КоммерческоеСоглашение.НаправлениеДеятельности КАК ВидВзаиморасчетов,
		|	ВЫБОР
		|		КОГДА Договоры.КоммерческоеСоглашение.НаправлениеДеятельности = ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.Обои)
		|			ТОГДА Договоры.Ссылка.вогИдентификаторОбои
		|		ИНАЧЕ Договоры.Ссылка.вогИдентификаторПлитка
		|	КОНЕЦ КАК ИдентификаторДоговора,
		|	Договоры.Ссылка.Код КАК Код,
		|	Договоры.Ссылка.НомерДоговора КАК Номер,
		|	Договоры.Ссылка.Наименование КАК Наименование,
		|	Договоры.Ссылка.ВидДоговора КАК ВидДоговора,
		|	Договоры.Ссылка.РасчетыВУсловныхЕдиницах КАК РасчетыВУсловныхЕдиницах,
		|	Договоры.Ссылка.ПометкаУдаления КАК ПометкаУдаления,
		|	Договоры.Ссылка.ВалютаРасчетов КАК ВалютаВзаиморасчетов,
		|	Договоры.Ссылка.вогТипДоговора КАК ТипДоговора,
		|	Договоры.Ссылка.вогФормаДоговора = ЗНАЧЕНИЕ(Перечисление.вогТипыФормДоговоров.НашаФорма) КАК ДоговорПоНашейФорме,
		|	Договоры.Ссылка.вогСтатус КАК вогСтатус,
		|	Договоры.Ссылка.ДатаДоговора КАК ДатаСозданияДоговора,
		|	Договоры.Ссылка.вогДатаОкончанияДоговора КАК СрокДействия,
		|	Договоры.Ссылка.Владелец КАК Владелец,
		|	Договоры.Ссылка.вогДатаНачалаДействия КАК Дата,
		|	Договоры.Ссылка.Организация КАК Организация,
		|	ВЫБОР
		|		КОГДА Договоры.Ссылка.вогАктивный
		|				И Договоры.КоммерческоеСоглашение.Активный
		|			ТОГДА ИСТИНА
		|		ИНАЧЕ ЛОЖЬ
		|	КОНЕЦ КАК Активный,
		|	Договоры.КоммерческоеСоглашение КАК КС,
		|	Договоры.КоммерческоеСоглашение.НаправлениеДеятельности КАК НаправлениеДеятельности,
		|	Договоры.КоммерческоеСоглашение.Статус КАК Статус,
		|	Договоры.КоммерческоеСоглашение.ДатаНачалаДействия КАК ДатаНачалаДействия,
		|	ВЫБОР
		|		КОГДА Договоры.КоммерческоеСоглашение.Активный = ИСТИНА
		|			ТОГДА 200
		|		ИНАЧЕ 100
		|	КОНЕЦ + ВЫБОР
		|		КОГДА Договоры.Ссылка.Владелец = Договоры.КоммерческоеСоглашение.ЮридическоеЛицо
		|			ТОГДА 20
		|		ИНАЧЕ 10
		|	КОНЕЦ + ВЫБОР
		|		КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Действует)
		|			ТОГДА 5
		|		ИНАЧЕ ВЫБОР
		|				КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом)
		|					ТОГДА 4
		|				ИНАЧЕ ВЫБОР
		|						КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Согласован)
		|							ТОГДА 3
		|						ИНАЧЕ ВЫБОР
		|								КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.НеСогласованКлиентом)
		|									ТОГДА 2
		|								ИНАЧЕ 1
		|							КОНЕЦ
		|					КОНЕЦ
		|			КОНЕЦ
		|	КОНЕЦ КАК Приоритет,
		|	вогКоммерческиеСоглашенияАдресаДоставки.ВладелецАдреса КАК ВладелецАдреса,
		|	Договоры.КоммерческоеСоглашение.ДатаОкончанияДействия КАК ДатаОкончанияДействия
		|ИЗ
		|	Справочник.ДоговорыКонтрагентов.КоммерческиеСоглашения КАК Договоры
		|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Менеджеры КАК ВТ_Менеджеры
		|		ПО Договоры.КоммерческоеСоглашение.НаправлениеДеятельности = ВТ_Менеджеры.НаправлениеДеятельности
		|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Координаторы КАК ВТ_Координаторы
		|		ПО Договоры.КоммерческоеСоглашение.НаправлениеДеятельности = ВТ_Координаторы.НаправлениеДеятельности
		|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.вогКоммерческиеСоглашения.АдресаДоставки КАК вогКоммерческиеСоглашенияАдресаДоставки
		|		ПО Договоры.КоммерческоеСоглашение = вогКоммерческиеСоглашенияАдресаДоставки.Ссылка
		|ГДЕ
		|	Договоры.Ссылка = &amp;Договор
		|	И Договоры.КоммерческоеСоглашение.ПометкаУдаления = ЛОЖЬ
		|
		|УПОРЯДОЧИТЬ ПО
		|	Приоритет УБЫВ,
		|	ДатаНачалаДействия УБЫВ
		|ИТОГИ
		|	МАКСИМУМ(Ссылка),
		|	МАКСИМУМ(ОтветственныйКоординатор),
		|	МАКСИМУМ(ОтветственныйМенеджер),
		|	МАКСИМУМ(ВидВзаиморасчетов),
		|	МАКСИМУМ(ИдентификаторДоговора),
		|	МАКСИМУМ(Код),
		|	МАКСИМУМ(Номер),
		|	МАКСИМУМ(Наименование),
		|	МАКСИМУМ(ВидДоговора),
		|	МАКСИМУМ(РасчетыВУсловныхЕдиницах),
		|	МАКСИМУМ(ПометкаУдаления),
		|	МАКСИМУМ(ВалютаВзаиморасчетов),
		|	МАКСИМУМ(ТипДоговора),
		|	МАКСИМУМ(ДоговорПоНашейФорме),
		|	МАКСИМУМ(вогСтатус),
		|	МАКСИМУМ(ДатаСозданияДоговора),
		|	МАКСИМУМ(СрокДействия),
		|	МАКСИМУМ(Владелец),
		|	МАКСИМУМ(Дата),
		|	МАКСИМУМ(Организация),
		|	МАКСИМУМ(Активный),
		|	МАКСИМУМ(Статус),
		|	МАКСИМУМ(ДатаНачалаДействия),
		|	МАКСИМУМ(Приоритет)
		|ПО
		|	НаправлениеДеятельности,
		|	КС";
	
	Запрос.УстановитьПараметр("Договор", Договор);
	Запрос.УстановитьПараметр("ВладелецДоговора", Договор.Владелец);
	Запрос.УстановитьПараметр("ДатаНачалаДоговора", Договор.вогДатаНачалаДействия);
	Запрос.УстановитьПараметр("ОрганизацияДоговора", Договор.Организация);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВыборкаНаправлениеДеятельности = РезультатЗапроса.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
	Пока ВыборкаНаправлениеДеятельности.Следующий() цикл
		
		МассивУсловийДоставки = Новый Массив;
		ДатаНачалаДействияУсловийДоставки = Неопределено;
		
		ВыборкаКС = ВыборкаНаправлениеДеятельности.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		
		Пока ВыборкаКС.Следующий() цикл
			ВыборкаТорговыеТочки = ВыборкаКС.Выбрать();
			Пока ВыборкаТорговыеТочки.Следующий() цикл
				Если ВыборкаТорговыеТочки.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Действует ИЛИ
					 ВыборкаТорговыеТочки.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом ИЛИ
					 ВыборкаТорговыеТочки.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Согласован Тогда
					Если ЗначениеЗаполнено(ВыборкаТорговыеТочки.ВладелецАдреса) тогда				
						Если ТипЗнч(ВыборкаТорговыеТочки.ВладелецАдреса) = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
							
							ДатаНачалаДействияУсловийДоставки = ?(ДатаНачалаДействияУсловийДоставки = Неопределено, ВыборкаТорговыеТочки.ДатаНачалаДействия, Мин(ДатаНачалаДействияУсловийДоставки, ВыборкаТорговыеТочки.ДатаНачалаДействия));
							
							ИсходящиеДанныеДоставка = Новый Структура("Период, Контрагент, Организация, ВидВзаиморасчетов, ВозможнаДоставка");
							ИсходящиеДанныеДоставка.Период = ВыборкаТорговыеТочки.ДатаНачалаДействия;
							ИсходящиеДанныеДоставка.Контрагент = ВыборкаТорговыеТочки.ВладелецАдреса;
							ИсходящиеДанныеДоставка.Организация = ВыборкаТорговыеТочки.Организация;
							ИсходящиеДанныеДоставка.ВидВзаиморасчетов = ВыборкаТорговыеТочки.ВидВзаиморасчетов;
							ИсходящиеДанныеДоставка.ВозможнаДоставка = Истина;
							
							МассивУсловийДоставки.Добавить(ИсходящиеДанныеДоставка);
							
							Если ВыборкаТорговыеТочки.ДатаОкончанияДействия &lt;&gt; '00010101' тогда
								ИсходящиеДанныеДоставка = Новый Структура("Период, Контрагент, Организация, ВидВзаиморасчетов, ВозможнаДоставка");
								ИсходящиеДанныеДоставка.Период = ВыборкаТорговыеТочки.ДатаОкончанияДействия;
								ИсходящиеДанныеДоставка.Контрагент = ВыборкаТорговыеТочки.ВладелецАдреса;
								ИсходящиеДанныеДоставка.Организация = ВыборкаТорговыеТочки.Организация;
								ИсходящиеДанныеДоставка.ВидВзаиморасчетов = ВыборкаТорговыеТочки.ВидВзаиморасчетов;
								ИсходящиеДанныеДоставка.ВозможнаДоставка = Ложь;								
							КонецЕсли;	
							
						КонецЕсли;	
					КонецЕсли;
				КонецЕсли;	
			КонецЦикла;
			
		КонецЦикла;	
	
		ВыборкаКС = ВыборкаНаправлениеДеятельности.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
		Если ВыборкаКС.Следующий() тогда
			
			ИсходящиеДанные = Новый Структура;
			
			Для Каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
				ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, ВыборкаКС[КолонкаРезультата.Имя]);
			КонецЦикла;
			
			ИсходящиеДанные.Вставить("ИзменятьУсловияДоставки", ?(ДатаНачалаДействияУсловийДоставки = Неопределено, Ложь, Истина));
			ИсходящиеДанные.Вставить("ДатаНачалаДействияУсловийДоставки", ДатаНачалаДействияУсловийДоставки);
			
			ИдентификаторДоговора 	= Новый УникальныйИдентификатор(ВыборкаКС.ИдентификаторДоговора);
			ДоговорСсылка 			= Справочники.ДоговорыКонтрагентов.ПолучитьСсылку(ИдентификаторДоговора);
			
			Если ИсходящиеДанные.ТипДоговора = Справочники.вогТипыДоговоровКонтрагентов.ДоговорПоставкиТовараРазовый тогда
				ИсходящиеДанные.ТипДоговора = Справочники.вогТипыДоговоровКонтрагентов.ДоговорПоставкиТовара;
			КонецЕсли;
			
			ШаблонНаименования = НСтр("ru = '%1 (%2)'");
			ИсходящиеДанные.Наименование = СтрШаблон(
				ШаблонНаименования,
				ВыборкаКС.Наименование,
				ВыборкаКС.ВидВзаиморасчетов);
			
			ВыгрузитьПоПравилу(ДоговорСсылка,, ИсходящиеДанные,, "ДоговорыКонтрагентов_ЮрЛица");
			
			Для каждого ЭлементМассива из МассивУсловийДоставки цикл
				ВыгрузитьПоПравилу(,, ЭлементМассива,, "УсловияДоставки");
			КонецЦикла;	
			
			//ВыборкаТорговыеТочки = ВыборкаКС.Выбрать();
			//
			//Пока ВыборкаТорговыеТочки.Следующий() цикл
			//	
			//	Если ЗначениеЗаполнено(ВыборкаТорговыеТочки.ВладелецАдреса) тогда				
			//		
			//		Если ТипЗнч(ВыборкаТорговыеТочки.ВладелецАдреса) = Тип("СправочникСсылка.вогТорговыеТочки") Тогда						
			//			
			//			//ВыгрузитьПоПравилу(ВыборкаТорговыеТочки.ВладелецАдреса,,,, "ТорговыеТочки_Контрагенты");
			//			
			//			ИсходящиеДанныеДоставка = Новый Структура("Период, Контрагент, Организация, ВидВзаиморасчетов, ВозможнаДоставка");
			//			ИсходящиеДанныеДоставка.Период = ВыборкаТорговыеТочки.ДатаНачалаДействия;
			//			ИсходящиеДанныеДоставка.Контрагент = ВыборкаТорговыеТочки.ВладелецАдреса;
			//			ИсходящиеДанныеДоставка.Организация = ВыборкаТорговыеТочки.Организация;
			//			ИсходящиеДанныеДоставка.ВидВзаиморасчетов = ВыборкаТорговыеТочки.ВидВзаиморасчетов;
			//			ИсходящиеДанныеДоставка.ВозможнаДоставка = Истина;
			//			
			//			ВыгрузитьПоПравилу(,, ИсходящиеДанныеДоставка,, "УсловияДоставки");
			//			
			//		КонецЕсли;					
			//		
			//	КонецЕсли;				
			//		
			//КонецЦикла;				
			
		КонецЕсли;
		
	КонецЦикла;	
	
КонецЕсли;

Отказ = Истина;</ПередВыгрузкойОбъекта>
		</Правило>
		<Правило Отключить="true">
			<Код>БанковскиеСчета</Код>
			<Наименование>Банковские счета</Наименование>
			<Порядок>250</Порядок>
			<КодПравилаКонвертации>БанковскиеСчета                                   </КодПравилаКонвертации>
			<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
			<ОбъектВыборки>СправочникСсылка.БанковскиеСчета</ОбъектВыборки>
		</Правило>
		<Группа Отключить="true">
			<Код>Служебное</Код>
			<Наименование>Служебное</Наименование>
			<Порядок>300</Порядок>
		</Группа>
		<Группа Отключить="true">
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>350</Порядок>
		</Группа>
		<Правило Отключить="true">
			<Код>МенеджерыКонтрагентов</Код>
			<Наименование>МенеджерыКонтрагентов</Наименование>
			<Порядок>400</Порядок>
			<СпособОтбораДанных>ПроизвольныйАлгоритм</СпособОтбораДанных>
			<ВыбиратьДанныеДляВыгрузкиОднимЗапросом>true</ВыбиратьДанныеДляВыгрузкиОднимЗапросом>
			<ПередОбработкойПравила>
ТаблицаОбъектыВыгрузки = ЗначениеИзСтрокиВнутр(Параметры.ОбъектыВыгрузки);

Запрос = Новый Запрос;
Запрос.Текст = 
//"ВЫБРАТЬ
//|	вогОбъектыДляОбмена.Объект КАК Объект
//|ИЗ
//|	РегистрСведений.вогОбъектыДляОбмена КАК вогОбъектыДляОбмена
//|ГДЕ
//|	вогОбъектыДляОбмена.Состояние В(&amp;Состояния)";

"ВЫБРАТЬ
|	ТЗ_ОбъектыВыгрузки.ОбъектВыгрузки КАК ОбъектВыгрузки
|ПОМЕСТИТЬ ВТ_ОбъектыВыгрузки
|ИЗ
|	&amp;ТаблицаОбъектыВыгрузки КАК ТЗ_ОбъектыВыгрузки
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	вогТорговыеТочки.Ссылка КАК Объект
|ИЗ
|	Справочник.вогТорговыеТочки КАК вогТорговыеТочки
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ОбъектыВыгрузки КАК ВТ_ОбъектыВыгрузки
|		ПО вогТорговыеТочки.Ссылка = ВТ_ОбъектыВыгрузки.ОбъектВыгрузки
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	вогЮридическиеЛица.Ссылка
|ИЗ
|	Справочник.вогЮридическиеЛица КАК вогЮридическиеЛица
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ОбъектыВыгрузки КАК ВТ_ОбъектыВыгрузки
|		ПО вогЮридическиеЛица.Ссылка = ВТ_ОбъектыВыгрузки.ОбъектВыгрузки";

//Состояния = Новый Массив;
//Состояния.Добавить(Перечисления.вогСостоянияОбмена.Зарегистрирован);
//Состояния.Добавить(Перечисления.вогСостоянияОбмена.Ошибка);

//Запрос.УстановитьПараметр("Состояния", Состояния);
Запрос.УстановитьПараметр("ТаблицаОбъектыВыгрузки", ТаблицаОбъектыВыгрузки);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	ВыгрузитьПоПравилу(ВыборкаДетальныеЗаписи.Объект,,,, "МенеджерыКонтрагентов");		
КонецЦикла;</ПередОбработкойПравила>
		</Правило>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ВыгрузкаГоловныхКонтрагентов" ИспользуетсяПриЗагрузке="false">
			<Текст>
Если ЗначениеЗаполнено(Источник.ГоловноеЮрЛицо) Тогда
	
	Для Каждого СтрокаТЧ Из Источник.Подразделения Цикл
		
		Организация = Справочники.СтруктураПредприятия.ПолучитьОрганизациюПоПодразделению(СтрокаТЧ.Подразделение);
		
		Если Организация &lt;&gt; Справочники.Организации.ПустаяСсылка() Тогда
			
			ИсходящиеДанные = Новый Структура;
			ИсходящиеДанные.Вставить("Организация"		 , Организация);
			ИсходящиеДанные.Вставить("Контрагент" 		 , Источник.Ссылка);
			ИсходящиеДанные.Вставить("ГоловнойКонтрагент", Источник.ГоловноеЮрЛицо);
			
			ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "ГоловныеКонтрагентыПоОрганизациям");
			
		КонецЕсли;

	КонецЦикла;
	
КонецЕсли;</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ВыгрузкаДокументовКонтактныхЛиц" ИспользуетсяПриЗагрузке="false">
			<Текст>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ДокументыФизическихЛицСрезПоследних.Период КАК Период,
|	ДокументыФизическихЛицСрезПоследних.Физлицо КАК ФизЛицо,
|	ДокументыФизическихЛицСрезПоследних.ВидДокумента КАК ДокументВид,
|	ДокументыФизическихЛицСрезПоследних.Серия КАК ДокументСерия,
|	ДокументыФизическихЛицСрезПоследних.Номер КАК ДокументНомер,
|	ДокументыФизическихЛицСрезПоследних.ДатаВыдачи КАК ДокументДатаВыдачи,
|	ДокументыФизическихЛицСрезПоследних.КемВыдан КАК ДокументКемВыдан,
|	ДокументыФизическихЛицСрезПоследних.КодПодразделения КАК ДокументКодПодразделения
|ИЗ
|	РегистрСведений.ДокументыФизическихЛиц.СрезПоследних КАК ДокументыФизическихЛицСрезПоследних
|ГДЕ
|	ДокументыФизическихЛицСрезПоследних.Физлицо = &amp;Физлицо";

Запрос.УстановитьПараметр("Физлицо", ВходящиеДанные.КонтактноеЛицо);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	
	ИсходящиеДанные = Новый Структура;
	
	Для Каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
		ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, ВыборкаДетальныеЗаписи[КолонкаРезультата.Имя]);
	КонецЦикла;
	
	ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "ПаспортныеДанныеФизЛиц");
	
КонецЦикла;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ВыгрузкаКонтактнойИнформации" ИспользуетсяПриЗагрузке="false">
			<Текст>
Строки = Новый ТаблицаЗначений;
Строки.Колонки.Добавить("Ссылка");
Строки.Колонки.Добавить("Объект");
Строки.Колонки.Добавить("Вид");
Строки.Колонки.Добавить("Тип");
Строки.Колонки.Добавить("Поле1");
Строки.Колонки.Добавить("Поле2");
Строки.Колонки.Добавить("Поле3");
Строки.Колонки.Добавить("Поле4");
Строки.Колонки.Добавить("Поле5");
Строки.Колонки.Добавить("Поле6");
Строки.Колонки.Добавить("Поле7");
Строки.Колонки.Добавить("Поле8");
Строки.Колонки.Добавить("Поле9");
Строки.Колонки.Добавить("Поле10");
Строки.Колонки.Добавить("ТипДома");
Строки.Колонки.Добавить("ТипКвартиры");
Строки.Колонки.Добавить("ТипКорпуса");
Строки.Колонки.Добавить("Представление");
Строки.Колонки.Добавить("Комментарий");
Строки.Колонки.Добавить("ЭтоПроизвольнаяСтрока");

// Типы дома, корпуса и квартиры, которые поддерживаются в УТ
ТипыДомов = Новый Массив;
ТипыДомов.Добавить("дом");
ТипыДомов.Добавить("владение");

ТипыКорпусов = Новый Массив;
ТипыКорпусов.Добавить("корпус");
ТипыКорпусов.Добавить("строение");

ТипыКвартир = Новый Массив;
ТипыКвартир.Добавить("офис");
ТипыКвартир.Добавить("квартира");

// Заполнение набора
Для Каждого СтрокаКИ Из Источник.КонтактнаяИнформация Цикл
	
	Если ТипЗнч(Источник) &lt;&gt; Тип("СправочникСсылка.вогТорговыеТочки")
		И СтрокаКИ.Вид = Справочники.ВидыКонтактнойИнформации.Месторасположение Тогда
		Продолжить;
	КонецЕсли;
	
	// получаем структуру значений полей
	// ++ VOG Солодов В.В. 03.03.2020 CRM-196
	ЗначенияПолей	 = РаботаСАдресами.ПредыдущийФорматКонтактнойИнформацииXML(СтрокаКИ.ЗначенияПолей, Истина);
	// До изменения
	//ЗначенияПолей	 = УправлениеКонтактнойИнформацией.ПредыдущийФорматКонтактнойИнформацииXML(СтрокаКИ.ЗначенияПолей, Истина);
	// -- VOG Солодов В.В. 03.03.2020
	СтруктураПолейКИ = Новый Структура;
	Для Сч = 1 По СтрЧислоСтрок(ЗначенияПолей) Цикл
		Стр = СтрПолучитьСтроку(ЗначенияПолей, Сч);
		Поз = Найти(Стр, "=");
		Если Поз &lt;&gt; 0 Тогда
			КлючЭлемента = Лев(Стр, Поз-1);
			СтруктураПолейКИ.Вставить(КлючЭлемента, СокрЛП(Сред(Стр, Поз+1)));
		КонецЕсли;
	КонецЦикла;
	
	// ++ проверка правильности формирования адреса
	//ТребуетсяПроверкаУлицы = (СтрокаКИ.Вид = Справочники.ВидыКонтактнойИнформации.АдресТорговойТочки 
	//	Или СтрокаКИ.Вид = Справочники.ВидыКонтактнойИнформации.АдресЮридическогоЛица 
	//	Или СтрокаКИ.Вид = Справочники.ВидыКонтактнойИнформации.АдресРаспределительногоЦентра);
		
	//Если ТребуетсяПроверкаУлицы Тогда	
			
		ЗначениеУлица = Неопределено;
		
		Если ЗначениеЗаполнено(ЗначенияПолей) Тогда
			
			Результат 			= РаботаСАдресами.ПредыдущаяСтруктураКонтактнойИнформацииXML(ЗначенияПолей, СтрокаКИ.Вид);
			Если Результат.Свойство("Улица") Тогда
				ЗначениеУлица 	= Результат.Улица;
			КонецЕсли;
		
			//МассивАдреса = СтроковыеФункцииКлиентСервер.РазложитьСтрокуВМассивПодстрок(ЗначенияПолей, Символы.ПС);
			//
			//Если МассивАдреса.Количество() &gt;= 9 Тогда
			//	
			//	МассивУлица	= СтроковыеФункцииКлиентСервер.РазложитьСтрокуВМассивПодстрок(МассивАдреса[8], "=");
			//	
			//	Если МассивУлица.Количество() &gt;= 2 
			//		И МассивУлица[0] = "Улица" Тогда
			//		
			//		ЗначениеУлица = МассивУлица[1];
			//		
			//	КонецЕсли;
			//	
			//	Если ЗначениеУлица = Неопределено Тогда
			//	
			//		МассивУлица	= СтроковыеФункцииКлиентСервер.РазложитьСтрокуВМассивПодстрок(МассивАдреса[4], "=");
			//	
			//		Если МассивУлица.Количество() &gt;= 2 
			//			И МассивУлица[0] = "Улица" Тогда
			//		
			//			ЗначениеУлица = МассивУлица[1];
			//		
			//		КонецЕсли;
			//	
			//	КонецЕсли;
			//	
			//КонецЕсли;
			
		КонецЕсли;
		
	//КонецЕсли;
	
	ПроверкаПройдена = ЗначениеЗаполнено(ЗначенияПолей) И ЗначениеЗаполнено(ЗначениеУлица);
	//ПроверкаПройдена = ЗначениеЗаполнено(ЗначенияПолей) И (Не ТребуетсяПроверкаУлицы Или ЗначениеЗаполнено(ЗначениеУлица)); // VOG Солодов В.В. 12.07.2019 task 446
	// --
	
	СтрокаНабора = Строки.Добавить();
	СтрокаНабора.Объект                = Источник.Ссылка;
	СтрокаНабора.Вид                   = СтрокаКИ.Вид;
	СтрокаНабора.Тип                   = СтрокаКИ.Тип;
	СтрокаНабора.Представление         = СтрокаКИ.Представление;
	СтрокаНабора.ЭтоПроизвольнаяСтрока = НЕ ЗначениеЗаполнено(ЗначенияПолей) ИЛИ НЕ ЗначениеЗаполнено(ЗначениеУлица);
	
	Если СтрокаКИ.Тип = Перечисления.ТипыКонтактнойИнформации.Факс
		ИЛИ СтрокаКИ.Тип = Перечисления.ТипыКонтактнойИнформации.Телефон Тогда
		СтруктураПолейКИ.Свойство("КодСтраны", СтрокаНабора.Поле1);
		СтруктураПолейКИ.Свойство("КодГорода", СтрокаНабора.Поле2);
		СтруктураПолейКИ.Свойство("НомерТелефона", СтрокаНабора.Поле3);
		СтруктураПолейКИ.Свойство("Добавочный", СтрокаНабора.Поле4);
	ИначеЕсли СтрокаКИ.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес 
		И ПроверкаПройдена Тогда // ++ VOG Солодов В.В. 12.07.2019 task 446
		СтруктураПолейКИ.Свойство("Индекс", СтрокаНабора.Поле1);
		СтруктураПолейКИ.Свойство("Регион", СтрокаНабора.Поле2);
		СтруктураПолейКИ.Свойство("Район", СтрокаНабора.Поле3);
		СтруктураПолейКИ.Свойство("Город", СтрокаНабора.Поле4);
		СтруктураПолейКИ.Свойство("НаселенныйПункт", СтрокаНабора.Поле5);
		СтруктураПолейКИ.Свойство("Улица", СтрокаНабора.Поле6);
		СтруктураПолейКИ.Свойство("Дом", СтрокаНабора.Поле7);
		СтруктураПолейКИ.Свойство("Корпус", СтрокаНабора.Поле8);
		СтруктураПолейКИ.Свойство("Квартира", СтрокаНабора.Поле9);
		
		СтруктураПолейКИ.Свойство("ТипДома", СтрокаНабора.ТипДома);
		СтрокаНабора.ТипДома = ?(ТипыДомов.Найти(НРег(СтрокаНабора.ТипДома)) = Неопределено, Неопределено, СтрокаНабора.ТипДома);
		
		СтруктураПолейКИ.Свойство("ТипКорпуса", СтрокаНабора.ТипКорпуса);
		СтрокаНабора.ТипКорпуса = ?(ТипыКорпусов.Найти(НРег(СтрокаНабора.ТипКорпуса)) = Неопределено, Неопределено, СтрокаНабора.ТипКорпуса);
		
		СтруктураПолейКИ.Свойство("ТипКвартиры", СтрокаНабора.ТипКвартиры);
		Если СтрокаНабора.ТипКвартиры = "кв." Тогда
			СтрокаНабора.ТипКвартиры = "Квартира";
		ИначеЕсли СтрокаНабора.ТипКвартиры = "оф." Тогда
			СтрокаНабора.ТипКвартиры = "Офис";
		КонецЕсли;
		СтрокаНабора.ТипКвартиры = ?(ТипыКвартир.Найти(НРег(СтрокаНабора.ТипКвартиры)) = Неопределено, Неопределено, СтрокаНабора.ТипКвартиры);
		
	КонецЕсли;
	
	СтруктураПолейКИ.Свойство("Комментарий", СтрокаНабора.Комментарий);
	
КонецЦикла;

// Выгрузка набора записей
Для Каждого СтрокаНабора Из Строки Цикл
	
	//+КонтактнаяИнформация
	ИсходящиеДанные = ОбщегоНазначения.СтрокаТаблицыЗначенийВСтруктуру(СтрокаНабора);
	ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "КонтактнаяИнформация");
	//-КонтактнаяИнформация
	
	//+ ВГ Информация о контрагенте
	Если ТипЗнч(Источник) = Тип("СправочникСсылка.вогТорговыеТочки")
		ИЛИ ТипЗнч(Источник) = Тип("СправочникСсылка.вогЮридическиеЛица") 
		Или ТипЗнч(Источник) = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
		
		ТипТелефон = Перечисления.ТипыКонтактнойИнформации.Телефон;
		ТипАдрес   = Перечисления.ТипыКонтактнойИнформации.Адрес;
		
		Если ТипЗнч(Источник) = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
			ВидТелефон = Справочники.ВидыКонтактнойИнформации.ТелефонЮридическогоЛица;
			ВидЮрАдрес = Справочники.ВидыКонтактнойИнформации.ЮрАдресЮридическогоЛица;
			ВидФкАдрес = Справочники.ВидыКонтактнойИнформации.АдресЮридическогоЛица;
		ИначеЕсли ТипЗнч(Источник) = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
			ВидТелефон = Справочники.ВидыКонтактнойИнформации.ТелефонТорговойТочки;
			ВидЮрАдрес = Справочники.ВидыКонтактнойИнформации.ЮрАдресТорговойТочки;
			ВидФкАдрес = Справочники.ВидыКонтактнойИнформации.АдресТорговойТочки;
		ИначеЕсли ТипЗнч(Источник) = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
			ВидТелефон = Справочники.ВидыКонтактнойИнформации.ТелефонРаспределительногоЦентра;
			ВидФкАдрес = Справочники.ВидыКонтактнойИнформации.АдресРаспределительногоЦентра;
			Отбор = Новый Структура("Наименование", "Юридический адрес контрагента");
			ВыборкаЮрАдрес = Справочники.ВидыКонтактнойИнформации.Выбрать(Справочники.ВидыКонтактнойИнформации.СправочниквогРаспределительныеЦентры, , Отбор);
			Пока ВыборкаЮрАдрес.Следующий() Цикл
				ВидЮрАдрес = ВыборкаЮрАдрес.Ссылка;	
			КонецЦикла;
		КонецЕсли;
		
		ТипПоля = Неопределено;
		 
		Если	(СтрокаНабора.Тип = ТипТелефон
					И СтрокаНабора.Вид = ВидТелефон) 
			     ИЛИ
				(СтрокаНабора.Тип = ТипАдрес
					И СтрокаНабора.Вид = ВидЮрАдрес) 
			    ИЛИ
				(СтрокаНабора.Тип = ТипАдрес
					И СтрокаНабора.Вид = ВидФкАдрес) Тогда
			
			ТипПоля = ?(СтрокаНабора.Вид = ВидТелефон, "Телефон", ТипПоля);		
			ТипПоля = ?(СтрокаНабора.Вид = ВидЮрАдрес, "ЮридическийАдрес", ТипПоля);		
			ТипПоля = ?(СтрокаНабора.Вид = ВидФкАдрес, "ФактическийАдрес", ТипПоля);		
					
			ИсходящиеДанные = Новый Структура("Период,Контрагент,ТипПоля,Значение,Комментарий"
				,ТекущаяДата()
				,Источник.Ссылка
				,ТипПоля
				,СтрокаНабора.Представление
				,СтрокаНабора.Комментарий);
				
			ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "ВГ_ИнформацияОКонтрагенте");
		КонецЕсли; 	
	КонецЕсли;
	//- ВГ Информация о контрагенте
	
КонецЦикла;

Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	вогИзменениеРеквизитовСДаты.Период КАК Период,
|	вогИзменениеРеквизитовСДаты.ОбъектСвязи КАК ОбъектСвязи,
|	вогИзменениеРеквизитовСДаты.ТипПоля КАК ТипПоля,
|	вогИзменениеРеквизитовСДаты.Значение КАК Значение
|ИЗ
|	РегистрСведений.вогИзменениеРеквизитовСДаты КАК вогИзменениеРеквизитовСДаты
|ГДЕ
|	вогИзменениеРеквизитовСДаты.ОбъектСвязи = &amp;ОбъектСвязи";
	
Запрос.УстановитьПараметр("ОбъектСвязи", Источник.Ссылка);
	
Выборка = Запрос.Выполнить ().Выбрать ();

Пока Выборка.Следующий () Цикл
	
	ИсходящиеДанные = Новый Структура;
	ИсходящиеДанные.Вставить("Период", 		Выборка.Период);
	ИсходящиеДанные.Вставить("Контрагент", 	Выборка.ОбъектСвязи);
	ИсходящиеДанные.Вставить("ТипПоля", 	Выборка.ТипПоля);
	ИсходящиеДанные.Вставить("Значение", 	Выборка.Значение);
				
	ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "ИнформацияОКонтрагенте");
		
КонецЦикла;</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ВыгрузкаСвязейКонтактныхЛиц" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос;
ТекстЗапроса = 
"ВЫБРАТЬ
	|	вогСвязиКонтактныхЛицСрезПоследних.ОбъектСвязи КАК Владелец,
	|	вогСвязиКонтактныхЛицСрезПоследних.КонтактноеЛицо КАК КонтактноеЛицо,
	|	вогСвязиКонтактныхЛицСрезПоследних.CRM_Должность КАК Должность,
	|	вогСвязиКонтактныхЛицСрезПоследних.CRM_РольКонтактногоЛица КАК РольКонтактногоЛица,
	|	вогСвязиКонтактныхЛицСрезПоследних.CRM_Состояние КАК Состояние,
	|	вогСвязиКонтактныхЛицСрезПоследних.Период КАК ДатаИзмененияСостояния
	|ИЗ
	|	РегистрСведений.вогСвязиКонтактныхЛиц.СрезПоследних(
	|			, 
	|			%ТекстУсловия%
	|				И CRM_РольКонтактногоЛица В (ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.ГенеральныйДиректор), ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.ПодписантДоговора))) КАК вогСвязиКонтактныхЛицСрезПоследних
	|ГДЕ
	|	ВЫРАЗИТЬ(вогСвязиКонтактныхЛицСрезПоследних.КонтактноеЛицо КАК Справочник.КонтактныеЛицаПартнеров).ПометкаУдаления = ЛОЖЬ";

Если ТипЗнч(Источник.Ссылка) = Тип("СправочникСсылка.КонтактныеЛицаПартнеров") Тогда
	
	ТекстЗапроса = СтрЗаменить(ТекстЗапроса, "%ТекстУсловия%", "КонтактноеЛицо = &amp;КонтактноеЛицо");
	Запрос.УстановитьПараметр("КонтактноеЛицо", Источник.Ссылка);
	
//ИначеЕсли ТипЗнч(Источник.Ссылка) = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда	
//	
//	ТекстЗапроса = СтрЗаменить(ТекстЗапроса, "%ТекстУсловия%", "ОбъектСвязи = &amp;ЮрЛицоСсылка");
//	Запрос.УстановитьПараметр("ЮрЛицоСсылка", Источник.Ссылка);

// + Тищенко В.В.
Иначе
	ТекстЗапроса = СтрЗаменить(ТекстЗапроса, "%ТекстУсловия%", "ОбъектСвязи = &amp;ЮрЛицоСсылка");
	Запрос.УстановитьПараметр("ЮрЛицоСсылка", Источник.Ссылка);
// - Тищенко В.В.

КонецЕсли;

Запрос.Текст = ТекстЗапроса;

Если ЗначениеЗаполнено(Запрос.Текст) Тогда
	
	РезультатЗапроса = Запрос.Выполнить();
	Выборка = РезультатЗапроса.Выбрать();
	
	Пока Выборка.Следующий() Цикл
		ИсходящиеДанные = Новый Структура;
		Для каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
			ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, Выборка[КолонкаРезультата.Имя]);
		КонецЦикла;
		
		ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "КонтактныеЛицаКонтрагентов");
		
	КонецЦикла;
	
КонецЕсли;</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ВыгрузкаЮрРеквизитов" ИспользуетсяПриЗагрузке="false">
			<Текст>Если ТипЗнч(Источник) = Тип("СправочникСсылка.вогТорговыеТочки")
		ИЛИ ТипЗнч(Источник) = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда

	локКПП = Неопределено;
	
	Если ТипЗнч(Источник) = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
		локКПП = Источник.КПП;
	ИначеЕсли ТипЗнч(Источник) = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
		локКПП = Источник.CRM_КПП;
	КонецЕсли;
			
	ИсходящиеДанные = Новый Структура("Период,Контрагент,ТипПоля,Значение,Комментарий"
		,ТекущаяДата()
		,Источник.Ссылка
		,"КПП"
		,локКПП
		,"");
		
	//ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "ИнформацияОКонтрагенте");
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ПереносБанкСчетовЮрЛиц" ИспользуетсяПриЗагрузке="false">
			<Текст>
Запрос = Новый Запрос;
Запрос.Текст =
"ВЫБРАТЬ
|	БанковскиеСчета.Ссылка,
|	БанковскиеСчета.Код КАК Код,
|	БанковскиеСчета.Владелец КАК Владелец,
|	БанковскиеСчета.Наименование КАК Наименование,
|	БанковскиеСчета.Банк КАК Банк,
|	БанковскиеСчета.БанкРасчетов КАК БанкДляРасчетов,
|	БанковскиеСчета.ВалютаДенежныхСредств КАК ВалютаДенежныхСредств,
|	БанковскиеСчета.ВидСчета КАК ВидСчета,
|	БанковскиеСчета.ДатаЗакрытия КАК ДатаЗакрытия,
|	БанковскиеСчета.ДатаОткрытия КАК ДатаОткрытия,
|	БанковскиеСчета.НомерИДатаРазрешения КАК НомерИДатаРазрешения,
|	БанковскиеСчета.НомерСчета КАК НомерСчета,
|	БанковскиеСчета.СуммаБезКопеек КАК СуммаБезКопеек,
|	БанковскиеСчета.ТекстКорреспондента КАК ТекстКорреспондента,
|	БанковскиеСчета.ВариантВыводаМесяца КАК ВариантВыводаМесяца,
|	БанковскиеСчета.ПометкаУдаления КАК ПометкаУдаления
|ИЗ
|	Справочник.БанковскиеСчета КАК БанковскиеСчета
|ГДЕ
|	БанковскиеСчета.Владелец = &amp;Владелец";

Запрос.УстановитьПараметр("Владелец", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();
Выборка = РезультатЗапроса.Выбрать();

Пока Выборка.Следующий() Цикл
	
	ИсходящиеДанные = Новый Структура;
	
	Для каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
		ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, Выборка[КолонкаРезультата.Имя]);
	КонецЦикла;
	
	ВыгрузитьПоПравилу(Выборка.Ссылка,, ,, "БанковскиеСчета");
	
КонецЦикла;</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносВзаимосвязейРолейКонтрагентов" ИспользуетсяПриЗагрузке="false">
			<Текст>//ТТ
Запрос = Новый Запрос;
Запрос.УстановитьПараметр("Ссылка", Объект.Ссылка);

Если ТипЗнч(Объект) = Тип("СправочникОбъект.вогТорговыеТочки") 
 	ИЛи ТипЗнч(Объект) = Тип("СправочникСсылка.вогТорговыеТочки") Тогда	
  
	Запрос.Текст = 		
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	СвязиЮридическихЛиц.ОбъектСвязи КАК Контрагент1,
	|	СвязиЮридическихЛиц.ЮридическоеЛицо КАК Контрагент2,
	|	""ТорговыеТочки_Контрагенты"" КАК Контрагент1_ИмяПКО,
	|	""ЮридическиеЛица_Контрагенты"" КАК Контрагент2_ИмяПКО,
	|	ЛОЖЬ КАК СвязьЧерезДистрибьютора
	|ИЗ
	|	РегистрСведений.вогСвязиЮридическихЛиц КАК СвязиЮридическихЛиц
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних КАК вогСтатусыСогласованияОбъектовСрезПоследних
	|		ПО СвязиЮридическихЛиц.ЮридическоеЛицо = вогСтатусыСогласованияОбъектовСрезПоследних.Объект
	|			И (вогСтатусыСогласованияОбъектовСрезПоследних.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыСогласования.Согласован))
	|ГДЕ
	|	СвязиЮридическихЛиц.ОбъектСвязи = &amp;Ссылка
	|	И ВЫРАЗИТЬ(СвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ПометкаУдаления = ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	вогСвязиТТСТТДистрибутором.ТорговаяТочка,
	|	СвязиЮридическихЛиц.ЮридическоеЛицо,
	|	""ТорговыеТочки_Контрагенты"",
	|	""ЮридическиеЛица_Контрагенты"",
	|	ИСТИНА
	|ИЗ
	|	РегистрСведений.вогСвязиТТСТТДистрибутором КАК вогСвязиТТСТТДистрибутором
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСвязиЮридическихЛиц КАК СвязиЮридическихЛиц
	|			ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних КАК вогСтатусыСогласованияОбъектовСрезПоследних
	|			ПО СвязиЮридическихЛиц.ЮридическоеЛицо = вогСтатусыСогласованияОбъектовСрезПоследних.Объект
	|				И (вогСтатусыСогласованияОбъектовСрезПоследних.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыСогласования.Согласован))
	|		ПО вогСвязиТТСТТДистрибутором.ТорговаяТочкаДистрибутор = СвязиЮридическихЛиц.ОбъектСвязи
	|			И (ВЫРАЗИТЬ(СвязиЮридическихЛиц.ЮридическоеЛицо КАК Справочник.вогЮридическиеЛица).ПометкаУдаления = ЛОЖЬ)
	|ГДЕ
	|	вогСвязиТТСТТДистрибутором.ТорговаяТочка = &amp;Ссылка
	|	И ВЫРАЗИТЬ(вогСвязиТТСТТДистрибутором.ТорговаяТочка КАК Справочник.вогТорговыеТочки).ПометкаУдаления = ЛОЖЬ";
	
//РЦ
ИначеЕсли ТипЗнч(Объект) = Тип("СправочникОбъект.вогРаспределительныеЦентры") 
	Или ТипЗнч(Объект) = Тип("СправочникСсылка.вогРаспределительныеЦентры") Тогда
	
	Запрос.Текст =
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	СвязиРаспределительныхЦентров.РаспределительныйЦентр КАК РаспределительныйЦентр,
	|	СвязиРаспределительныхЦентров.ОбъектСвязи КАК ОбъектСвязи
	|ПОМЕСТИТЬ ВТ_ТТ
	|ИЗ
	|	РегистрСведений.вогСвязиРаспределительныхЦентров КАК СвязиРаспределительныхЦентров
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних КАК вогСтатусыСогласованияОбъектовСрезПоследних
	|		ПО СвязиРаспределительныхЦентров.РаспределительныйЦентр = вогСтатусыСогласованияОбъектовСрезПоследних.Объект
	|			И (вогСтатусыСогласованияОбъектовСрезПоследних.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыСогласования.Согласован))
	|ГДЕ
	|	СвязиРаспределительныхЦентров.РаспределительныйЦентр = &amp;Ссылка
	|	И ВЫБОР
	|			КОГДА СвязиРаспределительныхЦентров.ОбъектСвязи ССЫЛКА Справочник.вогТорговыеТочки
	|				ТОГДА ВЫРАЗИТЬ(СвязиРаспределительныхЦентров.ОбъектСвязи КАК Справочник.вогТорговыеТочки).ПометкаУдаления = ЛОЖЬ
	|			КОГДА СвязиРаспределительныхЦентров.ОбъектСвязи ССЫЛКА Справочник.вогЮридическиеЛица
	|				ТОГДА ВЫРАЗИТЬ(СвязиРаспределительныхЦентров.ОбъектСвязи КАК Справочник.вогЮридическиеЛица).ПометкаУдаления = ЛОЖЬ
	|			КОГДА СвязиРаспределительныхЦентров.ОбъектСвязи ССЫЛКА Справочник.вогРаспределительныеЦентры
	|				ТОГДА ВЫРАЗИТЬ(СвязиРаспределительныхЦентров.ОбъектСвязи КАК Справочник.вогРаспределительныеЦентры).ПометкаУдаления = ЛОЖЬ
	|		КОНЕЦ
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ВТ_ТТ.РаспределительныйЦентр КАК Контрагент1,
	|	ВТ_ТТ.ОбъектСвязи КАК Контрагент2,
	|	""РаспределительныеЦентры_Контрагенты"" КАК Контрагент1_ИмяПКО,
	|	""ТорговыеТочки_Контрагенты"" КАК Контрагент2_ИмяПКО,
	|	ЛОЖЬ КАК СвязьЧерезДистрибьютора
	|ИЗ
	|	ВТ_ТТ КАК ВТ_ТТ
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних КАК вогСтатусыСогласованияОбъектовСрезПоследних
	|		ПО ВТ_ТТ.ОбъектСвязи = вогСтатусыСогласованияОбъектовСрезПоследних.Объект
	|			И (вогСтатусыСогласованияОбъектовСрезПоследних.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыСогласования.Согласован))";

	// ++ VOG Солодов В.В. 20.06.2019 task 377
	// Только связи с ТТ
	//|
	//|ОБЪЕДИНИТЬ ВСЕ
	//|
	//|ВЫБРАТЬ
	//|	СвязиЮридическихЛиц.ОбъектСвязи,
	//|	СвязиЮридическихЛиц.ЮридическоеЛицо,
	//|	""ТорговыеТочки_Контрагенты"",
	//|	""ЮридическиеЛица_Контрагенты""
	//|ИЗ
	//|	РегистрСведений.вогСвязиЮридическихЛиц КАК СвязиЮридическихЛиц
	//|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_ТТ КАК ВТ_ТТ
	//|			ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних КАК вогСтатусыСогласованияОбъектовСрезПоследних
	//|			ПО ВТ_ТТ.ОбъектСвязи = вогСтатусыСогласованияОбъектовСрезПоследних.Объект
	//|				И (вогСтатусыСогласованияОбъектовСрезПоследних.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыСогласования.Согласован))
	//|		ПО СвязиЮридическихЛиц.ОбъектСвязи = ВТ_ТТ.ОбъектСвязи";
	
//Плательщик
ИначеЕсли ТипЗнч(Объект) = Тип("СправочникОбъект.вогЮридическиеЛица") 
	Или ТипЗнч(Объект) = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда	
	
	Запрос.Текст = 		
	"ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	СвязиЮридическихЛиц.ОбъектСвязи КАК Контрагент1,
	|	СвязиЮридическихЛиц.ЮридическоеЛицо КАК Контрагент2,
	|	""ТорговыеТочки_Контрагенты"" КАК Контрагент1_ИмяПКО,
	|	""ЮридическиеЛица_Контрагенты"" КАК Контрагент2_ИмяПКО,
	|	ЛОЖЬ КАК СвязьЧерезДистрибьютора
	|ИЗ
	|	РегистрСведений.вогСвязиЮридическихЛиц КАК СвязиЮридическихЛиц
	|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.вогСтатусыСогласованияОбъектов.СрезПоследних КАК вогСтатусыСогласованияОбъектовСрезПоследних
	|		ПО СвязиЮридическихЛиц.ОбъектСвязи = вогСтатусыСогласованияОбъектовСрезПоследних.Объект
	|			И (вогСтатусыСогласованияОбъектовСрезПоследних.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыСогласования.Согласован))
	|ГДЕ
	|	СвязиЮридическихЛиц.ЮридическоеЛицо = &amp;Ссылка
	|	И ВЫБОР
	|			КОГДА СвязиЮридическихЛиц.ОбъектСвязи ССЫЛКА Справочник.вогТорговыеТочки
	|				ТОГДА ВЫРАЗИТЬ(СвязиЮридическихЛиц.ОбъектСвязи КАК Справочник.вогТорговыеТочки).ПометкаУдаления = ЛОЖЬ
	|			КОГДА СвязиЮридическихЛиц.ОбъектСвязи ССЫЛКА Справочник.вогЮридическиеЛица
	|				ТОГДА ВЫРАЗИТЬ(СвязиЮридическихЛиц.ОбъектСвязи КАК Справочник.вогЮридическиеЛица).ПометкаУдаления = ЛОЖЬ
	|			КОГДА СвязиЮридическихЛиц.ОбъектСвязи ССЫЛКА Справочник.вогРаспределительныеЦентры
	|				ТОГДА ВЫРАЗИТЬ(СвязиЮридическихЛиц.ОбъектСвязи КАК Справочник.вогРаспределительныеЦентры).ПометкаУдаления = ЛОЖЬ
	|		КОНЕЦ";
	
КонецЕсли;

Если ЗначениеЗаполнено(Запрос.Текст) Тогда
	РезультатЗапроса = Запрос.Выполнить();

	Выборка = РезультатЗапроса.Выбрать();
	Пока Выборка.Следующий() Цикл
		ЗаписьЖурналаРегистрации(НСтр("ru = 'Интеграция с учетной системой'", ОбщегоНазначенияКлиентСервер.КодОсновногоЯзыка()),
			УровеньЖурналаРегистрации.Ошибка,,,
			"" + Выборка.Контрагент1 + "--" + Выборка.Контрагент1);
		
		ИсходящиеДанные = Новый Структура;
		Для каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
			ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, Выборка[КолонкаРезультата.Имя]);
		КонецЦикла;
		
		ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "ВзаимосвязьРолейКонтрагентов");	
		
	КонецЦикла;
	
КонецЕсли;</Текст>
			<Параметры>Объект</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносДоговоровЮрЛиц" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ РАЗЛИЧНЫЕ
|	РегистрМенеджерыОбъектов.Владелец КАК Владелец,
|	РегистрМенеджерыОбъектов.Менеджер КАК МенеджерПокупателя,
|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала,
|	РегистрМенеджерыОбъектов.ДатаОкончания КАК ДатаОкончания,
|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
|	РегистрМенеджерыОбъектов.Роль КАК Роль,
|	ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация
|ПОМЕСТИТЬ ВТ_Менеджеры
|ИЗ
|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
|ГДЕ
|	РегистрМенеджерыОбъектов.Владелец = &amp;Владелец
|	И РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
|	И РегистрМенеджерыОбъектов.Роль В (ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор), ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер))
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ДоговорыКонтрагентов.Ссылка КАК ДоговорКонтрагента,
|	ДоговорыКонтрагентов.Организация КАК Организация,
|	ДоговорыКонтрагентов.вогДатаНачалаДействия КАК вогДатаНачалаДействия,
|	ДоговорыКонтрагентов.Владелец КАК Владелец,
|	СпрНаправленияДеятельности.Ссылка КАК НаправлениеДеятельности,
|	ДоговорыКонтрагентов.вогИдентификаторОбои КАК вогИдентификаторОбои,
|	ДоговорыКонтрагентов.вогИдентификаторПлитка КАК вогИдентификаторПлитка,
|	ДоговорыКонтрагентов.Код КАК Код,
|	ДоговорыКонтрагентов.НомерДоговора КАК НомерДоговора,
|	ДоговорыКонтрагентов.Наименование КАК Наименование,
|	ДоговорыКонтрагентов.ВидДоговора КАК ВидДоговора,
|	ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах КАК РасчетыВУсловныхЕдиницах,
|	ДоговорыКонтрагентов.ПометкаУдаления КАК ПометкаУдаления,
|	ДоговорыКонтрагентов.ВалютаРасчетов КАК ВалютаВзаиморасчетов,
|	ДоговорыКонтрагентов.вогТипДоговора КАК ТипДоговора,
|	ДоговорыКонтрагентов.вогФормаДоговора = ЗНАЧЕНИЕ(Перечисление.вогТипыФормДоговоров.НашаФорма) КАК ДоговорПоНашейФорме,
|	""ПоДоговоруВЦелом"" КАК ВедениеВзаиморасчетов,
|	ИСТИНА КАК ВестиПоДокументамРасчетовСКонтрагентом,
|	ДоговорыКонтрагентов.вогСтатус КАК вогСтатус,
|	ДоговорыКонтрагентов.ДатаДоговора КАК ДатаСозданияДоговора,
|	ДоговорыКонтрагентов.вогДатаОкончанияДоговора КАК СрокДействия
|ПОМЕСТИТЬ ВТ_Договоры
|ИЗ
|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.НаправленияДеятельности КАК СпрНаправленияДеятельности
|		ПО (ДоговорыКонтрагентов.Владелец = &amp;Владелец)
|			И (ДоговорыКонтрагентов.ПометкаУдаления = ЛОЖЬ)
|			И (СпрНаправленияДеятельности.Предопределенный = ИСТИНА)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	ДоговорыКонтрагентов.ДоговорКонтрагента КАК Ссылка,
|	ВЫБОР
|		КОГДА ВТ_Менеджеры.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор)
|			ТОГДА ВТ_Менеджеры.МенеджерПокупателя
|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
|	КОНЕЦ КАК ОтветственныйКоординатор,
|	ВЫБОР
|		КОГДА ВТ_Менеджеры.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер)
|			ТОГДА ВТ_Менеджеры.МенеджерПокупателя
|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
|	КОНЕЦ КАК ОтветственныйМенеджер,
|	ДоговорыКонтрагентов.НаправлениеДеятельности КАК НаправлениеДеятельности,
|	ДоговорыКонтрагентов.вогИдентификаторОбои КАК вогИдентификаторОбои,
|	ДоговорыКонтрагентов.вогИдентификаторПлитка КАК вогИдентификаторПлитка,
|	ДоговорыКонтрагентов.Код КАК Код,
|	ДоговорыКонтрагентов.НомерДоговора КАК НомерДоговора,
|	ДоговорыКонтрагентов.Наименование КАК Наименование,
|	ДоговорыКонтрагентов.ВидДоговора КАК ВидДоговора,
|	ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах КАК РасчетыВУсловныхЕдиницах,
|	ДоговорыКонтрагентов.ПометкаУдаления КАК ПометкаУдаления,
|	ДоговорыКонтрагентов.ВалютаВзаиморасчетов КАК ВалютаВзаиморасчетов,
|	ДоговорыКонтрагентов.ТипДоговора КАК ТипДоговора,
|	ДоговорыКонтрагентов.ДоговорПоНашейФорме КАК ДоговорПоНашейФорме,
|	ДоговорыКонтрагентов.ВедениеВзаиморасчетов КАК ВедениеВзаиморасчетов,
|	ДоговорыКонтрагентов.ВестиПоДокументамРасчетовСКонтрагентом КАК ВестиПоДокументамРасчетовСКонтрагентом,
|	ДоговорыКонтрагентов.вогСтатус КАК вогСтатус,
|	ДоговорыКонтрагентов.ДатаСозданияДоговора КАК ДатаСозданияДоговора,
|	ДоговорыКонтрагентов.СрокДействия КАК СрокДействия,
|	ДоговорыКонтрагентов.Владелец КАК Владелец,
|	ДоговорыКонтрагентов.вогДатаНачалаДействия КАК вогДатаНачалаДействия,
|	ДоговорыКонтрагентов.Организация КАК Организация
|ПОМЕСТИТЬ ВТ_ДоговорыПоМенеджерам
|ИЗ
|	ВТ_Договоры КАК ДоговорыКонтрагентов
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Менеджеры КАК ВТ_Менеджеры
|		ПО ДоговорыКонтрагентов.Организация = ВТ_Менеджеры.Организация
|			И ДоговорыКонтрагентов.НаправлениеДеятельности = ВТ_Менеджеры.НаправлениеДеятельности
|			И ДоговорыКонтрагентов.вогДатаНачалаДействия &gt;= ВТ_Менеджеры.ДатаНачала
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ РАЗЛИЧНЫЕ
|	ВТ_ДоговорыПоМенеджерам.Ссылка КАК Ссылка,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ОтветственныйКоординатор) КАК ОтветственныйКоординатор,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ОтветственныйМенеджер) КАК ОтветственныйМенеджер,
|	ВТ_ДоговорыПоМенеджерам.НаправлениеДеятельности КАК ВидВзаиморасчетов,
|	вогКоммерческиеСоглашения.ВладелецАдреса КАК ТорговаяТочка,
|	МАКСИМУМ(ВЫБОР
|			КОГДА ВТ_ДоговорыПоМенеджерам.НаправлениеДеятельности = ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.Обои)
|				ТОГДА ВТ_ДоговорыПоМенеджерам.вогИдентификаторОбои
|			ИНАЧЕ ВТ_ДоговорыПоМенеджерам.вогИдентификаторПлитка
|		КОНЕЦ) КАК ИдентификаторДоговора,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.Код) КАК Код,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.НомерДоговора) КАК Номер,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.Наименование) КАК Наименование,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ВидДоговора) КАК ВидДоговора,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.РасчетыВУсловныхЕдиницах) КАК РасчетыВУсловныхЕдиницах,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ПометкаУдаления) КАК ПометкаУдаления,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ВалютаВзаиморасчетов) КАК ВалютаВзаиморасчетов,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ТипДоговора) КАК ТипДоговора,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ДоговорПоНашейФорме) КАК ДоговорПоНашейФорме,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.вогСтатус) КАК вогСтатус,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ДатаСозданияДоговора) КАК ДатаСозданияДоговора,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.СрокДействия) КАК СрокДействия,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.Владелец) КАК Владелец,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.вогДатаНачалаДействия) КАК Дата,
|	МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.Организация) КАК Организация,
|	МАКСИМУМ(вогКоммерческиеСоглашения.Ссылка.Активный) КАК Активный
|ИЗ
|	ВТ_ДоговорыПоМенеджерам КАК ВТ_ДоговорыПоМенеджерам
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.вогКоммерческиеСоглашения.АдресаДоставки КАК вогКоммерческиеСоглашения
|		ПО ВТ_ДоговорыПоМенеджерам.НаправлениеДеятельности = вогКоммерческиеСоглашения.Ссылка.НаправлениеДеятельности
|			И ВТ_ДоговорыПоМенеджерам.Организация = вогКоммерческиеСоглашения.Ссылка.Организация
|			И (вогКоммерческиеСоглашения.Ссылка.Статус В(&amp;СтатусыКС))
|			И (ВТ_ДоговорыПоМенеджерам.Владелец = вогКоммерческиеСоглашения.Ссылка.ЮридическоеЛицо
|				ИЛИ ВЫРАЗИТЬ(ВТ_ДоговорыПоМенеджерам.Владелец КАК Справочник.вогЮридическиеЛица).Партнер = вогКоммерческиеСоглашения.Ссылка.Владелец)
|
|СГРУППИРОВАТЬ ПО
|	ВТ_ДоговорыПоМенеджерам.Ссылка,
|	ВТ_ДоговорыПоМенеджерам.НаправлениеДеятельности,
|	вогКоммерческиеСоглашения.ВладелецАдреса
|
|ИМЕЮЩИЕ
|	НЕ МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ОтветственныйКоординатор) = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка) И
|	НЕ МАКСИМУМ(ВТ_ДоговорыПоМенеджерам.ОтветственныйМенеджер) = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
|ИТОГИ ПО
|	Ссылка,
|	ВидВзаиморасчетов";

МассивСтатусов = Новый Массив;
МассивСтатусов.Добавить(Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Согласован);
МассивСтатусов.Добавить(Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом);
МассивСтатусов.Добавить(Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Действует);

Запрос.УстановитьПараметр("Владелец", 	Источник.Ссылка);
Запрос.УстановитьПараметр("СтатусыКС", 	МассивСтатусов);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаСсылка = РезультатЗапроса.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);

Пока ВыборкаСсылка.Следующий() Цикл
	
	ВыборкаНаправлениеДеятельности = ВыборкаСсылка.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
	Пока ВыборкаНаправлениеДеятельности.Следующий() Цикл
		
		ИсходящиеДанные = Новый Структура;
		
		Для Каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
			ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, ВыборкаНаправлениеДеятельности[КолонкаРезультата.Имя]);
		КонецЦикла;
		
		ИдентификаторДоговора 	= Новый УникальныйИдентификатор(ВыборкаНаправлениеДеятельности.ИдентификаторДоговора);
		ДоговорСсылка 			= Справочники.ДоговорыКонтрагентов.ПолучитьСсылку(ИдентификаторДоговора);
		
		ШаблонНаименования = НСтр("ru = '%1 (%2)'");
		ИсходящиеДанные.Наименование = СтрШаблон(
			ШаблонНаименования,
			ВыборкаНаправлениеДеятельности.Наименование,
			ВыборкаНаправлениеДеятельности.ВидВзаиморасчетов);
		
		ВыгрузитьПоПравилу(ДоговорСсылка,, ИсходящиеДанные,, "ДоговорыКонтрагентов_ЮрЛица");
		
		// Выгрузка адресов доставки
		ВыборкаТорговаяТочка = ВыборкаНаправлениеДеятельности.Выбрать();
		
		Пока ВыборкаТорговаяТочка.Следующий() Цикл
			ВыгрузитьПоПравилу(ВыборкаТорговаяТочка.ТорговаяТочка,,,, "ТорговыеТочки_Контрагенты");
		КонецЦикла;
		
	КонецЦикла;
	
КонецЦикла;
</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносДоговоровЮрЛиц_Старый" ИспользуетсяПриЗагрузке="false">
			<Текст>
//Запрос = Новый Запрос;

//ТекстЗапроса =  
//	"ВЫБРАТЬ РАЗЛИЧНЫЕ
//	|	РегистрМенеджерыОбъектов.Менеджер КАК МенеджерПокупателя,
//	|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала,
//	|	РегистрМенеджерыОбъектов.ДатаОкончания КАК ДатаОкончания,
//	|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК ВидВзаиморасчетов,
//	|	РегистрМенеджерыОбъектов.Роль КАК Роль,
//	|	РегистрМенеджерыОбъектов.Подразделение КАК Подразделение,
//	|	ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка) КАК Организация
//	|ИЗ
//	|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
//	|ГДЕ
//	|	РегистрМенеджерыОбъектов.Владелец = &amp;Ссылка
//	|	И РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
//	|	И РегистрМенеджерыОбъектов.Роль В (ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор), ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер))";

//Запрос.Текст = ТекстЗапроса;

//Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
//ТаблицаМенеджеров = Запрос.Выполнить().Выгрузить();

//Для Каждого СтрокаТЧ Из ТаблицаМенеджеров Цикл
//	СтрокаТЧ.Организация = Справочники.СтруктураПредприятия.ПолучитьОрганизациюПоПодразделению(СтрокаТЧ.Подразделение);	
//КонецЦикла;

//Запрос = Новый Запрос;
//Запрос.Текст =
//"ВЫБРАТЬ
//|	ТаблицаМенеджеров.МенеджерПокупателя КАК МенеджерПокупателя,
//|	ТаблицаМенеджеров.ДатаНачала КАК ДатаНачала,
//|	ТаблицаМенеджеров.ДатаОкончания КАК ДатаОкончания,
//|	ТаблицаМенеджеров.ВидВзаиморасчетов КАК ВидВзаиморасчетов,
//|	ТаблицаМенеджеров.Роль КАК Роль,
//|	ТаблицаМенеджеров.Организация КАК Организация
//|ПОМЕСТИТЬ ВТ_Менеджеры
//|ИЗ
//|	&amp;ТаблицаМенеджеров КАК ТаблицаМенеджеров
//|;
//|
//|////////////////////////////////////////////////////////////////////////////////
//|ВЫБРАТЬ РАЗРЕШЕННЫЕ
//|	ДоговорыКонтрагентов.Ссылка КАК Ссылка,
//|	ВЫБОР
//|		КОГДА ВТ_Менеджеры.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор)
//|			ТОГДА ВТ_Менеджеры.МенеджерПокупателя
//|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
//|	КОНЕЦ КАК ОтветственныйКоординатор,
//|	ВЫБОР
//|		КОГДА ВТ_Менеджеры.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер)
//|			ТОГДА ВТ_Менеджеры.МенеджерПокупателя
//|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
//|	КОНЕЦ КАК ОтветственныйМенеджер
//|ПОМЕСТИТЬ ВТ_Договора
//|ИЗ
//|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
//|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Менеджеры КАК ВТ_Менеджеры
//|		ПО ДоговорыКонтрагентов.Организация = ВТ_Менеджеры.Организация
//|			И ДоговорыКонтрагентов.вогНаправлениеДеятельности = ВТ_Менеджеры.ВидВзаиморасчетов
//|			И ДоговорыКонтрагентов.вогДатаНачалаДействия &gt;= ВТ_Менеджеры.ДатаНачала
//|ГДЕ
//|	ДоговорыКонтрагентов.Владелец = &amp;Владелец
//|;
//|
//|////////////////////////////////////////////////////////////////////////////////
//|ВЫБРАТЬ РАЗЛИЧНЫЕ
//|	ВТ_Договора.Ссылка КАК Ссылка,
//|	МАКСИМУМ(ВТ_Договора.ОтветственныйКоординатор) КАК ОтветственныйКоординатор,
//|	МАКСИМУМ(ВТ_Договора.ОтветственныйМенеджер) КАК ОтветственныйМенеджер
//|ИЗ
//|	ВТ_Договора КАК ВТ_Договора
//|
//|СГРУППИРОВАТЬ ПО
//|	ВТ_Договора.Ссылка";

//Запрос.УстановитьПараметр("Владелец", 			Источник.Ссылка);
//Запрос.УстановитьПараметр("ТаблицаМенеджеров", 	ТаблицаМенеджеров);

Запрос = Новый Запрос;
Запрос.Текст =
"ВЫБРАТЬ РАЗЛИЧНЫЕ
|	РегистрМенеджерыОбъектов.Владелец КАК Владелец,
|	РегистрМенеджерыОбъектов.Менеджер КАК МенеджерПокупателя,
|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала,
|	РегистрМенеджерыОбъектов.ДатаОкончания КАК ДатаОкончания,
|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК ВидВзаиморасчетов,
|	РегистрМенеджерыОбъектов.Роль КАК Роль,
|	ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация
|ПОМЕСТИТЬ ВТ_Менеджеры
|ИЗ
|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
|ГДЕ
|	РегистрМенеджерыОбъектов.Владелец = &amp;Владелец
|	И РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
|	И РегистрМенеджерыОбъектов.Роль В (ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор), ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер))
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ РАЗЛИЧНЫЕ
|	ДоговорыКонтрагентов.Ссылка КАК Ссылка,
|	ВЫБОР
|		КОГДА ВТ_Менеджеры.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор)
|			ТОГДА ВТ_Менеджеры.МенеджерПокупателя
|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
|	КОНЕЦ КАК ОтветственныйКоординатор,
|	ВЫБОР
|		КОГДА ВТ_Менеджеры.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер)
|			ТОГДА ВТ_Менеджеры.МенеджерПокупателя
|		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)
|	КОНЕЦ КАК ОтветственныйМенеджер
|ПОМЕСТИТЬ ВТ_Договора
|ИЗ
|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Менеджеры КАК ВТ_Менеджеры
|		ПО ДоговорыКонтрагентов.Организация = ВТ_Менеджеры.Организация
|			И ДоговорыКонтрагентов.вогНаправлениеДеятельности = ВТ_Менеджеры.ВидВзаиморасчетов
|			И ДоговорыКонтрагентов.вогДатаНачалаДействия &gt;= ВТ_Менеджеры.ДатаНачала
|			И ДоговорыКонтрагентов.Владелец = ВТ_Менеджеры.Владелец
|			И (ДоговорыКонтрагентов.ПометкаУдаления = ЛОЖЬ)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ РАЗЛИЧНЫЕ
|	ВТ_Договора.Ссылка КАК Ссылка,
|	МАКСИМУМ(ВТ_Договора.ОтветственныйКоординатор) КАК ОтветственныйКоординатор,
|	МАКСИМУМ(ВТ_Договора.ОтветственныйМенеджер) КАК ОтветственныйМенеджер
|ИЗ
|	ВТ_Договора КАК ВТ_Договора
|
|СГРУППИРОВАТЬ ПО
|	ВТ_Договора.Ссылка
|
|ИМЕЮЩИЕ
|	НЕ МАКСИМУМ(ВТ_Договора.ОтветственныйКоординатор) = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка) И
|	НЕ МАКСИМУМ(ВТ_Договора.ОтветственныйМенеджер) = ЗНАЧЕНИЕ(Справочник.Пользователи.ПустаяСсылка)";

Запрос.УстановитьПараметр("Владелец", Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();
Выборка = РезультатЗапроса.Выбрать();

Пока Выборка.Следующий() Цикл
	
	ИсходящиеДанные = Новый Структура;
	
	Для каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
		ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, Выборка[КолонкаРезультата.Имя]);
	КонецЦикла;
	
	ВыгрузитьПоПравилу(Выборка.Ссылка,, ИсходящиеДанные,, "ДоговорыКонтрагентов_ЮрЛица");
	
КонецЦикла;</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносДоговоровЮрЛиц22012020" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ РАЗЛИЧНЫЕ
|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер,
|	ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация,
|	РегистрМенеджерыОбъектов.Владелец КАК Владелец,
|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала
|ПОМЕСТИТЬ ВТ_Менеджеры
|ИЗ
|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
|ГДЕ
|	РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер)
|	И РегистрМенеджерыОбъектов.Владелец = &amp;Владелец
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ РАЗЛИЧНЫЕ
|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер,
|	ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация,
|	РегистрМенеджерыОбъектов.Владелец КАК Владелец,
|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала
|ПОМЕСТИТЬ ВТ_Координаторы
|ИЗ
|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
|ГДЕ
|	РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор)
|	И РегистрМенеджерыОбъектов.Владелец = &amp;Владелец
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ РАЗЛИЧНЫЕ
|	Договоры.Ссылка КАК Ссылка,
|	ВТ_Координаторы.Менеджер КАК ОтветственныйКоординатор,
|	ВТ_Менеджеры.Менеджер КАК ОтветственныйМенеджер,
|	Договоры.КоммерческоеСоглашение.НаправлениеДеятельности КАК ВидВзаиморасчетов,
|	ВЫБОР
|		КОГДА Договоры.КоммерческоеСоглашение.НаправлениеДеятельности = ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.Обои)
|			ТОГДА Договоры.Ссылка.вогИдентификаторОбои
|		ИНАЧЕ Договоры.Ссылка.вогИдентификаторПлитка
|	КОНЕЦ КАК ИдентификаторДоговора,
|	Договоры.Ссылка.Код КАК Код,
|	Договоры.Ссылка.НомерДоговора КАК Номер,
|	Договоры.Ссылка.Наименование КАК Наименование,
|	Договоры.Ссылка.ВидДоговора КАК ВидДоговора,
|	Договоры.Ссылка.РасчетыВУсловныхЕдиницах КАК РасчетыВУсловныхЕдиницах,
|	Договоры.Ссылка.ПометкаУдаления КАК ПометкаУдаления,
|	Договоры.Ссылка.ВалютаРасчетов КАК ВалютаВзаиморасчетов,
|	Договоры.Ссылка.вогТипДоговора КАК ТипДоговора,
|	Договоры.Ссылка.вогФормаДоговора = ЗНАЧЕНИЕ(Перечисление.вогТипыФормДоговоров.НашаФорма) КАК ДоговорПоНашейФорме,
|	Договоры.Ссылка.вогСтатус КАК вогСтатус,
|	Договоры.Ссылка.ДатаДоговора КАК ДатаСозданияДоговора,
|	Договоры.Ссылка.вогДатаОкончанияДоговора КАК СрокДействия,
|	Договоры.Ссылка.Владелец КАК Владелец,
|	Договоры.Ссылка.вогДатаНачалаДействия КАК Дата,
|	Договоры.Ссылка.Организация КАК Организация,
|	ВЫБОР
|		КОГДА Договоры.Ссылка.вогАктивный
|				И Договоры.КоммерческоеСоглашение.Активный
|			ТОГДА ИСТИНА
|		ИНАЧЕ ЛОЖЬ
|	КОНЕЦ КАК Активный,
|	Договоры.КоммерческоеСоглашение КАК КС,
|	Договоры.КоммерческоеСоглашение.НаправлениеДеятельности КАК НаправлениеДеятельности,
|	Договоры.КоммерческоеСоглашение.Статус КАК Статус,
|	Договоры.КоммерческоеСоглашение.ДатаНачалаДействия КАК ДатаНачалаДействия,
|	ВЫБОР
|		КОГДА Договоры.КоммерческоеСоглашение.Активный = ИСТИНА
|			ТОГДА 200
|		ИНАЧЕ 100
|	КОНЕЦ + ВЫБОР
|		КОГДА Договоры.Ссылка.Владелец = Договоры.КоммерческоеСоглашение.ЮридическоеЛицо
|			ТОГДА 20
|		ИНАЧЕ 10
|	КОНЕЦ + ВЫБОР
|		КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Действует)
|			ТОГДА 5
|		ИНАЧЕ ВЫБОР
|				КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом)
|					ТОГДА 4
|				ИНАЧЕ ВЫБОР
|						КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Согласован)
|							ТОГДА 3
|						ИНАЧЕ ВЫБОР
|								КОГДА Договоры.КоммерческоеСоглашение.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.НеСогласованКлиентом)
|									ТОГДА 2
|								ИНАЧЕ 1
|							КОНЕЦ
|					КОНЕЦ
|			КОНЕЦ
|	КОНЕЦ КАК Приоритет,
|	вогКоммерческиеСоглашенияАдресаДоставки.ВладелецАдреса КАК ВладелецАдреса,
|	Договоры.КоммерческоеСоглашение.ДатаОкончанияДействия КАК ДатаОкончанияДействия
|ИЗ
|	Справочник.ДоговорыКонтрагентов.КоммерческиеСоглашения КАК Договоры
|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Менеджеры КАК ВТ_Менеджеры
|		ПО Договоры.Ссылка.Организация = ВТ_Менеджеры.Организация
|			И Договоры.КоммерческоеСоглашение.НаправлениеДеятельности = ВТ_Менеджеры.НаправлениеДеятельности
|			И Договоры.Ссылка.Владелец = ВТ_Менеджеры.Владелец
|			И Договоры.Ссылка.ДатаДоговора &gt;= ВТ_Менеджеры.ДатаНачала
|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Координаторы КАК ВТ_Координаторы
|		ПО Договоры.Ссылка.Организация = ВТ_Координаторы.Организация
|			И Договоры.КоммерческоеСоглашение.НаправлениеДеятельности = ВТ_Координаторы.НаправлениеДеятельности
|			И Договоры.Ссылка.Владелец = ВТ_Координаторы.Владелец
|			И Договоры.Ссылка.ДатаДоговора &gt;= ВТ_Координаторы.ДатаНачала
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.вогКоммерческиеСоглашения.АдресаДоставки КАК вогКоммерческиеСоглашенияАдресаДоставки
|		ПО Договоры.КоммерческоеСоглашение = вогКоммерческиеСоглашенияАдресаДоставки.Ссылка
|ГДЕ
|	Договоры.Ссылка.Владелец = &amp;Владелец
|	И Договоры.КоммерческоеСоглашение.ПометкаУдаления = ЛОЖЬ
|
|УПОРЯДОЧИТЬ ПО
|	Приоритет УБЫВ,
|	ДатаНачалаДействия УБЫВ
|ИТОГИ
|	МАКСИМУМ(ОтветственныйКоординатор),
|	МАКСИМУМ(ОтветственныйМенеджер),
|	МАКСИМУМ(ВидВзаиморасчетов),
|	МАКСИМУМ(ИдентификаторДоговора),
|	МАКСИМУМ(Код),
|	МАКСИМУМ(Номер),
|	МАКСИМУМ(Наименование),
|	МАКСИМУМ(ВидДоговора),
|	МАКСИМУМ(РасчетыВУсловныхЕдиницах),
|	МАКСИМУМ(ПометкаУдаления),
|	МАКСИМУМ(ВалютаВзаиморасчетов),
|	МАКСИМУМ(ТипДоговора),
|	МАКСИМУМ(ДоговорПоНашейФорме),
|	МАКСИМУМ(вогСтатус),
|	МАКСИМУМ(ДатаСозданияДоговора),
|	МАКСИМУМ(СрокДействия),
|	МАКСИМУМ(Владелец),
|	МАКСИМУМ(Дата),
|	МАКСИМУМ(Организация),
|	МАКСИМУМ(Активный),
|	МАКСИМУМ(Статус),
|	МАКСИМУМ(ДатаНачалаДействия),
|	МАКСИМУМ(Приоритет)
|ПО
|	Ссылка,
|	НаправлениеДеятельности,
|	КС";

//"ВЫБРАТЬ РАЗЛИЧНЫЕ
//|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
//|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер,
//|	ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация,
//|	РегистрМенеджерыОбъектов.Владелец КАК Владелец,
//|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала
//|ПОМЕСТИТЬ ВТ_Менеджеры
//|ИЗ
//|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
//|ГДЕ
//|	РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
//|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Менеджер)
//|	И РегистрМенеджерыОбъектов.Владелец = &amp;Владелец
//|;
//|
//|////////////////////////////////////////////////////////////////////////////////
//|ВЫБРАТЬ РАЗЛИЧНЫЕ
//|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК НаправлениеДеятельности,
//|	РегистрМенеджерыОбъектов.Менеджер КАК Менеджер,
//|	ВЫРАЗИТЬ(РегистрМенеджерыОбъектов.Подразделение КАК Справочник.СтруктураПредприятия).Организация КАК Организация,
//|	РегистрМенеджерыОбъектов.Владелец КАК Владелец,
//|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала
//|ПОМЕСТИТЬ ВТ_Координаторы
//|ИЗ
//|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
//|ГДЕ
//|	РегистрМенеджерыОбъектов.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
//|	И РегистрМенеджерыОбъектов.Роль = ЗНАЧЕНИЕ(Справочник.РолиКонтактныхЛицПартнеров.Координатор)
//|	И РегистрМенеджерыОбъектов.Владелец = &amp;Владелец
//|;
//|
//|////////////////////////////////////////////////////////////////////////////////
//|ВЫБРАТЬ РАЗЛИЧНЫЕ
//|	ДоговорыКонтрагентов.Ссылка КАК Ссылка,
//|	ВТ_Координаторы.Менеджер КАК ОтветственныйКоординатор,
//|	ВТ_Менеджеры.Менеджер КАК ОтветственныйМенеджер,
//|	вогКоммерческиеСоглашения.НаправлениеДеятельности КАК ВидВзаиморасчетов,
//|	ВЫБОР
//|		КОГДА вогКоммерческиеСоглашения.НаправлениеДеятельности = ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.Обои)
//|			ТОГДА ДоговорыКонтрагентов.вогИдентификаторОбои
//|		ИНАЧЕ ДоговорыКонтрагентов.вогИдентификаторПлитка
//|	КОНЕЦ КАК ИдентификаторДоговора,
//|	ДоговорыКонтрагентов.Код КАК Код,
//|	ДоговорыКонтрагентов.НомерДоговора КАК Номер,
//|	ДоговорыКонтрагентов.Наименование КАК Наименование,
//|	ДоговорыКонтрагентов.ВидДоговора КАК ВидДоговора,
//|	ДоговорыКонтрагентов.РасчетыВУсловныхЕдиницах КАК РасчетыВУсловныхЕдиницах,
//|	ДоговорыКонтрагентов.ПометкаУдаления КАК ПометкаУдаления,
//|	ДоговорыКонтрагентов.ВалютаРасчетов КАК ВалютаВзаиморасчетов,
//|	ДоговорыКонтрагентов.вогТипДоговора КАК ТипДоговора,
//|	ДоговорыКонтрагентов.вогФормаДоговора = ЗНАЧЕНИЕ(Перечисление.вогТипыФормДоговоров.НашаФорма) КАК ДоговорПоНашейФорме,
//|	ДоговорыКонтрагентов.вогСтатус КАК вогСтатус,
//|	ДоговорыКонтрагентов.ДатаДоговора КАК ДатаСозданияДоговора,
//|	ДоговорыКонтрагентов.вогДатаОкончанияДоговора КАК СрокДействия,
//|	ДоговорыКонтрагентов.Владелец КАК Владелец,
//|	ДоговорыКонтрагентов.вогДатаНачалаДействия КАК Дата,
//|	ДоговорыКонтрагентов.Организация КАК Организация,
//|	вогКоммерческиеСоглашения.Ссылка.Активный КАК Активный,
//|	вогКоммерческиеСоглашения.Ссылка КАК КС,
//|	вогКоммерческиеСоглашения.НаправлениеДеятельности КАК НаправлениеДеятельности,
//|	вогКоммерческиеСоглашения.Статус КАК Статус,
//|	вогКоммерческиеСоглашения.ДатаНачалаДействия КАК ДатаНачалаДействия,
//|	ВЫБОР
//|		КОГДА вогКоммерческиеСоглашения.Активный = ИСТИНА
//|			ТОГДА 200
//|		ИНАЧЕ 100
//|	КОНЕЦ + ВЫБОР
//|		КОГДА ДоговорыКонтрагентов.Владелец = вогКоммерческиеСоглашения.ЮридическоеЛицо
//|			ТОГДА 20
//|		ИНАЧЕ 10
//|	КОНЕЦ + ВЫБОР
//|		КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Действует)
//|			ТОГДА 5
//|		ИНАЧЕ ВЫБОР
//|				КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом)
//|					ТОГДА 4
//|				ИНАЧЕ ВЫБОР
//|						КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.Согласован)
//|							ТОГДА 3
//|						ИНАЧЕ ВЫБОР
//|								КОГДА вогКоммерческиеСоглашения.Статус = ЗНАЧЕНИЕ(Перечисление.вогСтатусыДоговоровКоммерческихСоглашений.НеСогласованКлиентом)
//|									ТОГДА 2
//|								ИНАЧЕ 1
//|							КОНЕЦ
//|					КОНЕЦ
//|			КОНЕЦ
//|	КОНЕЦ КАК Приоритет,
//|	вогКоммерческиеСоглашенияАдресаДоставки.ВладелецАдреса КАК ВладелецАдреса,
//|	вогКоммерческиеСоглашения.ДатаОкончанияДействия КАК ДатаОкончанияДействия
//|ИЗ
//|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
//|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.вогКоммерческиеСоглашения КАК вогКоммерческиеСоглашения
//|			ЛЕВОЕ СОЕДИНЕНИЕ Справочник.вогКоммерческиеСоглашения.АдресаДоставки КАК вогКоммерческиеСоглашенияАдресаДоставки
//|			ПО вогКоммерческиеСоглашения.Ссылка = вогКоммерческиеСоглашенияАдресаДоставки.Ссылка
//|		ПО ДоговорыКонтрагентов.Организация = вогКоммерческиеСоглашения.Организация
//|			И (ДоговорыКонтрагентов.Владелец = вогКоммерческиеСоглашения.ЮридическоеЛицо
//|				ИЛИ ДоговорыКонтрагентов.Владелец.Партнер = вогКоммерческиеСоглашения.Владелец)
//|			И (вогКоммерческиеСоглашения.ПометкаУдаления = ЛОЖЬ)
//|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Менеджеры КАК ВТ_Менеджеры
//|		ПО ДоговорыКонтрагентов.Организация = ВТ_Менеджеры.Организация
//|			И (вогКоммерческиеСоглашения.НаправлениеДеятельности = ВТ_Менеджеры.НаправлениеДеятельности)
//|			И ДоговорыКонтрагентов.Владелец = ВТ_Менеджеры.Владелец
//|			И ДоговорыКонтрагентов.ДатаДоговора &gt;= ВТ_Менеджеры.ДатаНачала
//|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Координаторы КАК ВТ_Координаторы
//|		ПО ДоговорыКонтрагентов.Организация = ВТ_Координаторы.Организация
//|			И ДоговорыКонтрагентов.Владелец = ВТ_Координаторы.Владелец
//|			И ДоговорыКонтрагентов.ДатаДоговора &gt;= ВТ_Координаторы.ДатаНачала
//|			И (вогКоммерческиеСоглашения.НаправлениеДеятельности = ВТ_Координаторы.НаправлениеДеятельности)
//|ГДЕ
//|	ДоговорыКонтрагентов.Владелец = &amp;Владелец
//|	И вогКоммерческиеСоглашения.Ссылка ЕСТЬ НЕ NULL 
//|
//|УПОРЯДОЧИТЬ ПО
//|	Приоритет УБЫВ,
//|	ДатаНачалаДействия УБЫВ
//|ИТОГИ
//|	МАКСИМУМ(ОтветственныйКоординатор),
//|	МАКСИМУМ(ОтветственныйМенеджер),
//|	МАКСИМУМ(ВидВзаиморасчетов),
//|	МАКСИМУМ(ИдентификаторДоговора),
//|	МАКСИМУМ(Код),
//|	МАКСИМУМ(Номер),
//|	МАКСИМУМ(Наименование),
//|	МАКСИМУМ(ВидДоговора),
//|	МАКСИМУМ(РасчетыВУсловныхЕдиницах),
//|	МАКСИМУМ(ПометкаУдаления),
//|	МАКСИМУМ(ВалютаВзаиморасчетов),
//|	МАКСИМУМ(ТипДоговора),
//|	МАКСИМУМ(ДоговорПоНашейФорме),
//|	МАКСИМУМ(вогСтатус),
//|	МАКСИМУМ(ДатаСозданияДоговора),
//|	МАКСИМУМ(СрокДействия),
//|	МАКСИМУМ(Владелец),
//|	МАКСИМУМ(Дата),
//|	МАКСИМУМ(Организация),
//|	МАКСИМУМ(Активный),
//|	МАКСИМУМ(Статус),
//|	МАКСИМУМ(ДатаНачалаДействия),
//|	МАКСИМУМ(Приоритет)
//|ПО
//|	Ссылка,
//|	НаправлениеДеятельности,
//|	КС";



Запрос.УстановитьПараметр("Владелец", 	Источник.Ссылка);

РезультатЗапроса = Запрос.Выполнить();

ВыборкаСсылка = РезультатЗапроса.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);

Пока ВыборкаСсылка.Следующий() Цикл
	
	ВыборкаНаправлениеДеятельности = ВыборкаСсылка.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
	Пока ВыборкаНаправлениеДеятельности.Следующий() Цикл
		
		МассивУсловийДоставки = Новый Массив;
		ДатаНачалаДействияУсловийДоставки = Неопределено;
		
		ВыборкаКС = ВыборкаНаправлениеДеятельности.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
		
		Пока ВыборкаКС.Следующий() цикл
			ВыборкаТорговыеТочки = ВыборкаКС.Выбрать();
			Пока ВыборкаТорговыеТочки.Следующий() цикл
				Если ВыборкаТорговыеТочки.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Действует ИЛИ
					 ВыборкаТорговыеТочки.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.СогласованКлиентом ИЛИ
					 ВыборкаТорговыеТочки.Статус = Перечисления.вогСтатусыДоговоровКоммерческихСоглашений.Согласован Тогда
					Если ЗначениеЗаполнено(ВыборкаТорговыеТочки.ВладелецАдреса) тогда				
						Если ТипЗнч(ВыборкаТорговыеТочки.ВладелецАдреса) = Тип("СправочникСсылка.вогТорговыеТочки") Тогда
							
							ДатаНачалаДействияУсловийДоставки = ?(ДатаНачалаДействияУсловийДоставки = Неопределено, ВыборкаТорговыеТочки.ДатаНачалаДействия, Мин(ДатаНачалаДействияУсловийДоставки, ВыборкаТорговыеТочки.ДатаНачалаДействия));
							
							ИсходящиеДанныеДоставка = Новый Структура("Период, Контрагент, Организация, ВидВзаиморасчетов, ВозможнаДоставка");
							ИсходящиеДанныеДоставка.Период = ВыборкаТорговыеТочки.ДатаНачалаДействия;
							ИсходящиеДанныеДоставка.Контрагент = ВыборкаТорговыеТочки.ВладелецАдреса;
							ИсходящиеДанныеДоставка.Организация = ВыборкаТорговыеТочки.Организация;
							ИсходящиеДанныеДоставка.ВидВзаиморасчетов = ВыборкаТорговыеТочки.ВидВзаиморасчетов;
							ИсходящиеДанныеДоставка.ВозможнаДоставка = Истина;
							
							МассивУсловийДоставки.Добавить(ИсходящиеДанныеДоставка);
							
							Если ВыборкаТорговыеТочки.ДатаОкончанияДействия &lt;&gt; '00010101' тогда
								ИсходящиеДанныеДоставка = Новый Структура("Период, Контрагент, Организация, ВидВзаиморасчетов, ВозможнаДоставка");
								ИсходящиеДанныеДоставка.Период = ВыборкаТорговыеТочки.ДатаОкончанияДействия;
								ИсходящиеДанныеДоставка.Контрагент = ВыборкаТорговыеТочки.ВладелецАдреса;
								ИсходящиеДанныеДоставка.Организация = ВыборкаТорговыеТочки.Организация;
								ИсходящиеДанныеДоставка.ВидВзаиморасчетов = ВыборкаТорговыеТочки.ВидВзаиморасчетов;
								ИсходящиеДанныеДоставка.ВозможнаДоставка = Ложь;								
							КонецЕсли;	
							
						КонецЕсли;	
					КонецЕсли;
				КонецЕсли;	
			КонецЦикла;
			
		КонецЦикла;		
		
		
		ВыборкаКС = ВыборкаНаправлениеДеятельности.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
	
		Если ВыборкаКС.Следующий() тогда
			
			ИсходящиеДанные = Новый Структура;
			
			Для Каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
				ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, ВыборкаКС[КолонкаРезультата.Имя]);
			КонецЦикла;
			
			ИсходящиеДанные.Вставить("ИзменятьУсловияДоставки", ?(ДатаНачалаДействияУсловийДоставки = Неопределено, Ложь, Истина));
			ИсходящиеДанные.Вставить("ДатаНачалаДействияУсловийДоставки", ДатаНачалаДействияУсловийДоставки);
			
			ИдентификаторДоговора 	= Новый УникальныйИдентификатор(ВыборкаКС.ИдентификаторДоговора);
			ДоговорСсылка 			= Справочники.ДоговорыКонтрагентов.ПолучитьСсылку(ИдентификаторДоговора);
			
			Если ИсходящиеДанные.ТипДоговора = Справочники.вогТипыДоговоровКонтрагентов.ДоговорПоставкиТовараРазовый тогда
				ИсходящиеДанные.ТипДоговора = Справочники.вогТипыДоговоровКонтрагентов.ДоговорПоставкиТовара;
			КонецЕсли;
			
			ШаблонНаименования = НСтр("ru = '%1 (%2)'");
			ИсходящиеДанные.Наименование = СтрШаблон(
				ШаблонНаименования,
				ВыборкаКС.Наименование,
				ВыборкаКС.ВидВзаиморасчетов);
			
			ВыгрузитьПоПравилу(ДоговорСсылка,, ИсходящиеДанные,, "ДоговорыКонтрагентов_ЮрЛица");
			
			Для каждого ЭлементМассива из МассивУсловийДоставки цикл
				ВыгрузитьПоПравилу(,, ЭлементМассива,, "УсловияДоставки");
			КонецЦикла;	
			
			
			//ВыборкаТорговыеТочки = ВыборкаКС.Выбрать();
			//
			//Пока ВыборкаТорговыеТочки.Следующий() цикл
			//	
			//	Если ЗначениеЗаполнено(ВыборкаТорговыеТочки.ВладелецАдреса) тогда				
			//		
			//		Если ТипЗнч(ВыборкаТорговыеТочки.ВладелецАдреса) = Тип("СправочникСсылка.вогТорговыеТочки") Тогда						
			//			
			//			//ВыгрузитьПоПравилу(ВыборкаТорговыеТочки.ВладелецАдреса,,,, "ТорговыеТочки_Контрагенты");
			//			
			//			ИсходящиеДанныеДоставка = Новый Структура("Период, Контрагент, Организация, ВидВзаиморасчетов, ВозможнаДоставка");
			//			ИсходящиеДанныеДоставка.Период = ВыборкаТорговыеТочки.ДатаНачалаДействия;
			//			ИсходящиеДанныеДоставка.Контрагент = ВыборкаТорговыеТочки.ВладелецАдреса;
			//			ИсходящиеДанныеДоставка.Организация = ВыборкаТорговыеТочки.Организация;
			//			ИсходящиеДанныеДоставка.ВидВзаиморасчетов = ВыборкаТорговыеТочки.ВидВзаиморасчетов;
			//			ИсходящиеДанныеДоставка.ВозможнаДоставка = Истина;
			//			
			//			ВыгрузитьПоПравилу(,, ИсходящиеДанныеДоставка,, "УсловияДоставки");
			//			
			//		КонецЕсли;					
			//		
			//	КонецЕсли;				
			//		
			//КонецЦикла;				
			
		КонецЕсли;		
		
	КонецЦикла;
	
КонецЦикла;
</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносИсторииСогласования" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	РегистрСтатусыСогласованияОбъектов.Период КАК Дата,
	|	РегистрСтатусыСогласованияОбъектов.Статус КАК Статус,
	//|	ВЫБОР
	//|		КОГДА РегистрСтатусыСогласованияОбъектов.РегистраторСтатуса = НЕОПРЕДЕЛЕНО
	//|			ТОГДА ЛОЖЬ
	//|		ИНАЧЕ ИСТИНА
	//|	КОНЕЦ КАК Авто
	|	ИСТИНА КАК Авто
	|
	|ИЗ
	|	РегистрСведений.вогСтатусыСогласованияОбъектов КАК РегистрСтатусыСогласованияОбъектов
	|ГДЕ
	|	РегистрСтатусыСогласованияОбъектов.Объект = &amp;Ссылка
	|
	|УПОРЯДОЧИТЬ ПО
	|	Дата
	|");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносМенеджеровОбъектов" ИспользуетсяПриЗагрузке="false">
			<Текст>
Запрос = Новый Запрос;
Запрос.Текст =
"ВЫБРАТЬ РАЗЛИЧНЫЕ
|	вогМенеджерыДляОбмена.Менеджер КАК МенеджерПокупателя,
|	вогМенеджерыДляОбмена.ДатаНачала КАК ДатаНачала,
|	вогМенеджерыДляОбмена.ДатаОкончания КАК ДатаОкончания,
|	вогМенеджерыДляОбмена.НаправлениеДеятельности КАК ВидВзаиморасчетов,
|	вогМенеджерыДляОбмена.Роль КАК Роль,
|	вогМенеджерыДляОбмена.Подразделение КАК Подразделение,
|	ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка) КАК Организация
|ИЗ
|	РегистрСведений.вогМенеджерыДляОбмена КАК вогМенеджерыДляОбмена
|ГДЕ
|	вогМенеджерыДляОбмена.Владелец = &amp;Ссылка";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
ТаблицаОбъектов = Запрос.Выполнить().Выгрузить();

Для Каждого СтрокаТЧ Из ТаблицаОбъектов Цикл
	СтрокаТЧ.Организация = Справочники.СтруктураПредприятия.ПолучитьОрганизациюПоПодразделению(СтрокаТЧ.Подразделение);
КонецЦикла;

КоллекцияОбъектов = ТаблицаОбъектов.Скопировать();</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносМенеджеровОбъектов_OLD" ИспользуетсяПриЗагрузке="false">
			<Текст>
Запрос = Новый Запрос;
Запрос.Текст =
"ВЫБРАТЬ РАЗЛИЧНЫЕ
|	РегистрМенеджерыОбъектов.Менеджер КАК МенеджерПокупателя,
|	РегистрМенеджерыОбъектов.ДатаНачала КАК ДатаНачала,
|	РегистрМенеджерыОбъектов.ДатаОкончания КАК ДатаОкончания,
|	РегистрМенеджерыОбъектов.НаправлениеДеятельности КАК ВидВзаиморасчетов,
|	РегистрМенеджерыОбъектов.Роль КАК Роль,
|	РегистрМенеджерыОбъектов.Подразделение КАК Подразделение,
|	ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка) КАК Организация
|ИЗ
|	РегистрСведений.вогМенеджерыОбъектов КАК РегистрМенеджерыОбъектов
|ГДЕ
|	РегистрМенеджерыОбъектов.Владелец = &amp;Ссылка
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ РАЗЛИЧНЫЕ
|	вогИсторияМенеджеровОбъектов.Менеджер,
|	вогИсторияМенеджеровОбъектов.ДатаНачала,
|	вогИсторияМенеджеровОбъектов.ДатаОкончания,
|	вогИсторияМенеджеровОбъектов.НаправлениеДеятельности,
|	вогИсторияМенеджеровОбъектов.Роль,
|	вогИсторияМенеджеровОбъектов.Подразделение,
|	ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
|ИЗ
|	РегистрСведений.вогИсторияМенеджеровОбъектов КАК вогИсторияМенеджеровОбъектов
|ГДЕ
|	вогИсторияМенеджеровОбъектов.Владелец = &amp;Ссылка";

//Если ТипЗнч(Источник.Ссылка) = Тип("СправочникСсылка.вогЮридическиеЛица") Тогда
//	Владелец = Источник.Партнер;
//Иначе
//	Владелец = Источник.Ссылка;
//КонецЕсли;

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
ТаблицаОбъектов = Запрос.Выполнить().Выгрузить();

Для Каждого СтрокаТЧ Из ТаблицаОбъектов Цикл
	
	СтрокаТЧ.Организация = Справочники.СтруктураПредприятия.ПолучитьОрганизациюПоПодразделению(СтрокаТЧ.Подразделение);	
	
КонецЦикла;

КоллекцияОбъектов = ТаблицаОбъектов.Скопировать();</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносОрганизацийРЦ" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	ПодразделенияРЦ.Подразделение КАК Подразделение
|ПОМЕСТИТЬ ВТ_Подразделения
|ИЗ
|	Справочник.вогРаспределительныеЦентры.Подразделения КАК ПодразделенияРЦ
|ГДЕ
|	ПодразделенияРЦ.Ссылка = &amp;Ссылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	СтруктураПредприятия.Организация КАК Организация
|ИЗ
|	Справочник.СтруктураПредприятия КАК СтруктураПредприятия
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_Подразделения КАК ВТ_Подразделения
|		ПО СтруктураПредприятия.Ссылка = ВТ_Подразделения.Подразделение
|			И (СтруктураПредприятия.ОбособленноеПодразделение)";

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);

КоллекцияОбъектов = Запрос.Выполнить().Выгрузить();</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПереносУсловийДоставки" ИспользуетсяПриЗагрузке="false">
			<Текст>Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	РегистрУсловияДоставки.Период КАК Период,
	|	РегистрУсловияДоставки.ТорговаяТочка КАК Контрагент,
	|	РегистрУсловияДоставки.Организация КАК Организация,
	|	РегистрУсловияДоставки.Направление КАК ВидВзаиморасчетов,
	|	РегистрУсловияДоставки.ВозможнаДоставка КАК ВозможнаДоставка
	|ИЗ
	|	РегистрСведений.вогУсловияДоставки КАК РегистрУсловияДоставки
	|ГДЕ
	|	РегистрУсловияДоставки.ТорговаяТочка = &amp;Ссылка
	|");

Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
РезультатЗапроса = Запрос.Выполнить();

Выборка = РезультатЗапроса.Выбрать();
Пока Выборка.Следующий() Цикл
	ИсходящиеДанные = Новый Структура;
	Для каждого КолонкаРезультата Из РезультатЗапроса.Колонки Цикл
		ИсходящиеДанные.Вставить(КолонкаРезультата.Имя, Выборка[КолонкаРезультата.Имя]);
	КонецЦикла;

	ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "УсловияДоставки");	
	
КонецЦикла;</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
		<Группа Имя="ПослеЗагрузки">
			<Алгоритм Имя="ДобавитьОрганизациюТранзит" ИспользуетсяПриЗагрузке="true">
				<Текст>
ОрганизацияТранзит = Справочники.Организации.НайтиПоКоду("000000012");

Если ОрганизацияТранзит &lt;&gt; Справочники.Контрагенты.ПустаяСсылка() Тогда
	
	Если Объект.Организации.Найти(ОрганизацияТранзит, "Организация") = Неопределено Тогда
		
		СтрокаТЧ = Объект.Организации.Добавить();
		СтрокаТЧ.Организация = ОрганизацияТранзит;
		
		Объект.ОбменДанными.Загрузка = Истина;
		Объект.Записать();
		
	КонецЕсли;
	
КонецЕсли;</Текст>
				<Параметры>Объект</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнениеУсловийДоставки" ИспользуетсяПриЗагрузке="true">
				<Текст>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	&amp;ТекущаяДата КАК Период,
|	КонтрагентыОрганизации.Ссылка КАК Контрагент,
|	КонтрагентыОрганизации.Организация,
|	ВидыВзаиморасчетов.Ссылка КАК ВидВзаиморасчетов,
|	ИСТИНА КАК ВозможнаДоставка
|ИЗ
|	Справочник.Контрагенты.Организации КАК КонтрагентыОрганизации,
|	Справочник.ВидыВзаиморасчетов КАК ВидыВзаиморасчетов
|ГДЕ
|	КонтрагентыОрганизации.Ссылка = &amp;Ссылка
|	И ВидыВзаиморасчетов.ПометкаУдаления = ЛОЖЬ
|	И НЕ КонтрагентыОрганизации.Организация = &amp;ОрганизацияТранзит";

Запрос.УстановитьПараметр("ОрганизацияТранзит", Справочники.Организации.НайтиПоКоду("000000012"));
Запрос.УстановитьПараметр("Ссылка", 			Объект.Ссылка);
Запрос.УстановитьПараметр("ТекущаяДата", 		ТекущаяДата());

РезультатЗапроса = Запрос.Выполнить();

Выборка = РезультатЗапроса.Выбрать();

Пока Выборка.Следующий() Цикл
	
	НаборЗаписей = РегистрыСведений.УсловияДоставкиТовара.СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Контрагент.Установить(Выборка.Контрагент);
	НаборЗаписей.Отбор.Организация.Установить(Выборка.Организация);
	НаборЗаписей.Отбор.ВидВзаиморасчетов.Установить(Выборка.ВидВзаиморасчетов);
	
	ЗаписьНабора = НаборЗаписей.Добавить();
	ЗаполнитьЗначенияСвойств(ЗаписьНабора, Выборка);
	
	Попытка
		НаборЗаписей.Записать();
	Исключение
		
	КонецПопытки;
	
КонецЦикла;</Текст>
				<Параметры>Объект</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьКредитныеУсловия" ИспользуетсяПриЗагрузке="true">
				<Текст>
// Тищенко В.В.

Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	КредитныеУсловияПоУмолчанию = ПараметрыОбъекта.Получить("ВыгружатьКредитныеУсловия");
	Если КредитныеУсловияПоУмолчанию Тогда
		Для каждого Стр Из Объект.Организации Цикл
			МенеджерЗаписиРС 						= РегистрыСведений.ОграниченияВнеСегмента.СоздатьМенеджерЗаписи();
			МенеджерЗаписиРС.Период					= ТекущаяДата();
			МенеджерЗаписиРС.Организация 			= Стр.Организация;
			МенеджерЗаписиРС.Ограничение 			= Справочники.ОграниченияКредитногоКонтроля.МаксимальныйЛимит;
			МенеджерЗаписиРС.ГруппаДляХолдинга		= Объект.ГруппаДляХолдинга;
			МенеджерЗаписиРС.Действует				= Истина;
			МенеджерЗаписиРС.ЗначениеОграничения 	= 0;
			МенеджерЗаписиРС.Записать();
			
			//МенеджерЗаписиРС 						= РегистрыСведений.ОграниченияВнеСегмента.СоздатьМенеджерЗаписи();
			//МенеджерЗаписиРС.Период					= ТекущаяДата();
			//МенеджерЗаписиРС.Организация 			= Стр.Организация;
			//МенеджерЗаписиРС.Ограничение 			= Справочники.ОграниченияКредитногоКонтроля.ПредельнаяОтсрочка;
			//МенеджерЗаписиРС.ГруппаДляХолдинга		= Объект.ГруппаДляХолдинга;
			//МенеджерЗаписиРС.Действует				= Истина;
			//МенеджерЗаписиРС.ЗначениеОграничения 	= 0;
			//МенеджерЗаписиРС.Записать();
			//
			//МенеджерЗаписиРС 						= РегистрыСведений.ОграниченияВнеСегмента.СоздатьМенеджерЗаписи();
			//МенеджерЗаписиРС.Период					= ТекущаяДата();
			//МенеджерЗаписиРС.Организация 			= Стр.Организация;
			//МенеджерЗаписиРС.Ограничение 			= Справочники.ОграниченияКредитногоКонтроля.ПДЗПроцент;
			//МенеджерЗаписиРС.ГруппаДляХолдинга		= Объект.ГруппаДляХолдинга;
			//МенеджерЗаписиРС.Действует				= Истина;
			//МенеджерЗаписиРС.ЗначениеОграничения 	= 0;
			//МенеджерЗаписиРС.Записать();	
		КонецЦикла;
	КонецЕсли;
КонецЕсли;
</Текст>
				<Параметры>Объект</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьМенеджеров" ИспользуетсяПриЗагрузке="true">
				<Текст>
Если ОбъектНайден Тогда
	
	ЗагруженныеМенеджеры 	= Объект.МенеджерыПокупателя.Выгрузить();
	ТекущиеМенеджеры 		= Объект.Ссылка.МенеджерыПокупателя.Выгрузить();
	
	Для Каждого СтрокаЗагруженныйМенеджер Из ЗагруженныеМенеджеры Цикл
		
		Если ЗначениеЗаполнено(СтрокаЗагруженныйМенеджер.ДатаОкончания) Тогда
			
			ПараметрыОтбора = Новый Структура;
			ПараметрыОтбора.Вставить("МенеджерПокупателя");
			ПараметрыОтбора.Вставить("ВидВзаиморасчетов");
			ПараметрыОтбора.Вставить("Роль");
			ПараметрыОтбора.Вставить("Организация");
			
			ЗаполнитьЗначенияСвойств(ПараметрыОтбора, СтрокаЗагруженныйМенеджер);
			
			ПараметрыОтбора.Вставить("ДатаОкончания", Дата(1,1,1));
			
			НайденныеСтроки = ТекущиеМенеджеры.НайтиСтроки(ПараметрыОтбора);
			
			Для Каждого НайденнаяСтрока Из НайденныеСтроки Цикл
				НайденнаяСтрока.ДатаОкончания = СтрокаЗагруженныйМенеджер.ДатаОкончания;
				ЕстьИзменения = Истина;
			КонецЦикла;
			
		Иначе
			
			ПараметрыОтбора = Новый Структура;
			ПараметрыОтбора.Вставить("МенеджерПокупателя");
			ПараметрыОтбора.Вставить("ВидВзаиморасчетов");
			ПараметрыОтбора.Вставить("Роль");
			ПараметрыОтбора.Вставить("Организация");
			ПараметрыОтбора.Вставить("ДатаОкончания");
			
			ЗаполнитьЗначенияСвойств(ПараметрыОтбора, СтрокаЗагруженныйМенеджер);
			
			НайденныеСтроки = ТекущиеМенеджеры.НайтиСтроки(ПараметрыОтбора);
			
			Если НайденныеСтроки.Количество() = 0 Тогда
				НоваяСтрока = ТекущиеМенеджеры.Добавить();
				ЗаполнитьЗначенияСвойств(НоваяСтрока, СтрокаЗагруженныйМенеджер);
				ЕстьИзменения = Истина;
			КонецЕсли;
			
		КонецЕсли;
		
	КонецЦикла;
	
	Объект.МенеджерыПокупателя.Загрузить(ТекущиеМенеджеры);
	
КонецЕсли;

</Текст>
				<Параметры>Объект, ЕстьИзменения</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьМенеджеров_OLD" ИспользуетсяПриЗагрузке="true">
				<Текст>
Если ОбъектНайден Тогда
	
	//Запрос = Новый Запрос;
	//Запрос.Текст = 
	//"ВЫБРАТЬ
	//|	ТЗ_Менеджеры.МенеджерПокупателя,
	//|	ТЗ_Менеджеры.ДатаНачала,
	//|	ТЗ_Менеджеры.ДатаОкончания,
	//|	ТЗ_Менеджеры.ВидВзаиморасчетов,
	//|	ТЗ_Менеджеры.Роль,
	//|	ТЗ_Менеджеры.Организация,
	//|	ТЗ_Менеджеры.Основной
	//|ПОМЕСТИТЬ ВТ_ЗагруженныеМенеджеры
	//|ИЗ
	//|	&amp;ТЗ_Менеджеры КАК ТЗ_Менеджеры
	//|;
	//|
	//|////////////////////////////////////////////////////////////////////////////////
	//|ВЫБРАТЬ
	//|	КонтрагентыМенеджерыПокупателя.МенеджерПокупателя,
	//|	ВЫБОР
	//|		КОГДА КонтрагентыМенеджерыПокупателя.Организация = &amp;ОрганизацияРоссвер
	//|				ИЛИ КонтрагентыМенеджерыПокупателя.Организация = &amp;ОрганизацияВОГНева
	//|			ТОГДА &amp;ОрганизацияВОГ
	//|		ИНАЧЕ КонтрагентыМенеджерыПокупателя.Организация
	//|	КОНЕЦ КАК Организация,
	//|	КонтрагентыМенеджерыПокупателя.ДатаНачала,
	//|	КонтрагентыМенеджерыПокупателя.ДатаОкончания,
	//|	КонтрагентыМенеджерыПокупателя.ВидВзаиморасчетов,
	//|	КонтрагентыМенеджерыПокупателя.Роль,
	//|	КонтрагентыМенеджерыПокупателя.Основной
	//|ПОМЕСТИТЬ ВТ_ТекущиеМенеджеры
	//|ИЗ
	//|	Справочник.Контрагенты.МенеджерыПокупателя КАК КонтрагентыМенеджерыПокупателя
	//|ГДЕ
	//|	КонтрагентыМенеджерыПокупателя.Ссылка = &amp;Ссылка
	//|;
	//|
	//|////////////////////////////////////////////////////////////////////////////////
	//|ВЫБРАТЬ
	//|	ВТ_ЗагруженныеМенеджеры.МенеджерПокупателя,
	//|	ВТ_ЗагруженныеМенеджеры.ДатаНачала,
	//|	ВТ_ЗагруженныеМенеджеры.ДатаОкончания,
	//|	ВТ_ЗагруженныеМенеджеры.ВидВзаиморасчетов,
	//|	ВТ_ЗагруженныеМенеджеры.Роль,
	//|	ВТ_ЗагруженныеМенеджеры.Организация,
	//|	ВТ_ЗагруженныеМенеджеры.Основной
	//|ИЗ
	//|	ВТ_ЗагруженныеМенеджеры КАК ВТ_ЗагруженныеМенеджеры
	//|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ТекущиеМенеджеры КАК ВТ_ТекущиеМенеджеры
	//|		ПО ВТ_ЗагруженныеМенеджеры.МенеджерПокупателя = ВТ_ТекущиеМенеджеры.МенеджерПокупателя
	//|			И ВТ_ЗагруженныеМенеджеры.Организация = ВТ_ТекущиеМенеджеры.Организация
	//|ГДЕ
	//|	(ВТ_ТекущиеМенеджеры.Организация ЕСТЬ NULL
	//|			ИЛИ НЕ ВТ_ЗагруженныеМенеджеры.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1))
	//|
	//|ОБЪЕДИНИТЬ ВСЕ
	//|
	//|ВЫБРАТЬ РАЗЛИЧНЫЕ
	//|	ВТ_ТекущиеМенеджеры.МенеджерПокупателя,
	//|	ВТ_ТекущиеМенеджеры.ДатаНачала,
	//|	ВТ_ТекущиеМенеджеры.ДатаОкончания,
	//|	ВТ_ТекущиеМенеджеры.ВидВзаиморасчетов,
	//|	ВТ_ТекущиеМенеджеры.Роль,
	//|	ВТ_ТекущиеМенеджеры.Организация,
	//|	ВТ_ТекущиеМенеджеры.Основной
	//|ИЗ
	//|	ВТ_ТекущиеМенеджеры КАК ВТ_ТекущиеМенеджеры
	//|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ЗагруженныеМенеджеры КАК ВТ_ЗагруженныеМенеджеры
	//|		ПО ВТ_ТекущиеМенеджеры.МенеджерПокупателя = ВТ_ЗагруженныеМенеджеры.МенеджерПокупателя
	//|			И ВТ_ТекущиеМенеджеры.Организация = ВТ_ЗагруженныеМенеджеры.Организация
	//|			И ВТ_ТекущиеМенеджеры.ДатаНачала = ВТ_ЗагруженныеМенеджеры.ДатаНачала
	//|			И ВТ_ТекущиеМенеджеры.ВидВзаиморасчетов = ВТ_ЗагруженныеМенеджеры.ВидВзаиморасчетов
	//|			И ВТ_ТекущиеМенеджеры.Роль = ВТ_ЗагруженныеМенеджеры.Роль
	//|			И НЕ ВТ_ЗагруженныеМенеджеры.ДатаОкончания = ДАТАВРЕМЯ(1,1,1)
	//|ГДЕ
	//|	ВТ_ЗагруженныеМенеджеры.ДатаОкончания ЕСТЬ NULL";
	//
	//Запрос.УстановитьПараметр("Ссылка", 				Ссылка);
	//Запрос.УстановитьПараметр("ТЗ_Менеджеры", 			Объект.МенеджерыПокупателя.Выгрузить());
	//Запрос.УстановитьПараметр("ОрганизацияВОГ", 		Справочники.Организации.НайтиПоНаименованию("ТК ВОГ"));
	//Запрос.УстановитьПараметр("ОрганизацияРоссвер", 	Справочники.Организации.НайтиПоНаименованию("Россвер"));
	//Запрос.УстановитьПараметр("ОрганизацияВОГНева", 	Справочники.Организации.НайтиПоНаименованию("ВОГ Нева"));
	//
	//РезультатЗапроса = Запрос.Выполнить();
	//
	//Объект.МенеджерыПокупателя.Загрузить(РезультатЗапроса.Выгрузить());
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТЗ_Менеджеры.МенеджерПокупателя,
	|	ТЗ_Менеджеры.ДатаНачала,
	|	ТЗ_Менеджеры.ДатаОкончания,
	|	ТЗ_Менеджеры.ВидВзаиморасчетов,
	|	ТЗ_Менеджеры.Роль,
	|	ТЗ_Менеджеры.Организация,
	|	ТЗ_Менеджеры.Основной
	|ПОМЕСТИТЬ ВТ_ЗагруженныеМенеджеры
	|ИЗ
	|	&amp;ТЗ_МенеджерыЗагруженные КАК ТЗ_Менеджеры
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТЗ_МенеджерыТекущие.НомерСтроки,
	|	ТЗ_МенеджерыТекущие.МенеджерПокупателя,
	|	ТЗ_МенеджерыТекущие.Организация КАК Организация,
	|	ТЗ_МенеджерыТекущие.ДатаНачала,
	|	ТЗ_МенеджерыТекущие.ДатаОкончания,
	|	ТЗ_МенеджерыТекущие.ВидВзаиморасчетов,
	|	ТЗ_МенеджерыТекущие.Роль,
	|	ТЗ_МенеджерыТекущие.Основной
	|ПОМЕСТИТЬ ТЗ_ТекущиеМенеджеры
	|ИЗ
	|	Справочник.Контрагенты.МенеджерыПокупателя КАК ТЗ_МенеджерыТекущие
	|ГДЕ
	|	ТЗ_МенеджерыТекущие.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ТЗ_МенеджерыТекущие.МенеджерПокупателя,
	|	ВЫБОР
	|		КОГДА ТЗ_МенеджерыТекущие.Организация = &amp;ОрганизацияРоссвер
	|				ИЛИ ТЗ_МенеджерыТекущие.Организация = &amp;ОрганизацияВОГНева
	|			ТОГДА &amp;ОрганизацияВОГ
	|		ИНАЧЕ ТЗ_МенеджерыТекущие.Организация
	|	КОНЕЦ КАК Организация,
	|	ТЗ_МенеджерыТекущие.ДатаНачала,
	|	ТЗ_МенеджерыТекущие.ДатаОкончания,
	|	ТЗ_МенеджерыТекущие.ВидВзаиморасчетов,
	|	ТЗ_МенеджерыТекущие.Роль,
	|	ТЗ_МенеджерыТекущие.Основной,
	|	ТЗ_МенеджерыТекущие.НомерСтроки
	|ПОМЕСТИТЬ ВТ_ТекущиеМенеджеры
	|ИЗ
	|	ТЗ_ТекущиеМенеджеры КАК ТЗ_МенеджерыТекущие
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ВТ_ТекущиеМенеджеры.МенеджерПокупателя,
	|	ВТ_ТекущиеМенеджеры.ДатаНачала,
	|	ВЫБОР
	|		КОГДА ВТ_ТекущиеМенеджеры.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
	|			ТОГДА ЕСТЬNULL(ВТ_ЗагруженныеМенеджеры.ДатаОкончания, ДОБАВИТЬКДАТЕ(ВТ_ЗагруженныеМенеджеры_ПоОтбору.ДатаНачала, ДЕНЬ, -1))
	|		ИНАЧЕ ВТ_ТекущиеМенеджеры.ДатаОкончания
	|	КОНЕЦ КАК ДатаОкончания,
	|	ВТ_ТекущиеМенеджеры.ВидВзаиморасчетов,
	|	ВТ_ТекущиеМенеджеры.Роль,
	|	ВТ_ТекущиеМенеджеры.Организация,
	|	ВТ_ТекущиеМенеджеры.Основной
	|ПОМЕСТИТЬ ВТ_ВсеМенеджеры
	|ИЗ
	|	ВТ_ТекущиеМенеджеры КАК ВТ_ТекущиеМенеджеры
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ЗагруженныеМенеджеры КАК ВТ_ЗагруженныеМенеджеры
	|		ПО ВТ_ТекущиеМенеджеры.МенеджерПокупателя = ВТ_ЗагруженныеМенеджеры.МенеджерПокупателя
	|			И ВТ_ТекущиеМенеджеры.Организация = ВТ_ЗагруженныеМенеджеры.Организация
	|			И ВТ_ТекущиеМенеджеры.ДатаНачала = ВТ_ЗагруженныеМенеджеры.ДатаНачала
	|			И ВТ_ТекущиеМенеджеры.ВидВзаиморасчетов = ВТ_ЗагруженныеМенеджеры.ВидВзаиморасчетов
	|			И ВТ_ТекущиеМенеджеры.Роль = ВТ_ЗагруженныеМенеджеры.Роль
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ЗагруженныеМенеджеры КАК ВТ_ЗагруженныеМенеджеры_ПоОтбору
	|		ПО ВТ_ТекущиеМенеджеры.Организация = ВТ_ЗагруженныеМенеджеры_ПоОтбору.Организация
	|			И ВТ_ТекущиеМенеджеры.ВидВзаиморасчетов = ВТ_ЗагруженныеМенеджеры_ПоОтбору.ВидВзаиморасчетов
	|			И ВТ_ТекущиеМенеджеры.Роль = ВТ_ЗагруженныеМенеджеры_ПоОтбору.Роль
	// ++ Изменено 29.05.19 Добавлено
	|			И ВТ_ТекущиеМенеджеры.ДатаНачала &lt;= ВТ_ЗагруженныеМенеджеры_ПоОтбору.ДатаНачала
	// -- Изменено 29.05.19
	|			И ВТ_ЗагруженныеМенеджеры_ПоОтбору.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
	//|
	//|ОБЪЕДИНИТЬ ВСЕ
	//|
	//|ВЫБРАТЬ
	//|	ВТ_ЗагруженныеМенеджеры.МенеджерПокупателя,
	//|	ВТ_ЗагруженныеМенеджеры.ДатаНачала,
	//|	ВТ_ЗагруженныеМенеджеры.ДатаОкончания,
	//|	ВТ_ЗагруженныеМенеджеры.ВидВзаиморасчетов,
	//|	ВТ_ЗагруженныеМенеджеры.Роль,
	//|	ВТ_ЗагруженныеМенеджеры.Организация,
	//|	ВТ_ЗагруженныеМенеджеры.Основной
	//|ИЗ
	//|	ВТ_ЗагруженныеМенеджеры КАК ВТ_ЗагруженныеМенеджеры
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ВТ_ЗагруженныеМенеджеры.МенеджерПокупателя,
	|	ВТ_ЗагруженныеМенеджеры.ДатаНачала,
	|	ВТ_ЗагруженныеМенеджеры.ДатаОкончания,
	|	ВТ_ЗагруженныеМенеджеры.ВидВзаиморасчетов,
	|	ВТ_ЗагруженныеМенеджеры.Роль,
	|	ВТ_ЗагруженныеМенеджеры.Организация,
	|	ВТ_ЗагруженныеМенеджеры.Основной
	|ИЗ
	|	ВТ_ЗагруженныеМенеджеры КАК ВТ_ЗагруженныеМенеджеры
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ТекущиеМенеджеры КАК ВТ_ТекущиеМенеджеры
	|		ПО (ВТ_ТекущиеМенеджеры.МенеджерПокупателя = ВТ_ЗагруженныеМенеджеры.МенеджерПокупателя)
	|			И (ВТ_ТекущиеМенеджеры.Организация = ВТ_ЗагруженныеМенеджеры.Организация)
	// ++ Изменено 29.05.19 знак "=" изменен на "&gt;="
	|			И (ВТ_ТекущиеМенеджеры.ДатаНачала &gt;= ВТ_ЗагруженныеМенеджеры.ДатаНачала)
	|			И (ВТ_ТекущиеМенеджеры.ДатаОкончания &gt;= ВТ_ЗагруженныеМенеджеры.ДатаОкончания)
	// -- Изменено
	|			И (ВТ_ТекущиеМенеджеры.ВидВзаиморасчетов = ВТ_ЗагруженныеМенеджеры.ВидВзаиморасчетов)
	|			И (ВТ_ТекущиеМенеджеры.Роль = ВТ_ЗагруженныеМенеджеры.Роль)
	|ГДЕ
	|	ВТ_ТекущиеМенеджеры.МенеджерПокупателя ЕСТЬ NULL
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ РАЗЛИЧНЫЕ
	|	ЕСТЬNULL(ВТ_ТекущиеМенеджеры.НомерСтроки, 10000) КАК НомерСтроки,
	|	ВТ_ВсеМенеджеры.МенеджерПокупателя,
	|	ВТ_ВсеМенеджеры.ДатаНачала,
	// ++ Изменено 29.05.19
	|	МАКСИМУМ(ВТ_ВсеМенеджеры.ДатаОкончания) КАК ДатаОкончания,
	// -- Изменено
	|	ВТ_ВсеМенеджеры.ВидВзаиморасчетов,
	|	ВТ_ВсеМенеджеры.Роль,
	|	ВТ_ВсеМенеджеры.Организация,
	|	ВТ_ВсеМенеджеры.Основной
	|ИЗ
	|	ВТ_ВсеМенеджеры КАК ВТ_ВсеМенеджеры
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ТекущиеМенеджеры КАК ВТ_ТекущиеМенеджеры
	|		ПО ВТ_ВсеМенеджеры.МенеджерПокупателя = ВТ_ТекущиеМенеджеры.МенеджерПокупателя
	|			И ВТ_ВсеМенеджеры.Организация = ВТ_ТекущиеМенеджеры.Организация
	|			И ВТ_ВсеМенеджеры.ДатаНачала = ВТ_ТекущиеМенеджеры.ДатаНачала
	|			И ВТ_ВсеМенеджеры.ВидВзаиморасчетов = ВТ_ТекущиеМенеджеры.ВидВзаиморасчетов
	|			И ВТ_ВсеМенеджеры.Роль = ВТ_ТекущиеМенеджеры.Роль
	|
	// ++ Изменено 29.05.19
	|СГРУППИРОВАТЬ ПО
	|	ВТ_ВсеМенеджеры.МенеджерПокупателя,
	|	ВТ_ВсеМенеджеры.ДатаНачала,
	|	ВТ_ВсеМенеджеры.ВидВзаиморасчетов,
	|	ВТ_ВсеМенеджеры.Роль,
	|	ВТ_ВсеМенеджеры.Организация,
	|	ВТ_ВсеМенеджеры.Основной,
	|	ЕСТЬNULL(ВТ_ТекущиеМенеджеры.НомерСтроки, 10000)
	// -- Изменено
	|
	|УПОРЯДОЧИТЬ ПО
	|	НомерСтроки";
	
	Запрос.УстановитьПараметр("Ссылка", 					Ссылка);
	Запрос.УстановитьПараметр("ТЗ_МенеджерыЗагруженные", 	Объект.МенеджерыПокупателя.Выгрузить());
	Запрос.УстановитьПараметр("ОрганизацияВОГ", 			Справочники.Организации.НайтиПоНаименованию("ТК ВОГ"));
	Запрос.УстановитьПараметр("ОрганизацияРоссвер", 		Справочники.Организации.НайтиПоНаименованию("Россвер"));
	Запрос.УстановитьПараметр("ОрганизацияВОГНева", 		Справочники.Организации.НайтиПоНаименованию("ВОГ Нева"));
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВременнаяТаблицаМенеджеры = РезультатЗапроса.Выгрузить();
	ВременнаяТаблицаМенеджеры.Очистить();	
	
	ВыборкаДанных = РезультатЗапроса.Выбрать();
	
	СчетчикСтрок = 0;
	
	Пока ВыборкаДанных.Следующий() Цикл
		
		Если ВыборкаДанных.НомерСтроки &lt;&gt; 10000 Тогда
			
			НоваяСтрока = ВременнаяТаблицаМенеджеры.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, ВыборкаДанных);
			СчетчикСтрок = ВыборкаДанных.НомерСтроки;
			
		Иначе
			
			Если ВыборкаДанных.МенеджерПокупателя = Справочники.Пользователи.ПустаяСсылка() Тогда
				Продолжить;
			КонецЕсли;
			
			СчетчикСтрок = СчетчикСтрок + 1;
			НоваяСтрока = ВременнаяТаблицаМенеджеры.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока, ВыборкаДанных);
			НоваяСтрока.НомерСтроки = СчетчикСтрок;
			
		КонецЕсли;
		
	КонецЦикла;
	
	Объект.МенеджерыПокупателя.Загрузить(ВременнаяТаблицаМенеджеры);
	
КонецЕсли;
</Текст>
				<Параметры>Объект</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьОрганизации" ИспользуетсяПриЗагрузке="true">
				<Текст>
Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда
	
	ПараметрОрганизации = ПараметрыОбъекта.Получить("Организации");
	
	Если ПараметрОрганизации &lt;&gt; Неопределено Тогда
		
		ТаблицаОрганизаций = ЗначениеИзСтрокиВнутр(ПараметрОрганизации);
		
		Если ТипЗнч(ТаблицаОрганизаций) = Тип("ТаблицаЗначений")
			И ТаблицаОрганизаций.Количество() &gt; 0 Тогда
			
			ТаблицаДляЗапроса = Новый ТаблицаЗначений();
			ТаблицаДляЗапроса.Колонки.Добавить("Организация", Новый ОписаниеТипов("СправочникСсылка.Организации"));
			
			Для Каждого СтрокаТЧ Из ТаблицаОрганизаций Цикл
				
				НайденнаяОрганизация = Справочники.Организации.НайтиПоНаименованию(СтрокаТЧ.Организация);
				Если НайденнаяОрганизация &lt;&gt; Справочники.Организации.ПустаяСсылка() Тогда
					СтрокаТЧДляЗапроса = ТаблицаДляЗапроса.Добавить();
					СтрокаТЧДляЗапроса.Организация = Справочники.Организации.НайтиПоНаименованию(СтрокаТЧ.Организация);
				КонецЕсли;
				
			КонецЦикла;
			
			Если ОбъектНайден Тогда
				
				Запрос = Новый Запрос;
				Запрос.Текст = 
				"ВЫБРАТЬ
				|	ТЗ_Организации.Организация
				|ПОМЕСТИТЬ ВТ_Организации
				|ИЗ
				|	&amp;ТЗ_Организации КАК ТЗ_Организации
				|;
				|
				|////////////////////////////////////////////////////////////////////////////////
				|ВЫБРАТЬ РАЗЛИЧНЫЕ
				//|	ВЫБОР
				//|		КОГДА КонтрагентыОрганизации.Организация = &amp;ОрганизацияРоссвер
				//|				ИЛИ КонтрагентыОрганизации.Организация = &amp;ОрганизацияВОГНева
				//|			ТОГДА &amp;ОрганизацияВОГ
				//|		ИНАЧЕ КонтрагентыОрганизации.Организация
				//|	КОНЕЦ КАК Организация
				|	КонтрагентыОрганизации.Организация КАК Организация
				|ПОМЕСТИТЬ ВТ_ОрганизацииКонтрагента
				|ИЗ
				|	Справочник.Контрагенты.Организации КАК КонтрагентыОрганизации
				|ГДЕ
				|	КонтрагентыОрганизации.Ссылка = &amp;Ссылка
				|;
				|
				|////////////////////////////////////////////////////////////////////////////////
				|ВЫБРАТЬ
				|	ВТ_Организации.Организация
				|ИЗ
				|	ВТ_Организации КАК ВТ_Организации
				|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_ОрганизацииКонтрагента КАК ОрганизацииКонтрагента
				|		ПО ВТ_Организации.Организация = ОрганизацииКонтрагента.Организация
				|ГДЕ
				|	ОрганизацииКонтрагента.Организация ЕСТЬ NULL";
				
				Запрос.УстановитьПараметр("Ссылка", 				Объект.Ссылка);
				Запрос.УстановитьПараметр("ТЗ_Организации", 		ТаблицаДляЗапроса);
				Запрос.УстановитьПараметр("ОрганизацияВОГ", 		Справочники.Организации.НайтиПоНаименованию("ТК ВОГ"));
				Запрос.УстановитьПараметр("ОрганизацияРоссвер", 	Справочники.Организации.НайтиПоНаименованию("Россвер"));
				Запрос.УстановитьПараметр("ОрганизацияВОГНева", 	Справочники.Организации.НайтиПоНаименованию("ВОГ Нева"));
				
				РезультатЗапроса = Запрос.Выполнить();
				
				ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
				
				Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
					
					СтрокаТЧ = Объект.Организации.Добавить();
					СтрокаТЧ.Организация = ВыборкаДетальныеЗаписи.Организация;
					
				КонецЦикла;
				
			Иначе
				
				Объект.Организации.Загрузить(ТаблицаДляЗапроса);
				
			КонецЕсли;
			
			ЕстьИзменения = Истина;
			
		КонецЕсли;
		
	КонецЕсли;
	
КонецЕсли;

ОрганизацияТранзит = Справочники.Организации.НайтиПоКоду("000000012");

Если ОрганизацияТранзит &lt;&gt; Справочники.Контрагенты.ПустаяСсылка() Тогда
	
	Если Объект.Организации.Найти(ОрганизацияТранзит, "Организация") = Неопределено Тогда
		
		СтрокаТЧ = Объект.Организации.Добавить();
		СтрокаТЧ.Организация = ОрганизацияТранзит;
		
		ЕстьИзменения = Истина;
		
	КонецЕсли;
	
КонецЕсли;</Текст>
				<Параметры>Объект, ЕстьИзменения</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ЗаполнитьСтатусыСогласования" ИспользуетсяПриЗагрузке="true">
				<Текст>
Если ОбъектНайден Тогда
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ТаблицаСогласования.Дата КАК Дата,
	|	ТаблицаСогласования.Статус КАК Статус,
	|	ТаблицаСогласования.Авто КАК Авто
	|ПОМЕСТИТЬ ВТ_СтатусыЗагруженные
	|ИЗ
	|	&amp;ТаблицаСогласования КАК ТаблицаСогласования
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	КонтрагентыСогласование.НомерСтроки,
	|	КонтрагентыСогласование.Дата,
	|	КонтрагентыСогласование.Пользователь,
	|	КонтрагентыСогласование.Статус,
	|	КонтрагентыСогласование.Комментарий,
	|	КонтрагентыСогласование.Авто,
	|	КонтрагентыСогласование.НеАктивен,
	|	КонтрагентыСогласование.РольСогласующего
	|ПОМЕСТИТЬ ВТ_СтатусыТекущие
	|ИЗ
	|	Справочник.Контрагенты.Согласование КАК КонтрагентыСогласование
	|ГДЕ
	|	КонтрагентыСогласование.Ссылка = &amp;Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ВТ_СтатусыТекущие.НомерСтроки,
	|	ВТ_СтатусыТекущие.Дата,
	|	ВТ_СтатусыТекущие.Пользователь,
	|	ВТ_СтатусыТекущие.Статус,
	|	ВТ_СтатусыТекущие.Комментарий,
	|	ВТ_СтатусыТекущие.Авто,
	|	ВТ_СтатусыТекущие.НеАктивен,
	|	ВТ_СтатусыТекущие.РольСогласующего
	|ИЗ
	|	ВТ_СтатусыТекущие КАК ВТ_СтатусыТекущие
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	NULL,
	|	ВТ_СтатусыЗагруженные.Дата,
	|	&amp;ТекПользователь,
	|	ВТ_СтатусыЗагруженные.Статус,
	|	"""",
	|	ВТ_СтатусыЗагруженные.Авто,
	|	NULL,
	|	NULL
	|ИЗ
	|	ВТ_СтатусыЗагруженные КАК ВТ_СтатусыЗагруженные
	|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_СтатусыТекущие КАК ВТ_СтатусыТекущие
	|		ПО ВТ_СтатусыЗагруженные.Авто = ВТ_СтатусыТекущие.Авто
	|			И ВТ_СтатусыЗагруженные.Дата = ВТ_СтатусыТекущие.Дата
	|			И ВТ_СтатусыЗагруженные.Статус = ВТ_СтатусыТекущие.Статус
	|ГДЕ
	|	ВТ_СтатусыТекущие.Статус ЕСТЬ NULL";
	
	Запрос.УстановитьПараметр("ТаблицаСогласования", 	Объект.Согласование);
	Запрос.УстановитьПараметр("Ссылка", 				Объект.Ссылка);
	Запрос.УстановитьПараметр("ТекПользователь", 		глЗначениеПеременной("глТекущийПользователь"));
	
	РезультатЗапроса = Запрос.Выполнить();
	
	Объект.Согласование.Загрузить(РезультатЗапроса.Выгрузить());
	
КонецЕсли;</Текст>
			</Алгоритм>
			<Алгоритм Имя="ИзменитьМенеджераВДоговорах" ИспользуетсяПриЗагрузке="true">
				<Текст>
СписокОрганизаций = Новый СписокЗначений();

Для Каждого Стр Из Объект.МенеджерыПокупателя Цикл
	Если Не ЗначениеЗаполнено(Стр.ДатаОкончания) Тогда
		СписокОрганизаций.Добавить(Стр.Организация);
	КонецЕсли;
КонецЦикла;

Запрос = Новый Запрос;
Запрос.Текст =
"ВЫБРАТЬ
|	ДоговорыКонтрагентов.Ссылка КАК Договор,
|	ДоговорыКонтрагентов.Организация,
|	ДоговорыКонтрагентов.ВидВзаиморасчетов
|ИЗ
|	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
|ГДЕ
|	НЕ ДоговорыКонтрагентов.ПометкаУдаления
//|	И ДоговорыКонтрагентов.Активный
|	И ДоговорыКонтрагентов.Владелец = &amp;Контрагент
|	И ДоговорыКонтрагентов.Организация В(&amp;Организации)";

Запрос.УстановитьПараметр("Контрагент", 	Объект.Ссылка);
Запрос.УстановитьПараметр("Организации", 	СписокОрганизаций);

Выборка = Запрос.Выполнить().Выбрать();

Пока Выборка.Следующий() Цикл
	
	Попытка
		
		ЭлементДоговор = Выборка.Договор.ПолучитьОбъект();
		ЭлементДоговор.Заблокировать();
		
	Исключение
		
	КонецПопытки;
	
	Если ЭлементДоговор.Заблокирован() Тогда
		
		ДоговорИзменен = Ложь;
		
		Отбор = Новый Структура();
		Отбор.Вставить("Организация", 		Выборка.Организация);
		Отбор.Вставить("ДатаОкончания", 	'00010101');
		Отбор.Вставить("Основной", 			Истина);
		Отбор.Вставить("ВидВзаиморасчетов", Выборка.ВидВзаиморасчетов);
		
		МенеджерыДляЗамены = Объект.МенеджерыПокупателя.НайтиСтроки(Отбор);
		
		Для Каждого Менеджер Из МенеджерыДляЗамены Цикл
			
			Если Менеджер.Роль = Справочники.РолиКонтактныхЛиц.Менеджер
				И Менеджер.МенеджерПокупателя &lt;&gt; ЭлементДоговор.ОтветственныйМенеджер Тогда
				
				ЭлементДоговор.ОтветственныйМенеджер = Менеджер.МенеджерПокупателя;
				ДоговорИзменен = Истина;
				
			ИначеЕсли Менеджер.Роль = Справочники.РолиКонтактныхЛиц.Координатор
				И Менеджер.МенеджерПокупателя &lt;&gt; ЭлементДоговор.ОтветственныйКоординатор Тогда
				
				ЭлементДоговор.ОтветственныйКоординатор = Менеджер.МенеджерПокупателя;
				ДоговорИзменен = Истина;
				
			КонецЕсли;
			
		КонецЦикла;	
		
		Если ДоговорИзменен Тогда
			
			Попытка
				ЭлементДоговор.ОбменДанными.Загрузка = Истина;
				ЭлементДоговор.Записать();
			Исключение
				
			КонецПопытки;
			
		КонецЕсли;
		
		ЭлементДоговор.Разблокировать();
		
	КонецЕсли;
	
КонецЦикла;</Текст>
				<Параметры>Объект</Параметры>
			</Алгоритм>
			<Алгоритм Имя="УстановитьКатегориюОбъекта" ИспользуетсяПриЗагрузке="true">
				<Текст>//Категории
Запись = РегистрыСведений.КатегорииОбъектов.СоздатьМенеджерЗаписи();
Запись.Объект = Объект.Ссылка;
Запись.Категория = Категория;

Запись.Записать();</Текст>
				<Параметры>Объект, Категория</Параметры>
			</Алгоритм>
			<Алгоритм Имя="ФормированиеТиповЦен" ИспользуетсяПриЗагрузке="true">
				<Текст>
МассивОбъектов = Параметры.ОбъектыДляФормированияТипаЦен;

СтатусСогласован = Перечисления.ВГ_СтатусыКонтрагентов.Согласован;

Для Каждого ЭлементМассива Из МассивОбъектов Цикл
	
	Если ЭлементМассива.Статус = СтатусСогласован
		И ЭлементМассива.РолиКонтрагента.Найти(Перечисления.ВГ_РолиКонтрагентов.Плательщик, "Роль") &lt;&gt; Неопределено Тогда
		
		Запрос = Новый Запрос;
		Запрос.Текст =
		"ВЫБРАТЬ РАЗРЕШЕННЫЕ
		|	Организации.Ссылка КАК Контрагент,
		|	Организации.Организация КАК Организация,
		|	Организации.Организация.Префикс КАК Префикс,
		|	ТипыЦенНоменклатурыКонтрагентов.Ссылка КАК ТипЦенНоменклатурыКонтрагентов,
		|	ТипыЦен.Ссылка КАК ТипЦен
		|ИЗ
		|	Справочник.Контрагенты.Организации КАК Организации
		|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ТипыЦенНоменклатурыКонтрагентов КАК ТипыЦенНоменклатурыКонтрагентов
		|		ПО Организации.Организация = ТипыЦенНоменклатурыКонтрагентов.ТипЦеныНоменклатуры.Организация
		|			И Организации.Ссылка = ТипыЦенНоменклатурыКонтрагентов.Владелец
		|			И (ТипыЦенНоменклатурыКонтрагентов.Наименование ПОДОБНО Организации.Организация.Префикс + ""%"")
		|			И (ТипыЦенНоменклатурыКонтрагентов.ТипЦеныНоменклатуры.Наименование ПОДОБНО Организации.Организация.Префикс + "" РБЦ"")
		|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ТипыЦенНоменклатуры КАК ТипыЦен
		|		ПО Организации.Организация = ТипыЦен.Организация
		|			И (ТипыЦен.Наименование ПОДОБНО Организации.Организация.Префикс + "" РБЦ"")
		|ГДЕ
		|	Организации.Ссылка = &amp;Контрагент";
		
		Запрос.УстановитьПараметр("Контрагент", ЭлементМассива);
		
		Выборка = Запрос.Выполнить().Выбрать();
		
		Пока Выборка.Следующий() Цикл
			
			Если ЗначениеЗаполнено(Выборка.ТипЦенНоменклатурыКонтрагентов) Тогда
				Продолжить;
			КонецЕсли;
			
			Если Не ЗначениеЗаполнено(Выборка.ТипЦен) Тогда
				Продолжить;
			КонецЕсли;
			
			ТипЦенОбъект = Справочники.ТипыЦенНоменклатурыКонтрагентов.СоздатьЭлемент();
			ТипЦенОбъект.Владелец 				= ЭлементМассива;
			ТипЦенОбъект.ТипЦеныНоменклатуры 	= Выборка.ТипЦен;
			ТипЦенОбъект.ВалютаЦены 			= Константы.ВалютаРегламентированногоУчета.Получить();
			ТипЦенОбъект.ЦенаВключаетНДС 		= Истина;
			ТипЦенОбъект.ВидЦены				= Константы.ОсновнойВидЦенДляТиповЦенНоменклатуры.Получить();
			ТипЦенОбъект.Записать();
			
		КонецЦикла;
		
	КонецЕсли;
	
КонецЦикла;</Текст>
			</Алгоритм>
		</Группа>
		<Алгоритм Имя="ФормированиеЗначенийСвойств" ИспользуетсяПриЗагрузке="false">
			<Текст>
Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	РаспределительныеЦентры.Ссылка КАК Ссылка,
|	"""" КАК ОКТМО
|ПОМЕСТИТЬ ВТ_ОбъектыСвязи
|ИЗ
|	Справочник.вогРаспределительныеЦентры КАК РаспределительныеЦентры
|ГДЕ
|	РаспределительныеЦентры.Ссылка = &amp;ОбъектСсылка
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	вогТорговыеТочки.Ссылка,
|	вогТорговыеТочки.ОКТМО
|ИЗ
|	Справочник.вогТорговыеТочки КАК вогТорговыеТочки
|ГДЕ
|	вогТорговыеТочки.Ссылка = &amp;ОбъектСсылка
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	вогIDCards.Код КАК Код,
|	вогIDCards.Наименование КАК Наименование,
|	вогIDCards.Партнер КАК Партнер
|ПОМЕСТИТЬ ВТ_idCards
|ИЗ
|	РегистрСведений.вогIDCards КАК вогIDCards
|ГДЕ
|	вогIDCards.ОбъектСвязи = &amp;ОбъектСсылка
|	И (вогIDCards.Партнер = &amp;ПартнерЦерсанит
|			ИЛИ вогIDCards.Партнер = &amp;ПартнерРусплитка)
|	И вогIDCards.Партнер &lt;&gt; ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка)
|;
|
|////////////////////////////////////////////////////////////////////////////////
|ВЫБРАТЬ
|	""Id Церсанит"" КАК ИмяСвойства,
|	ЕСТЬNULL(idCards.Код, 0) КАК Значение
|ИЗ
|	ВТ_ОбъектыСвязи КАК ВТ_ОбъектыСвязи
|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_idCards КАК idCards
|		ПО (idCards.Партнер = &amp;ПартнерЦерсанит)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	""Название Церсанит"",
|	ЕСТЬNULL(idCards.Наименование, """")
|ИЗ
|	ВТ_ОбъектыСвязи КАК ВТ_ОбъектыСвязи
|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_idCards КАК idCards
|		ПО (idCards.Партнер = &amp;ПартнерЦерсанит)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	""id Заказчика Русплитка"",
|	ЕСТЬNULL(idCards.Код, 0)
|ИЗ
|	ВТ_ОбъектыСвязи КАК ВТ_ОбъектыСвязи
|		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_idCards КАК idCards
|		ПО (idCards.Партнер = &amp;ПартнерРусплитка)
|
|ОБЪЕДИНИТЬ ВСЕ
|
|ВЫБРАТЬ
|	""ОКТМО"",
|	вогТорговыеТочки.ОКТМО
|ИЗ
|	ВТ_ОбъектыСвязи КАК вогТорговыеТочки
|ГДЕ
|	вогТорговыеТочки.ОКТМО &lt;&gt; """"";

Запрос.УстановитьПараметр("ОбъектСсылка", 		Источник.Ссылка);
Запрос.УстановитьПараметр("ПартнерЦерсанит", 	Справочники.Партнеры.НайтиПоКоду("Ю2211"));
Запрос.УстановитьПараметр("ПартнерРусплитка", 	Справочники.Партнеры.НайтиПоКоду("Ю0751"));

ТЗ_СвойстваОбъектов = Запрос.Выполнить().Выгрузить();

ИсходящиеДанные = Новый Структура;
ИсходящиеДанные.Вставить("Объект", 				Источник.Ссылка);
ИсходящиеДанные.Вставить("ТЗ_СвойстваОбъектов", ЗначениеВСтрокуВнутр(ТЗ_СвойстваОбъектов));

ВыгрузитьПоПравилу(,, ИсходящиеДанные,, "ЗначенияСвойствОбъектов");</Текст>
			<Параметры>Источник</Параметры>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>