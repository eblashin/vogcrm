
////////////////////////////////////////////////////////////////////////////////
// ПЕРЕМЕННЫЕ МОДУЛЯ

////////////////////////////////////////////////////////////////////////////////
#Область ЭКСПОРТНЫЕ_ПРОЦЕДУРЫ_И_ФУНКЦИИ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ОБРАБОТЧИКИ_СОБЫТИЙ_ФОРМЫ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ПРОЦЕДУРЫ__ОБРАБОТЧИКИ_СОБЫТИЙ_ФОРМЫ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ОБРАБОТЧИКИ_КОМАНД_ФОРМЫ

&НаКлиенте
Процедура ВсеРынкиНаКарте(Команда)
	
	ПараметрыОткрытияФормы = Новый Структура;
	
	ПараметрыОткрытияФормы.Вставить("Полигоны", ПолучитьСоответствиеПолигонов()); 
			
	ОткрытьФорму("Обработка.вогГеокодирование.Форма.Форма", ПараметрыОткрытияФормы, ЭтаФорма, ЭтаФорма.УникальныйИдентификатор,,,);
	
КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ОПИСАНИЯ_ОПОВЕЩЕНИЙ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ПРОЦЕДУРЫ_И_ФУНКЦИИ_ОБЩЕГО_НАЗНАЧЕНИЯ

&НаКлиенте
Функция ПолучитьСоответствиеПолигонов()

	ТаблицаПолигонов = ПолучитьТаблицуПолигонов();
	
	Возврат ТаблицаПолигонов;
	
КонецФункции // ПолучитьДанныеПолигонов()

Функция ПолучитьТаблицуПолигонов()
	
	Возврат вогГеокодированиеСерверПовтИсп.ПолучитьТаблицуПолигонов_ВсеРынки();
		
КонецФункции

#КонецОбласти

#Область НачальнаяСтраница
// +++ VOG Кулаков П.Л. 28.12.2020 DEV-48
&НаКлиенте
Процедура УстановитьПунктМеню()
	
	Если Элементы.Найти("МенюHTML") = Неопределено Тогда 
		//ОтключитьОбработчикОжидания("УстановитьПунктМеню");
		Возврат;
	КонецЕсли;
	
	Если Элементы.МенюHTML.Документ <> Неопределено Тогда
		Если Элементы.МенюHTML.Документ.readyState = "complete" Тогда
			вогНачальнаяСтраницаПользователяКлиетСервер.НачальнаяСтраницаПользователяПриОткрытии(ЭтаФорма,"рынки");
			//ОтключитьОбработчикОжидания("УстановитьПунктМеню");
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры // --- VOG Кулаков П.Л.

// +++ VOG Кулаков П.Л. 28.12.2020 DEV-48
&НаКлиенте
Процедура Подключаемый_МенюHTMLПриНажатии(Элемент, ДанныеСобытия, СтандартнаяОбработка)
	
	Если ДанныеСобытия.Element <> Неопределено Тогда
		вогНачальнаяСтраницаПользователяКлиетСервер.МенюHTMLПриНажатии(ЭтаФорма,"рынки");
	КонецЕсли;
		
КонецПроцедуры // --- VOG Кулаков П.Л.

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	// +++ VOG Кулаков П.Л. 25.01.2021 DEV-79
	вогНачальнаяСтраницаПользователяКлиетСервер.НачальнаяСтраницаПользователяПриСозданииНаСервере(ЭтаФорма);
	// --- VOG Кулаков П.Л.
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	// +++ VOG Кулаков П.Л. 25.01.2021 DEV-79
	ПодключитьОбработчикОжидания("УстановитьПунктМеню",0.1,Истина);
	// --- VOG Кулаков П.Л.
	
КонецПроцедуры

#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ПРОЦЕДУРЫ_И_ФУНКЦИИ_ДЛЯ_УПРАВЛЕНИЯ_ВНЕШНИМ_ВИДОМ_ФОРМЫ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ПРОЦЕДУРЫ__ДЕЙСТВИЯ_КОМАНДНЫХ_ПАНЕЛЕЙ_ФОРМЫ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ПРОЦЕДУРЫ_ОБРАБОТКИ_СВОЙСТВ_И_КАТЕГОРИЙ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ПРОЦЕДУРЫ__ОБРАБОТЧИКИ_СОБЫТИЙ_ЭЛЕМЕНТОВ_ФОРМЫ
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ПРОЦЕДУРЫ_ОБРАБОТЧИКИ_СОБЫТИЙ_ТАБЛИЧНОГО_ПОЛЯ__
#КонецОбласти

////////////////////////////////////////////////////////////////////////////////
#Область ОПЕРАТОРЫ_ОСНОВНОЙ_ПРОГРАММЫ
#КонецОбласти