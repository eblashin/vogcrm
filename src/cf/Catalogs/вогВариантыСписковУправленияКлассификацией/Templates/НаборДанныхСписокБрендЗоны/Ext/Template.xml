<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Ссылка</dataPath>
			<field>Ссылка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидМагазина</dataPath>
			<field>ВидМагазина</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидБрендЗоны</dataPath>
			<field>ВидБрендЗоны</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаПервойУстановки</dataPath>
			<field>ДатаПервойУстановки</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Наименование</dataPath>
			<field>Наименование</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоСтендов</dataPath>
			<field>КоличествоСтендов</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Кол-во стендов</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Стенд</dataPath>
			<field>Стенд</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоМест</dataPath>
			<field>КоличествоМест</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Кол-во мест</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Клиент</dataPath>
			<field>Клиент</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Клиент</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Город</dataPath>
			<field>Город</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Город</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регион</dataPath>
			<field>Регион</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Регион</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Район</dataPath>
			<field>Район</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Район</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоСтендовПлан</dataPath>
			<field>КоличествоСтендовПлан</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество стендов план</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Артикул</dataPath>
			<field>Артикул</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сторона</dataPath>
			<field>Сторона</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Позиция</dataPath>
			<field>Позиция</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИД</dataPath>
			<field>ИД</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗаполненоМест</dataPath>
			<field>ЗаполненоМест</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Заполнено мест</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КоличествоИД</dataPath>
			<field>КоличествоИД</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Количество ИД</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	БрендЗоны.Ссылка КАК Ссылка,
	БрендЗоны.Наименование КАК Наименование,
	БрендЗоны.Подразделение КАК Подразделение,
	БрендЗоны.ТорговаяТочка КАК ТорговаяТочка,
	БрендЗоны.КоличествоСтендов КАК КоличествоСтендовПлан,
	БрендЗоны.ВидБрендЗоны КАК ВидБрендЗоны,
	БрендЗоны.ВидМагазина КАК ВидМагазина,
	БрендЗоны.ДатаПервойУстановки КАК ДатаПервойУстановки,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ СтендыВБрендЗонахСрезПоследних.Стенд) КАК КоличествоСтендов,
	СУММА(СтендыВБрендЗонахСрезПоследних.Стенд.ТипСтенда.КоличествоМест) КАК КоличествоМест,
	БрендЗоны.ТорговаяТочка.Партнер КАК Клиент,
	БрендЗоны.ТорговаяТочка.НаселенныйПункт КАК Город,
	БрендЗоны.ТорговаяТочка.НаселенныйПунктРегион КАК Регион,
	БрендЗоны.ТорговаяТочка.НаселенныйПунктРайон КАК Район,
	ВложенныйЗапрос.Стенд КАК Стенд,
	СУММА(ВложенныйЗапрос.КоличествоИД) КАК ЗаполненоМест
ИЗ
	Справочник.БрендЗона КАК БрендЗоны
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СтендыВБрендЗонах.СрезПоследних КАК СтендыВБрендЗонахСрезПоследних
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				СтендыВБрендЗонахСрезПоследних.Стенд КАК Стенд,
				КОЛИЧЕСТВО(РАЗЛИЧНЫЕ вогАртикулыНаСтендахСрезПоследних.ИД) КАК КоличествоИД
			ИЗ
				РегистрСведений.СтендыВБрендЗонах.СрезПоследних КАК СтендыВБрендЗонахСрезПоследних
					ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.вогАртикулыНаСтендах.СрезПоследних КАК вогАртикулыНаСтендахСрезПоследних
					ПО (вогАртикулыНаСтендахСрезПоследних.Стенд = СтендыВБрендЗонахСрезПоследних.Стенд)
						И (вогАртикулыНаСтендахСрезПоследних.Артикул &lt;&gt; ЗНАЧЕНИЕ(Справочник.Номенклатура.))
			
			СГРУППИРОВАТЬ ПО
				СтендыВБрендЗонахСрезПоследних.Стенд) КАК ВложенныйЗапрос
			ПО СтендыВБрендЗонахСрезПоследних.Стенд = ВложенныйЗапрос.Стенд
		ПО БрендЗоны.Ссылка = СтендыВБрендЗонахСрезПоследних.БрендЗона
			И (СтендыВБрендЗонахСрезПоследних.АктивныйСтенд)
ГДЕ
	НЕ БрендЗоны.ПометкаУдаления

СГРУППИРОВАТЬ ПО
	БрендЗоны.Ссылка,
	БрендЗоны.Наименование,
	БрендЗоны.Подразделение,
	БрендЗоны.ТорговаяТочка,
	БрендЗоны.КоличествоСтендов,
	БрендЗоны.ВидБрендЗоны,
	БрендЗоны.ВидМагазина,
	БрендЗоны.ДатаПервойУстановки,
	БрендЗоны.ТорговаяТочка.Партнер,
	БрендЗоны.ТорговаяТочка.НаселенныйПункт,
	БрендЗоны.ТорговаяТочка.НаселенныйПунктРегион,
	БрендЗоны.ТорговаяТочка.НаселенныйПунктРайон,
	ВложенныйЗапрос.Стенд
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогРаспределительныеЦентры, Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит КАК ДополнительныйРеквизит,
			CRM_ДополнительныеРеквизитыКлассификаторов.ТипЗначения КАК ТипЗначения,
			CRM_ЗначенияКлассификаторов.Наименование КАК Наименование,
			CRM_ЗначенияКлассификаторов.Ссылка КАК Ссылка
		ИЗ
			Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_ДополнительныеРеквизитыКлассификаторов КАК CRM_ДополнительныеРеквизитыКлассификаторов
				ПО CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит = CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка)
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ПОЛЕТИПАЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора.Владелец КАК ЗначениеКлассификатораВладелец,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита КАК ЗначениеРеквизита
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатора
	ПОЛЕЗНАЧЕНИЯ ЗначениеРеквизита }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогРаспределительныеЦентры, Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_Классификаторы.Ссылка КАК Ссылка,
			CRM_Классификаторы.Наименование КАК Наименование,
			CRM_Классификаторы.ТипЗначения КАК ТипЗначения
		ИЗ
			ПланВидовХарактеристик.CRM_Классификаторы КАК CRM_Классификаторы
		ГДЕ
			CRM_Классификаторы.ВидОтображения = ЗНАЧЕНИЕ(ПЕРЕЧИСЛЕНИЕ.CRM_ВидыОтображенияКлассификаторов.ОдиночноеЗначение))
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора.Владелец КАК ЗначениеКлассификатораВладелец,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита КАК ЗначениеРеквизита
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатораВладелец
	ПОЛЕЗНАЧЕНИЯ ЗначениеКлассификатора }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогРаспределительныеЦентры, Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ЗначенияКлассификаторов.Ссылка КАК Ссылка,
			CRM_Классификаторы.Наименование + " (" + CRM_ЗначенияКлассификаторов.Наименование + ")" КАК Наименование,
			CRM_Классификаторы.ТипЗначения КАК ТипЗначения
		ИЗ
			Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_Классификаторы КАК CRM_Классификаторы
				ПО CRM_ЗначенияКлассификаторов.Владелец = CRM_Классификаторы.Ссылка
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_ДополнительныеРеквизитыКлассификаторов КАК CRM_ДополнительныеРеквизитыКлассификаторов
				ПО CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит = CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка
		ГДЕ
			CRM_Классификаторы.ВидОтображения = ЗНАЧЕНИЕ(ПЕРЕЧИСЛЕНИЕ.CRM_ВидыОтображенияКлассификаторов.Вхождение))
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ПОЛЕТИПАЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора.Владелец КАК ЗначениеКлассификатораВладелец,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита КАК ЗначениеРеквизита
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатора
	ПОЛЕЗНАЧЕНИЯ ЗначениеРеквизита }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогРаспределительныеЦентры, Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ЗначенияКлассификаторов.Ссылка КАК Ссылка,
			CRM_Классификаторы.Наименование + " [" + CRM_ЗначенияКлассификаторов.Наименование + "]" КАК Наименование,
			CRM_Классификаторы.ТипЗначения КАК ТипЗначения
		ИЗ
			Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_Классификаторы КАК CRM_Классификаторы
				ПО CRM_ЗначенияКлассификаторов.Владелец = CRM_Классификаторы.Ссылка
				ЛЕВОЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_ДополнительныеРеквизитыКлассификаторов КАК CRM_ДополнительныеРеквизитыКлассификаторов
				ПО CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит = CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка
		ГДЕ
			CRM_Классификаторы.ВидОтображения = ЗНАЧЕНИЕ(ПЕРЕЧИСЛЕНИЕ.CRM_ВидыОтображенияКлассификаторов.Вхождение)
			И CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка ЕСТЬ NULL)
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			ИСТИНА КАК Значение,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатора }</query>
	</dataSet>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Наименование</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Ссылка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВидМагазина</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ТорговаяТочка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Клиент</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Регион</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Район</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Город</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоСтендов</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КоличествоМест</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЗаполненоМест</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДатаПервойУстановки</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>