
////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ И ФУНКЦИИ ФОРМЫ

&НаСервере
// Процедура - обработчик события формы "ПриСозданииНаСервере".
//
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	// Устанавливаем отбор по текущему пользователю и статусам решений.
	Для Каждого ЭлементОтбора Из Список.Отбор.Элементы Цикл
		Если ЭлементОтбора.Представление = "ОтборРешений" Тогда
			Для Каждого ОтборРешения Из ЭлементОтбора.Элементы Цикл
				Если ОтборРешения.Представление = "ОтборПоАвтору" Тогда
					ОтборРешения.ПравоеЗначение = Пользователи.АвторизованныйПользователь();
				ИначеЕсли ОтборРешения.Представление = "ОтборПоСтатусу" Тогда	
					СписокСостояний = Новый СписокЗначений;
					СписокСостояний.Добавить(Перечисления.CRM_СтатусыРешений.Утверждено);
					СписокСостояний.Добавить(Перечисления.CRM_СтатусыРешений.Устарело);
					Если CRM_БазаЗнанийСервер.ЕстьПраваАдминистратора() Тогда
						СписокСостояний.Добавить(Перечисления.CRM_СтатусыРешений.НаРассмотрении);
					КонецЕсли;	
					ОтборРешения.ПравоеЗначение = СписокСостояний;
				КонецЕсли;	
			КонецЦикла;
		КонецЕсли;	
	КонецЦикла;
КонецПроцедуры // ПриСозданииНаСервере()

