
&НаКлиенте
Процедура ЗакрытьФорму(Команда)
	
	ПараметрыПередЗакрытием = Ложь;
	СписокАртикулов = Новый Массив;
	Для Каждого Строка Из ТаблицаАртикулов Цикл
		СтруктураСтроки = Новый Структура("Стенд,Артикул,НомерСтенда");
		ЗаполнитьЗначенияСвойств(СтруктураСтроки,Строка);
		СписокАртикулов.Добавить(СтруктураСтроки);
	КонецЦикла;
	ПараметрыЗакрытия = Новый Структура("СписокАртикулов",СписокАртикулов);
	Закрыть(ПараметрыЗакрытия);
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("СписокАртикулов") 
			И Параметры.СписокАртикулов.Количество() > 0 Тогда
		Для Каждого Строка Из Параметры.СписокАртикулов Цикл
			НоваяСтрока = ТаблицаАртикулов.Добавить();
			ЗаполнитьЗначенияСвойств(НоваяСтрока,Строка);
		КонецЦикла;
	Иначе
		Отказ = Истина;
	КонецЕсли;
	
	ПараметрыПередЗакрытием = Истина;
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытием(Отказ, ЗавершениеРаботы, ТекстПредупреждения, СтандартнаяОбработка)
	
	Если НЕ ЗавершениеРаботы И ПараметрыПередЗакрытием Тогда
		Отказ = Истина;
		ОповещениеОЗакрытии = Новый ОписаниеОповещения("ПередЗакрытиемЗавершение", ЭтотОбъект);
		ВыполнитьОбработкуОповещения(ОповещениеОЗакрытии);
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПередЗакрытиемЗавершение(Результат, ДополнительныеПараметры) Экспорт
	
	ПараметрыПередЗакрытием = Ложь;
	СписокАртикулов = Новый Массив;
	Для Каждого Строка Из ТаблицаАртикулов Цикл
		СтруктураСтроки = Новый Структура("Стенд,Артикул,НомерСтенда");
		ЗаполнитьЗначенияСвойств(СтруктураСтроки,Строка);
		СписокАртикулов.Добавить(СтруктураСтроки);
	КонецЦикла;
	ПараметрыЗакрытия = Новый Структура("СписокАртикулов",СписокАртикулов);
	Закрыть(ПараметрыЗакрытия);
	
КонецПроцедуры
