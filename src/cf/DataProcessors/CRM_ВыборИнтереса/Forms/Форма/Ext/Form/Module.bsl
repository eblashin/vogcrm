
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("Отбор") И Параметры.Отбор.Свойство("Партнер") Тогда
		Если ТипЗнч(Параметры.Отбор.Партнер) = Тип("СписокЗначений") Тогда
			ОтборКонтрагент = Параметры.Отбор.Партнер[0].Значение;
		Иначе
			ОтборКонтрагент = Параметры.Отбор.Партнер;
		КонецЕсли;			
		
		// ставим отбор по клиенту
		CRM_ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораСписка(СписокИнтересов,"Партнер",ОтборКонтрагент);
		CRM_ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораСписка(СписокИнтересов,"Завершен",Ложь);
		
		Если Параметры.Отбор.Свойство("КонтактноеЛицо") Тогда
			КонтактноеЛицоОтбор = Параметры.Отбор.КонтактноеЛицо;
			// ставим отбор по контакту
			//CRM_ОбщегоНазначенияКлиентСервер.УстановитьЭлементОтбораСписка(СписокИнтересов,"КонтактноеЛицо",КонтактноеЛицоОтбор);
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ВыборИнтереса(Команда)
	Если Элементы.СписокИнтересов.ТекущиеДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	Если ТекущийЭлемент.Имя = "СписокИнтересов" Тогда
		Закрыть(Элементы.СписокИнтересов.ТекущиеДанные.Ссылка);
	Иначе
		Закрыть(Элементы.СписокКонсультаций.ТекущиеДанные.Ссылка);
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура СписокИнтересовВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	Если ТекущийЭлемент.Имя = "СписокИнтересов" Тогда
		Закрыть(Элементы.СписокИнтересов.ТекущиеДанные.Ссылка);
	Иначе
		Закрыть(Элементы.СписокКонсультаций.ТекущиеДанные.Ссылка);
	КонецЕсли;
КонецПроцедуры