<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>НаборДанных1</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>НаправлениеДеятельности</dataPath>
			<field>НаправлениеДеятельности</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КатегорияПрошлая</dataPath>
			<field>КатегорияПрошлая</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Прошлая категория</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КатегорияТекущая</dataPath>
			<field>КатегорияТекущая</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Текущая категория</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Партнер</dataPath>
			<field>Партнер</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НоменклатурнаяГруппа</dataPath>
			<field>НоменклатурнаяГруппа</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Клиент</dataPath>
			<field>Клиент</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Выручка</dataPath>
			<field>Выручка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Объем продаж, руб.</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ЧДЦ=2</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТорговаяТочка</dataPath>
			<field>ТорговаяТочка</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЮридическоеЛицо</dataPath>
			<field>ЮридическоеЛицо</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Месяц</dataPath>
			<field>Месяц</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Месяц</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:periodNumber>1</dcscom:periodNumber>
				<dcscom:periodType>Main</dcscom:periodType>
			</role>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>ДФ='ММММ гггг'</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регистратор</dataPath>
			<field>Регистратор</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
			<presentationExpression>Регистратор.Источник</presentationExpression>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Категория</dataPath>
			<field>Категория</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИзменениеКатегории</dataPath>
			<field>ИзменениеКатегории</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Изменение категории</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Бренд</dataPath>
			<field>Бренд</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Бренд</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗначениеКлассификатора</dataPath>
			<field>ЗначениеКлассификатора</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Объект</dataPath>
			<field>Объект</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Аналитика</dataPath>
			<field>Аналитика</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Менеджер</dataPath>
			<field>Менеджер</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Координатор</dataPath>
			<field>Координатор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Координатор</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
				<dcscom:ignoreNullValues>true</dcscom:ignoreNullValues>
			</role>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
	CRM_ОбъектыЗначенийКлассификаторов.Аналитика КАК Аналитика,
	CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора,
	CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита КАК ЗначениеРеквизита,
	CRM_ОбъектыЗначенийКлассификаторов.ДатаВключения КАК ДатаВключения,
	CRM_ОбъектыЗначенийКлассификаторов.ХранитьИсториюИзменения КАК ХранитьИсториюИзменения,
	МАКСИМУМ(вогМенеджерыОбъектов.Менеджер) КАК Менеджер,
	МАКСИМУМ(вогКоординаторыОбъектов.Менеджер) КАК Координатор,
	МАКСИМУМ(ЕСТЬNULL(вогМенеджерыОбъектов.Подразделение, вогКоординаторыОбъектов.Подразделение)) КАК Подразделение
ПОМЕСТИТЬ ОбъектыЗначенийКлассификаторов
ИЗ
	РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.вогМенеджерыОбъектов КАК вогМенеджерыОбъектов
		ПО CRM_ОбъектыЗначенийКлассификаторов.Объект = вогМенеджерыОбъектов.Владелец.Партнер
			И (вогМенеджерыОбъектов.Роль = &amp;РольМенеджер)
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.вогМенеджерыОбъектов КАК вогКоординаторыОбъектов
		ПО CRM_ОбъектыЗначенийКлассификаторов.Объект = вогКоординаторыОбъектов.Владелец.Партнер
			И (вогКоординаторыОбъектов.Роль = &amp;РольКоординатор)
ГДЕ
	НЕ ВЫРАЗИТЬ(CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Справочник.Партнеры).вогРозничный
	И CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора.Владелец = &amp;КлассификаторКатегория
	И НЕ ВЫРАЗИТЬ(CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Справочник.Партнеры).ПометкаУдаления

СГРУППИРОВАТЬ ПО
	CRM_ОбъектыЗначенийКлассификаторов.Объект,
	CRM_ОбъектыЗначенийКлассификаторов.ДатаВключения,
	CRM_ОбъектыЗначенийКлассификаторов.Аналитика,
	CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора,
	CRM_ОбъектыЗначенийКлассификаторов.ХранитьИсториюИзменения,
	CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	МАКСИМУМ(CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Период) КАК Период,
	CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Объект КАК Объект,
	CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Аналитика КАК Аналитика
ПОМЕСТИТЬ вт_ИсторияКатегории
ИЗ
	РегистрСведений.CRM_ИсторияЗначенийКлассификаторовОбъектов.СрезПоследних({(&amp;ДатаИсторииКатегории)}, ЗначениеКлассификатора.Владелец = &amp;КлассификаторКатегория) КАК CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних

СГРУППИРОВАТЬ ПО
	CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Объект,
	CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Аналитика
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	вт_ИсторияКатегории.Период КАК Период,
	вт_ИсторияКатегории.Объект КАК Объект,
	вт_ИсторияКатегории.Аналитика КАК Аналитика,
	CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.ЗначениеКлассификатора КАК ЗначениеКлассификатора
ПОМЕСТИТЬ вт_ИсторияКатегорииСКлассификатором
ИЗ
	вт_ИсторияКатегории КАК вт_ИсторияКатегории
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.CRM_ИсторияЗначенийКлассификаторовОбъектов.СрезПоследних({(&amp;ДатаИсторииКатегории)}, ) КАК CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних
		ПО (CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Период = вт_ИсторияКатегории.Период)
			И (CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Объект = вт_ИсторияКатегории.Объект)
			И (CRM_ИсторияЗначенийКлассификаторовОбъектовСрезПоследних.Аналитика = вт_ИсторияКатегории.Аналитика)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ЕСТЬNULL(вт_ИсторияКатегорииСКлассификатором.ЗначениеКлассификатора, ЗНАЧЕНИЕ(Справочник.CRM_ЗначенияКлассификаторов.)) КАК КатегорияПрошлая,
	ЕСТЬNULL(ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора, ЗНАЧЕНИЕ(Справочник.CRM_ЗначенияКлассификаторов.)) КАК КатегорияТекущая,
	ЕСТЬNULL(вогПродажиОбороты.Номенклатура, ЗНАЧЕНИЕ(Справочник.Номенклатура.)) КАК Номенклатура,
	ЕСТЬNULL(вогПродажиОбороты.Номенклатура.НоменклатурнаяПозиция.Дизайн.НоменклатурнаяГруппа, ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.)) КАК НоменклатурнаяГруппа,
	ЕСТЬNULL(вогПродажиОбороты.Организация, ЗНАЧЕНИЕ(Справочник.Организации.)) КАК Организация,
	ЕСТЬNULL(вогПродажиОбороты.СтоимостьОборот, 0) КАК Выручка,
	ЕСТЬNULL(НАЧАЛОПЕРИОДА(вогПродажиОбороты.Период, МЕСЯЦ), НАЧАЛОПЕРИОДА(&amp;КонецПериода, МЕСЯЦ)) КАК Месяц,
	ЕСТЬNULL(вогПродажиОбороты.Регистратор, ЗНАЧЕНИЕ(Документ.вогДвиженияУС.)) КАК Регистратор,
	ВЫБОР
		КОГДА вт_ИсторияКатегорииСКлассификатором.ЗначениеКлассификатора = ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора
				ИЛИ вт_ИсторияКатегорииСКлассификатором.ЗначениеКлассификатора ЕСТЬ NULL
			ТОГДА 0
		ИНАЧЕ ВЫБОР
				КОГДА вогДиапазоныКатегорииКлиетовПрошлыйКвартал.НижняяГраница &gt; вогДиапазоныКатегорииКлиетовТекущийКвартал.НижняяГраница
					ТОГДА -1
				ИНАЧЕ 1
			КОНЕЦ
	КОНЕЦ КАК ИзменениеКатегории,
	ЕСТЬNULL(вогПродажиОбороты.Номенклатура.НоменклатурнаяПозиция.Дизайн.Бренд, ЗНАЧЕНИЕ(Справочник.вогБренды.)) КАК Бренд,
	ЕСТЬNULL(вогПродажиОбороты.ТорговаяТочка, ЗНАЧЕНИЕ(Справочник.вогТорговыеТочки.)) КАК ТорговаяТочка,
	ВЫРАЗИТЬ(ОбъектыЗначенийКлассификаторов.Объект КАК Справочник.Партнеры) КАК Клиент,
	ОбъектыЗначенийКлассификаторов.Менеджер КАК Менеджер,
	ОбъектыЗначенийКлассификаторов.Координатор КАК Координатор,
	ОбъектыЗначенийКлассификаторов.Подразделение КАК Подразделение
ИЗ
	ОбъектыЗначенийКлассификаторов КАК ОбъектыЗначенийКлассификаторов
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.вогДиапазоныКатегорииКлиетов.СрезПоследних({(&amp;ТекущаяДата)}, ) КАК вогДиапазоныКатегорииКлиетовТекущийКвартал
		ПО ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора = вогДиапазоныКатегорииКлиетовТекущийКвартал.Категория
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.вогПродажи.Обороты(, , Регистратор, НаправлениеДеятельности = ЗНАЧЕНИЕ(Справочник.НаправленияДеятельности.Плитка)) КАК вогПродажиОбороты
		ПО ОбъектыЗначенийКлассификаторов.Объект = вогПродажиОбороты.Партнер
			И ОбъектыЗначенийКлассификаторов.Аналитика = вогПродажиОбороты.НаправлениеДеятельности
		ЛЕВОЕ СОЕДИНЕНИЕ вт_ИсторияКатегорииСКлассификатором КАК вт_ИсторияКатегорииСКлассификатором
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.вогДиапазоныКатегорииКлиетов.СрезПоследних({(&amp;ДатаИсторииКатегории)}, ) КАК вогДиапазоныКатегорииКлиетовПрошлыйКвартал
			ПО вт_ИсторияКатегорииСКлассификатором.ЗначениеКлассификатора = вогДиапазоныКатегорииКлиетовПрошлыйКвартал.Категория
		ПО ОбъектыЗначенийКлассификаторов.Объект = вт_ИсторияКатегорииСКлассификатором.Объект
			И ОбъектыЗначенийКлассификаторов.Аналитика = вт_ИсторияКатегорииСКлассификатором.Аналитика
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.вогРаспределительныеЦентры, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит КАК ДополнительныйРеквизит,
			CRM_ДополнительныеРеквизитыКлассификаторов.ТипЗначения КАК ТипЗначения,
			CRM_ЗначенияКлассификаторов.Наименование КАК Наименование,
			CRM_ЗначенияКлассификаторов.Ссылка КАК Ссылка
		ИЗ
			Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_ДополнительныеРеквизитыКлассификаторов КАК CRM_ДополнительныеРеквизитыКлассификаторов
				ПО CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит = CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка)
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ПОЛЕТИПАЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора.Владелец КАК ЗначениеКлассификатораВладелец,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита КАК ЗначениеРеквизита
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатора
	ПОЛЕЗНАЧЕНИЯ ЗначениеРеквизита }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.вогРаспределительныеЦентры, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_Классификаторы.Ссылка КАК Ссылка,
			CRM_Классификаторы.Наименование КАК Наименование,
			CRM_Классификаторы.ТипЗначения КАК ТипЗначения
		ИЗ
			ПланВидовХарактеристик.CRM_Классификаторы КАК CRM_Классификаторы
		ГДЕ
			CRM_Классификаторы.ВидОтображения = ЗНАЧЕНИЕ(ПЕРЕЧИСЛЕНИЕ.CRM_ВидыОтображенияКлассификаторов.ОдиночноеЗначение))
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора.Владелец КАК ЗначениеКлассификатораВладелец,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита КАК ЗначениеРеквизита
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатораВладелец
	ПОЛЕЗНАЧЕНИЯ ЗначениеКлассификатора }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.вогРаспределительныеЦентры, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ЗначенияКлассификаторов.Ссылка КАК Ссылка,
			CRM_Классификаторы.Наименование + " (" + CRM_ЗначенияКлассификаторов.Наименование + ")" КАК Наименование,
			CRM_Классификаторы.ТипЗначения КАК ТипЗначения
		ИЗ
			Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_Классификаторы КАК CRM_Классификаторы
				ПО CRM_ЗначенияКлассификаторов.Владелец = CRM_Классификаторы.Ссылка
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_ДополнительныеРеквизитыКлассификаторов КАК CRM_ДополнительныеРеквизитыКлассификаторов
				ПО CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит = CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка
		ГДЕ
			CRM_Классификаторы.ВидОтображения = ЗНАЧЕНИЕ(ПЕРЕЧИСЛЕНИЕ.CRM_ВидыОтображенияКлассификаторов.Вхождение))
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ПОЛЕТИПАЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора.Владелец КАК ЗначениеКлассификатораВладелец,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеРеквизита КАК ЗначениеРеквизита
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатора
	ПОЛЕЗНАЧЕНИЯ ЗначениеРеквизита }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.вогТорговыеТочки, Справочник.вогЮридическиеЛица, Справочник.вогРаспределительныеЦентры, Справочник.КонтактныеЛицаПартнеров, Справочник.Партнеры)
	ВИДЫХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ЗначенияКлассификаторов.Ссылка КАК Ссылка,
			CRM_Классификаторы.Наименование + " [" + CRM_ЗначенияКлассификаторов.Наименование + "]" КАК Наименование,
			CRM_Классификаторы.ТипЗначения КАК ТипЗначения
		ИЗ
			Справочник.CRM_ЗначенияКлассификаторов КАК CRM_ЗначенияКлассификаторов
				ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_Классификаторы КАК CRM_Классификаторы
				ПО CRM_ЗначенияКлассификаторов.Владелец = CRM_Классификаторы.Ссылка
				ЛЕВОЕ СОЕДИНЕНИЕ ПланВидовХарактеристик.CRM_ДополнительныеРеквизитыКлассификаторов КАК CRM_ДополнительныеРеквизитыКлассификаторов
				ПО CRM_ЗначенияКлассификаторов.ДополнительныйРеквизит = CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка
		ГДЕ
			CRM_Классификаторы.ВидОтображения = ЗНАЧЕНИЕ(ПЕРЕЧИСЛЕНИЕ.CRM_ВидыОтображенияКлассификаторов.Вхождение)
			И CRM_ДополнительныеРеквизитыКлассификаторов.Ссылка ЕСТЬ NULL)
	ПОЛЕКЛЮЧА Ссылка
	ПОЛЕИМЕНИ Наименование
	ЗНАЧЕНИЯХАРАКТЕРИСТИК (ВЫБРАТЬ
			CRM_ОбъектыЗначенийКлассификаторов.Объект КАК Объект,
			ИСТИНА КАК Значение,
			CRM_ОбъектыЗначенийКлассификаторов.ЗначениеКлассификатора КАК ЗначениеКлассификатора
		ИЗ
			РегистрСведений.CRM_ОбъектыЗначенийКлассификаторов КАК CRM_ОбъектыЗначенийКлассификаторов)
	ПОЛЕОБЪЕКТА Объект
	ПОЛЕВИДА ЗначениеКлассификатора }</query>
	</dataSet>
	<totalField>
		<dataPath>Выручка</dataPath>
		<expression>Сумма(Выручка)</expression>
	</totalField>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>НачалоПериода(ТекущаяДата(),"Квартал")</expression>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>КонецПериода(ТекущаяДата(),"Квартал")</expression>
	</parameter>
	<parameter>
		<name>ТекущаяДата</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущая дата</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>Date</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>ТекущаяДата()</expression>
	</parameter>
	<parameter>
		<name>КлассификаторКатегория</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Классификатор категория</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:ChartOfCharacteristicTypesRef.CRM_Классификаторы</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ДатаИсторииКатегории</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата истории категории</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>ДобавитьКДате(НачалоПериода(ДобавитьКДате(ТекущаяДата(),"Месяц",-3),"Квартал"),"День", 10)</expression>
	</parameter>
	<parameter>
		<name>РольКоординатор</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Роль координатор</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.РолиКонтактныхЛицПартнеров</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.РолиКонтактныхЛицПартнеров.Координатор</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>РольМенеджер</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Роль менеджер</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.РолиКонтактныхЛицПартнеров</v8:Type>
		</valueType>
		<value xsi:type="dcscor:DesignTimeValue">Справочник.РолиКонтактныхЛицПартнеров.Менеджер</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<template>
		<name>Макет1</name>
		<template xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:AreaTemplate">
			<dcsat:item xsi:type="dcsat:TableRow">
				<dcsat:tableCell>
					<dcsat:item xsi:type="dcsat:Field">
						<dcsat:value xsi:type="dcscor:Parameter">ИзменениеКатегории</dcsat:value>
					</dcsat:item>
					<dcsat:appearance>
						<dcscor:item>
							<dcscor:parameter>Расшифровка</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:Parameter">ИзменениеКатегорииРасшифровка</dcscor:value>
						</dcscor:item>
					</dcsat:appearance>
				</dcsat:tableCell>
			</dcsat:item>
		</template>
		<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:ExpressionAreaTemplateParameter">
			<dcsat:name>ИзменениеКатегории</dcsat:name>
			<dcsat:expression>ИзменениеКатегории</dcsat:expression>
		</parameter>
		<parameter xmlns:dcsat="http://v8.1c.ru/8.1/data-composition-system/area-template" xsi:type="dcsat:DetailsAreaTemplateParameter">
			<dcsat:name>ИзменениеКатегорииРасшифровка</dcsat:name>
			<dcsat:fieldExpression>
				<dcsat:field>ИзменениеКатегории</dcsat:field>
				<dcsat:expression>ИзменениеКатегории</dcsat:expression>
			</dcsat:fieldExpression>
		</parameter>
	</template>
	<fieldTemplate>
		<field>ИзменениеКатегории</field>
		<template>Макет1</template>
	</fieldTemplate>
	<settingsVariant>
		<dcsset:name>ПересмотрКатегорийКлиентов</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Пересмотр категорий клиентов (плитка)</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Клиент</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КатегорияПрошлая</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КатегорияТекущая</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Выручка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ИзменениеКатегории</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Клиент</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:viewMode>Normal</dcsset:viewMode>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection/>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">ИзменениеКатегории</dcsset:left>
							<dcsset:comparisonType>Equal</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:decimal">1</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">style:ДобавленныйРеквизитФон</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection/>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">ИзменениеКатегории</dcsset:left>
							<dcsset:comparisonType>Equal</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:decimal">-1</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">style:ОшибкаПолнотекстовыйПоискФон</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>МакетОформления</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">Зеленый</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Месяц</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>Month</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="dcscor:Field">ПараметрыДанных.НачалоПериода</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="dcscor:Field">ПараметрыДанных.КонецПериода</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Клиент</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ИзменениеКатегории</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>КатегорияПрошлая</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>КатегорияТекущая</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:row>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>